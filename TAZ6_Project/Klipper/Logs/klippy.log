===== Config file =====
[mcu]
serial = /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set allow_park = client.park_at_cancel|default(false)|lower == 'true' %}
	{% set retract = client.cancel_retract|default(5.0)|abs %}
	
	{% set park_x = "" if (client.park_at_cancel_x|default(none) is none)
	else "X=" ~ client.park_at_cancel_x %}
	{% set park_y = "" if (client.park_at_cancel_y|default(none) is none)
	else "Y=" ~ client.park_at_cancel_y %}
	{% set custom_park = park_x|length > 0 or park_y|length > 0 %}
	
	
	{% if printer['gcode_macro RESUME'].restore_idle_timeout > 0 %}
	SET_IDLE_TIMEOUT TIMEOUT={printer['gcode_macro RESUME'].restore_idle_timeout}
	{% endif %}
	{% if (custom_park or not printer.pause_resume.is_paused) and allow_park %} _TOOLHEAD_PARK_PAUSE_CANCEL {park_x} {park_y} {% endif %}
	_CLIENT_RETRACT LENGTH={retract}
	TURN_OFF_HEATERS
	M106 S0
	{client.user_cancel_macro|default("")}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	
	SET_PAUSE_NEXT_LAYER ENABLE=0
	SET_PAUSE_AT_LAYER ENABLE=0 LAYER=0
	CANCEL_PRINT_BASE

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set idle_timeout = client.idle_timeout|default(0) %}
	{% set temp = printer[printer.toolhead.extruder].target if printer.toolhead.extruder != '' else 0 %}
	{% set restore = False if printer.toolhead.extruder == ''
	else True  if params.RESTORE|default(1)|int == 1 else False %}
	
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=last_extruder_temp VALUE="{{'restore': restore, 'temp': temp}}"
	
	{% if idle_timeout > 0 %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=restore_idle_timeout VALUE={printer.configfile.settings.idle_timeout.timeout}
	SET_IDLE_TIMEOUT TIMEOUT={idle_timeout}
	{% endif %}
	PAUSE_BASE
	{client.user_pause_macro|default("")}
	_TOOLHEAD_PARK_PAUSE_CANCEL {rawparams}

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set sp_move = client.speed_move|default(velocity) %}
	{% set runout_resume = True if client.runout_sensor|default("") == ""
	else True if not printer[client.runout_sensor].enabled
	else printer[client.runout_sensor].filament_detected %}
	{% set can_extrude = True if printer.toolhead.extruder == ''
	else printer[printer.toolhead.extruder].can_extrude %}
	{% set do_resume = False %}
	{% set prompt_txt = [] %}
	
	
	{% if printer.idle_timeout.state|upper == "IDLE" or idle_state %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	{% if last_extruder_temp.restore %}
	
	RESPOND TYPE=echo MSG='{"Restoring \"%s\" temperature to %3.1f\u00B0C, this may take some time" % (printer.toolhead.extruder, last_extruder_temp.temp) }'
	M109 S{last_extruder_temp.temp}
	{% set do_resume = True %}
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	{% if runout_resume %}
	{% if do_resume %}
	{% if restore_idle_timeout > 0 %} SET_IDLE_TIMEOUT TIMEOUT={restore_idle_timeout} {% endif %}
	{client.user_resume_macro|default("")}
	_CLIENT_EXTRUDE
	RESUME_BASE VELOCITY={params.VELOCITY|default(sp_move)}
	{% endif %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]}'
	{% set _d = prompt_txt.append("\"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]) %}
	{% endif %}
	
	{% if not (runout_resume and do_resume) %}
	RESPOND TYPE=command MSG="action:prompt_begin RESUME aborted !!!"
	{% for element in prompt_txt %}
	RESPOND TYPE=command MSG='{"action:prompt_text %s" % element}'
	{% endfor %}
	RESPOND TYPE=command MSG="action:prompt_footer_button Ok|RESPOND TYPE=command MSG=action:prompt_end|info"
	RESPOND TYPE=command MSG="action:prompt_show"
	{% endif %}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[filament_switch_sensor switch_sensor]
switch_pin = ^PB16
pause_on_runout = True
runout_gcode = 
insert_gcode = 

[filament_motion_sensor encoder_sensor]
switch_pin = PB15
detection_length = 3
extruder = extruder
pause_on_runout = False
runout_gcode = 

[gcode_macro PROBE_DOWN]
gcode = 
	SET_PIN PIN=probe_enable VALUE=1

[gcode_macro PROBE_UP]
gcode = 
	SET_PIN PIN=probe_enable VALUE=0

[output_pin probe_enable]
pin = PB12
value = 0

[probe]
pin = ^!PA7
deactivate_on_each_sample = False
x_offset = -16
y_offset = 45
samples = 2
samples_tolerance = 0.05
samples_tolerance_retries = 3
activate_gcode = 
	PROBE_DOWN
	G4 P500
deactivate_gcode = 
	PROBE_UP
z_offset = 0.570

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 9000
max_z_velocity = 7
max_z_accel = 100

[input_shaper]

[stepper_x]
step_pin = PC6
dir_pin = PC5
enable_pin = !PC9
microsteps = 16
rotation_distance = 32
endstop_pin = ^PD4
position_endstop = -15
position_max = 300
position_min = -15
homing_speed = 75

[tmc2130 stepper_x]
cs_pin = PC7
run_current = .75
sense_resistor = 0.120
diag1_pin = !PA4
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[stepper_y]
step_pin = PC12
dir_pin = !PC11
enable_pin = !PC14
microsteps = 16
rotation_distance = 32
endstop_pin = PD6
position_endstop = -10
position_max = 303
position_min = -10
homing_speed = 75

[tmc2130 stepper_y]
cs_pin = PC13
run_current = .75
sense_resistor = 0.120
diag1_pin = !PC15
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[stepper_z]
step_pin = PC17
dir_pin = PC16
enable_pin = !PC19
microsteps = 16
rotation_distance = 2
endstop_pin = probe:z_virtual_endstop
position_max = 265
position_min = -3
homing_speed = 5

[tmc2130 stepper_z]
cs_pin = PC18
run_current = .80
sense_resistor = 0.120
diag1_pin = PC4
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[safe_z_home]
home_xy_position = 166,105
speed = 100
z_hop = 10
z_hop_speed = 100

[extruder]
step_pin = PB10
dir_pin = !PC10
enable_pin = !PB22
microsteps = 16
rotation_distance = 7.81
nozzle_diameter = 0.400
filament_diameter = 1.75
heater_pin = PC24
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB19
min_temp = 0
max_temp = 285
min_extrude_temp = 120
max_extrude_only_distance = 140.0
pressure_advance = .0525
control = pid
pid_kp = 23.681
pid_ki = 1.152
pid_kd = 121.659

[tmc2130 extruder]
cs_pin = PC20
run_current = .75
sense_resistor = 0.120
diag1_pin = !PB23
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[heater_bed]
heater_pin = PC21
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PB20
control = pid
pid_kp = 21
pid_ki = 1.78
pid_kd = 61.93
min_temp = 0
max_temp = 130

[fan]
pin = PC23

[heater_fan nozzle_cooling_fan]
pin = PC25

[display]
lcd_type = st7920
cs_pin = EXP1_4
sclk_pin = EXP1_5
sid_pin = EXP1_3
encoder_pins = ^EXP2_3, ^EXP2_5
click_pin = ^!EXP1_2

[output_pin beeper]
pin = EXP1_1

[board_pins]
aliases = 
	
	EXP1_1=PA14, EXP1_3=PA15, EXP1_5=PA0,  EXP1_7=PA1, EXP1_9=<GND>,
	EXP1_2=PA13, EXP1_4=PA12, EXP1_6=PA16, EXP1_8=PC2, EXP1_10=<5V>,
	
	EXP2_1=PA25, EXP2_3=PB27, EXP2_5=PA3,  EXP2_7=PB25,  EXP2_9=<GND>,
	EXP2_2=PA27, EXP2_4=PA29, EXP2_6=PA26, EXP2_8=<RST>, EXP2_10=<3.3V>

[bed_mesh]
speed = 300
horizontal_move_z = 10
mesh_min = 10, 45
mesh_max = 240, 290
fade_start = 0.6
fade_end = 10.0
probe_count = 15, 15
algorithm = bicubic

[bed_mesh default]
version = 1
points = 
	0.052187, -0.014375, -0.081250, -0.137813, -0.181875
	0.022500, -0.009688, -0.045938, -0.074375, -0.095000
	-0.007500, -0.018438, -0.033750, -0.041875, -0.046875
	-0.055938, -0.047500, -0.044375, -0.030938, -0.010938
	-0.105313, -0.074375, -0.049063, -0.007500, 0.040000
x_count = 5
y_count = 5
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 240.0
min_y = 45.0
max_y = 290.0

[bed_mesh 60degree]
version = 1
points = 
	-0.137188, -0.132500, -0.130000, -0.134063, -0.134375, -0.136875, -0.135313, -0.132500, -0.135000, -0.132500, -0.125000, -0.115938, -0.106250, -0.093125, -0.075313
	-0.124688, -0.121875, -0.123750, -0.111563, -0.129063, -0.126875, -0.125625, -0.123125, -0.120625, -0.113125, -0.105000, -0.098750, -0.087500, -0.073125, -0.063750
	-0.115313, -0.114063, -0.115938, -0.116875, -0.117500, -0.114688, -0.115313, -0.113125, -0.105625, -0.102813, -0.091563, -0.084375, -0.068125, -0.045313, -0.040000
	-0.108750, -0.104375, -0.104375, -0.105313, -0.105938, -0.105938, -0.105938, -0.104688, -0.096563, -0.091563, -0.083125, -0.066875, -0.065313, -0.030000, -0.034688
	-0.103125, -0.097188, -0.098125, -0.098125, -0.099063, -0.098750, -0.100313, -0.095313, -0.090938, -0.085313, -0.075625, -0.065625, -0.051563, -0.038125, -0.015938
	-0.096875, -0.095000, -0.094375, -0.095000, -0.093750, -0.094375, -0.093438, -0.088438, -0.086250, -0.076250, -0.070625, -0.057188, -0.044375, -0.033438, -0.018750
	-0.090625, -0.087813, -0.088125, -0.087813, -0.087500, -0.091875, -0.087188, -0.084688, -0.080625, -0.075000, -0.065000, -0.054375, -0.039688, -0.031563, -0.021250
	-0.091875, -0.089375, -0.087500, -0.089063, -0.086563, -0.089375, -0.088750, -0.085000, -0.083125, -0.076250, -0.069688, -0.060000, -0.045625, -0.037188, -0.020625
	-0.088438, -0.086563, -0.088125, -0.088438, -0.089375, -0.091563, -0.090000, -0.088125, -0.082188, -0.075313, -0.069688, -0.059375, -0.048125, -0.036250, -0.025625
	-0.089688, -0.090313, -0.086875, -0.087500, -0.090938, -0.088438, -0.090625, -0.089375, -0.084375, -0.077813, -0.072188, -0.061250, -0.050313, -0.040625, -0.024688
	-0.095313, -0.094063, -0.090938, -0.091563, -0.089688, -0.092500, -0.090313, -0.089375, -0.083125, -0.075313, -0.068750, -0.058125, -0.047500, -0.036563, -0.019688
	-0.098125, -0.097188, -0.098438, -0.093438, -0.095313, -0.095000, -0.091250, -0.090000, -0.085625, -0.079375, -0.068750, -0.056250, -0.045625, -0.034375, -0.020000
	-0.110313, -0.109063, -0.105625, -0.106563, -0.105313, -0.103750, -0.100938, -0.094688, -0.089063, -0.081875, -0.071250, -0.056875, -0.044688, -0.028125, -0.012813
	-0.116250, -0.111250, -0.107188, -0.106875, -0.103750, -0.101875, -0.097500, -0.092188, -0.083750, -0.076250, -0.065000, -0.052188, -0.038438, -0.022813, -0.005938
	-0.123750, -0.116875, -0.113750, -0.111563, -0.109063, -0.106563, -0.105625, -0.097500, -0.087500, -0.077813, -0.065313, -0.047813, -0.033438, -0.018438, -0.000313
x_count = 15
y_count = 15
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 239.88
min_y = 45.0
max_y = 290.0
=======================
Loaded MCU 'mcu' 112 commands (v0.12.0-171-g2f6e94c9 / gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.35.2-2+14+b2) 2.35.2)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_spi0=PA25,PA26,PA27 BUS_PINS_twi0=PA18,PA17 BUS_PINS_twi1=PB13,PB12 BUS_PINS_usart0=PA10,PA11,PA17 BUS_PINS_usart1=PA12,PA13,PA16 BUS_PINS_usart2=PB21,PB20,PB24 CLOCK_FREQ=84000000 MCU=sam3x8e PWM_MAX=255 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Configured MCU 'mcu' (1024 moves)
Args: ['/home/biqu/klipper/klippy/klippy.py', '/home/biqu/printer_data/config/printer.cfg', '-I', '/home/biqu/printer_data/comms/klippy.serial', '-l', '/home/biqu/printer_data/logs/klippy.log', '-a', '/home/biqu/printer_data/comms/klippy.sock']
Git version: 'v0.12.0-171-g2f6e94c9'
Branch: master
Remote: origin
Tracked URL: https://github.com/Klipper3d/klipper
CPU: 4 core ?
Python: '3.9.2 (default, Feb 28 2021, 17:03:44) \n[GCC 10.2.1 20210110]'
webhooks client 281473700663696: {'program': 'Moonraker', 'version': 'v0.8.0-327-g9447494'}
=============== Log rollover at Wed Apr 24 16:12:13 2024 ===============
TMC 'stepper_z' reports GSTAT:      00000001 reset=1(Reset)
TMC 'stepper_z' reports GSTAT:      00000000
Stats 340.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=9245 bytes_read=42298 bytes_retransmit=9 bytes_invalid=0 send_seq=738 receive_seq=738 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=19 upcoming_bytes=0 freq=83998178  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.19 cputime=15.372 memavail=688232 print_time=343.573 buffer_time=0.000 print_stall=0 extruder: target=0 temp=20.6 pwm=0.000
Stats 341.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=9327 bytes_read=42455 bytes_retransmit=9 bytes_invalid=0 send_seq=744 receive_seq=744 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998179  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.18 cputime=15.414 memavail=688256 print_time=343.573 buffer_time=0.000 print_stall=0 extruder: target=0 temp=20.6 pwm=0.000
TMC 'stepper_x' reports GSTAT:      00000001 reset=1(Reset)
TMC 'stepper_x' reports GSTAT:      00000000
Stats 342.1: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=10103 bytes_read=43206 bytes_retransmit=9 bytes_invalid=0 send_seq=797 receive_seq=797 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998178  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.18 cputime=15.508 memavail=688268 print_time=344.123 buffer_time=0.000 print_stall=0 extruder: target=0 temp=20.5 pwm=0.000
Stats 343.1: gcodein=0  mcu: mcu_awake=0.011 mcu_task_avg=0.000034 mcu_task_stddev=0.000047 bytes_write=10604 bytes_read=43776 bytes_retransmit=9 bytes_invalid=0 send_seq=838 receive_seq=838 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998178  heater_bed: target=0 temp=18.8 pwm=0.000 sysload=0.18 cputime=15.581 memavail=688772 print_time=345.123 buffer_time=0.000 print_stall=0 extruder: target=0 temp=20.5 pwm=0.000
Stats 344.1: gcodein=0  mcu: mcu_awake=0.011 mcu_task_avg=0.000034 mcu_task_stddev=0.000047 bytes_write=11110 bytes_read=44321 bytes_retransmit=9 bytes_invalid=0 send_seq=880 receive_seq=880 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998177  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.18 cputime=15.652 memavail=688972 print_time=346.123 buffer_time=0.000 print_stall=0 extruder: target=0 temp=20.6 pwm=0.000
Stats 345.1: gcodein=0  mcu: mcu_awake=0.011 mcu_task_avg=0.000034 mcu_task_stddev=0.000047 bytes_write=11956 bytes_read=45043 bytes_retransmit=9 bytes_invalid=0 send_seq=934 receive_seq=933 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998176  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.18 cputime=15.759 memavail=689276 print_time=347.137 buffer_time=0.000 print_stall=0 extruder: target=0 temp=20.7 pwm=0.000
TMC 'stepper_y' reports GSTAT:      00000001 reset=1(Reset)
TMC 'stepper_y' reports GSTAT:      00000000
Stats 346.1: gcodein=0  mcu: mcu_awake=0.011 mcu_task_avg=0.000034 mcu_task_stddev=0.000047 bytes_write=12763 bytes_read=45853 bytes_retransmit=9 bytes_invalid=0 send_seq=994 receive_seq=994 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998175  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.16 cputime=15.857 memavail=689028 print_time=348.137 buffer_time=0.000 print_stall=0 extruder: target=0 temp=20.6 pwm=0.000
Stats 347.1: gcodein=0  mcu: mcu_awake=0.011 mcu_task_avg=0.000034 mcu_task_stddev=0.000047 bytes_write=13471 bytes_read=46478 bytes_retransmit=9 bytes_invalid=0 send_seq=1044 receive_seq=1044 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998175  heater_bed: target=0 temp=18.8 pwm=0.000 sysload=0.16 cputime=15.950 memavail=688560 print_time=349.133 buffer_time=0.000 print_stall=0 extruder: target=0 temp=20.6 pwm=0.000
Stats 348.1: gcodein=0  mcu: mcu_awake=0.017 mcu_task_avg=0.000024 mcu_task_stddev=0.000028 bytes_write=14148 bytes_read=46969 bytes_retransmit=9 bytes_invalid=0 send_seq=1078 receive_seq=1078 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998175  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.16 cputime=16.026 memavail=688312 print_time=352.241 buffer_time=2.296 print_stall=0 extruder: target=0 temp=20.5 pwm=0.000
Stats 349.2: gcodein=0  mcu: mcu_awake=0.017 mcu_task_avg=0.000024 mcu_task_stddev=0.000028 bytes_write=14370 bytes_read=47238 bytes_retransmit=9 bytes_invalid=0 send_seq=1093 receive_seq=1093 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998178  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.16 cputime=16.078 memavail=688564 print_time=352.282 buffer_time=0.000 print_stall=0 extruder: target=0 temp=20.5 pwm=0.000
Stats 350.2: gcodein=0  mcu: mcu_awake=0.017 mcu_task_avg=0.000024 mcu_task_stddev=0.000028 bytes_write=14532 bytes_read=47482 bytes_retransmit=9 bytes_invalid=0 send_seq=1106 receive_seq=1106 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998178  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.16 cputime=16.125 memavail=688764 print_time=352.282 buffer_time=0.000 print_stall=0 extruder: target=0 temp=20.6 pwm=0.000
Stats 351.2: gcodein=0  mcu: mcu_awake=0.017 mcu_task_avg=0.000024 mcu_task_stddev=0.000028 bytes_write=15075 bytes_read=48011 bytes_retransmit=9 bytes_invalid=0 send_seq=1145 receive_seq=1145 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998177  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.15 cputime=16.195 memavail=688816 print_time=353.132 buffer_time=0.000 print_stall=0 extruder: target=0 temp=20.6 pwm=0.000
Stats 352.2: gcodein=0  mcu: mcu_awake=0.017 mcu_task_avg=0.000024 mcu_task_stddev=0.000028 bytes_write=15628 bytes_read=48612 bytes_retransmit=9 bytes_invalid=0 send_seq=1190 receive_seq=1190 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998176  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.15 cputime=16.275 memavail=689348 print_time=354.132 buffer_time=0.000 print_stall=0 extruder: target=0 temp=20.5 pwm=0.000
Stats 353.2: gcodein=0  mcu: mcu_awake=0.012 mcu_task_avg=0.000026 mcu_task_stddev=0.000035 bytes_write=16186 bytes_read=49218 bytes_retransmit=9 bytes_invalid=0 send_seq=1236 receive_seq=1236 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998175  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.15 cputime=16.352 memavail=689096 print_time=355.132 buffer_time=0.000 print_stall=0 extruder: target=0 temp=20.6 pwm=0.000
Stats 354.2: gcodein=0  mcu: mcu_awake=0.012 mcu_task_avg=0.000026 mcu_task_stddev=0.000035 bytes_write=16756 bytes_read=49843 bytes_retransmit=9 bytes_invalid=0 send_seq=1283 receive_seq=1283 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998172  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.15 cputime=16.429 memavail=689096 print_time=356.132 buffer_time=0.000 print_stall=0 extruder: target=0 temp=20.6 pwm=0.000
Stats 355.2: gcodein=0  mcu: mcu_awake=0.012 mcu_task_avg=0.000026 mcu_task_stddev=0.000035 bytes_write=17313 bytes_read=50448 bytes_retransmit=9 bytes_invalid=0 send_seq=1329 receive_seq=1329 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998170  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.15 cputime=16.503 memavail=689300 print_time=357.132 buffer_time=0.000 print_stall=0 extruder: target=0 temp=20.5 pwm=0.000
Stats 356.2: gcodein=0  mcu: mcu_awake=0.012 mcu_task_avg=0.000026 mcu_task_stddev=0.000035 bytes_write=17857 bytes_read=51021 bytes_retransmit=9 bytes_invalid=0 send_seq=1375 receive_seq=1375 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998171  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.14 cputime=16.580 memavail=689352 print_time=358.132 buffer_time=0.000 print_stall=0 extruder: target=0 temp=20.5 pwm=0.000
Stats 357.2: gcodein=0  mcu: mcu_awake=0.012 mcu_task_avg=0.000026 mcu_task_stddev=0.000035 bytes_write=18413 bytes_read=51638 bytes_retransmit=9 bytes_invalid=0 send_seq=1422 receive_seq=1422 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998168  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.14 cputime=16.661 memavail=689108 print_time=359.132 buffer_time=0.000 print_stall=0 extruder: target=0 temp=20.5 pwm=0.000
Stats 358.2: gcodein=0  mcu: mcu_awake=0.015 mcu_task_avg=0.000021 mcu_task_stddev=0.000021 bytes_write=18953 bytes_read=52219 bytes_retransmit=9 bytes_invalid=0 send_seq=1467 receive_seq=1467 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998168  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.14 cputime=16.739 memavail=689108 print_time=360.132 buffer_time=0.000 print_stall=0 extruder: target=0 temp=20.6 pwm=0.000
Stats 359.2: gcodein=0  mcu: mcu_awake=0.015 mcu_task_avg=0.000021 mcu_task_stddev=0.000021 bytes_write=19510 bytes_read=52818 bytes_retransmit=9 bytes_invalid=0 send_seq=1513 receive_seq=1513 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=7 upcoming_bytes=0 freq=83998168  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.14 cputime=16.813 memavail=689108 print_time=361.132 buffer_time=0.000 print_stall=0 extruder: target=0 temp=20.5 pwm=0.000
Stats 360.2: gcodein=0  mcu: mcu_awake=0.015 mcu_task_avg=0.000021 mcu_task_stddev=0.000021 bytes_write=20080 bytes_read=53444 bytes_retransmit=9 bytes_invalid=0 send_seq=1560 receive_seq=1560 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998167  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.14 cputime=16.887 memavail=689108 print_time=362.132 buffer_time=0.000 print_stall=0 extruder: target=0 temp=20.5 pwm=0.000
Stats 361.2: gcodein=0  mcu: mcu_awake=0.015 mcu_task_avg=0.000021 mcu_task_stddev=0.000021 bytes_write=20638 bytes_read=54035 bytes_retransmit=9 bytes_invalid=0 send_seq=1606 receive_seq=1606 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998167  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.12 cputime=16.961 memavail=689360 print_time=363.132 buffer_time=0.000 print_stall=0 extruder: target=0 temp=20.6 pwm=0.000
Stats 362.2: gcodein=0  mcu: mcu_awake=0.015 mcu_task_avg=0.000021 mcu_task_stddev=0.000021 bytes_write=21208 bytes_read=54645 bytes_retransmit=9 bytes_invalid=0 send_seq=1653 receive_seq=1653 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998164  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.12 cputime=17.037 memavail=689116 print_time=364.132 buffer_time=0.000 print_stall=0 extruder: target=0 temp=20.6 pwm=0.000
Stats 363.2: gcodein=0  mcu: mcu_awake=0.015 mcu_task_avg=0.000021 mcu_task_stddev=0.000021 bytes_write=21766 bytes_read=55281 bytes_retransmit=9 bytes_invalid=0 send_seq=1699 receive_seq=1699 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998164  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.12 cputime=17.111 memavail=688868 print_time=365.132 buffer_time=0.000 print_stall=0 extruder: target=0 temp=20.5 pwm=0.000
Stats 364.2: gcodein=0  mcu: mcu_awake=0.015 mcu_task_avg=0.000021 mcu_task_stddev=0.000021 bytes_write=22324 bytes_read=55872 bytes_retransmit=9 bytes_invalid=0 send_seq=1745 receive_seq=1745 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998164  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.12 cputime=17.184 memavail=688620 print_time=366.132 buffer_time=0.000 print_stall=0 extruder: target=0 temp=20.6 pwm=0.000
Stats 365.2: gcodein=0  mcu: mcu_awake=0.015 mcu_task_avg=0.000021 mcu_task_stddev=0.000021 bytes_write=22891 bytes_read=56329 bytes_retransmit=9 bytes_invalid=0 send_seq=1778 receive_seq=1778 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998164  heater_bed: target=0 temp=18.8 pwm=0.000 sysload=0.12 cputime=17.253 memavail=688184 print_time=367.738 buffer_time=0.000 print_stall=0 extruder: target=0 temp=20.6 pwm=0.000
Stats 366.2: gcodein=0  mcu: mcu_awake=0.015 mcu_task_avg=0.000021 mcu_task_stddev=0.000021 bytes_write=23245 bytes_read=56714 bytes_retransmit=9 bytes_invalid=0 send_seq=1802 receive_seq=1802 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998164  heater_bed: target=0 temp=18.8 pwm=0.000 sysload=0.11 cputime=17.310 memavail=688184 print_time=368.138 buffer_time=0.000 print_stall=0 extruder: target=0 temp=20.6 pwm=0.000
Stats 367.2: gcodein=0  mcu: mcu_awake=0.015 mcu_task_avg=0.000021 mcu_task_stddev=0.000021 bytes_write=23823 bytes_read=57305 bytes_retransmit=9 bytes_invalid=0 send_seq=1848 receive_seq=1848 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998165  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.11 cputime=17.383 memavail=687716 print_time=369.138 buffer_time=0.000 print_stall=0 extruder: target=0 temp=20.6 pwm=0.000
Stats 368.2: gcodein=0  mcu: mcu_awake=0.013 mcu_task_avg=0.000022 mcu_task_stddev=0.000023 bytes_write=24536 bytes_read=57960 bytes_retransmit=9 bytes_invalid=0 send_seq=1898 receive_seq=1898 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=9 upcoming_bytes=0 freq=83998169  heater_bed: target=0 temp=18.8 pwm=0.000 sysload=0.11 cputime=17.473 memavail=687464 print_time=371.596 buffer_time=1.622 print_stall=0 extruder: target=0 temp=20.5 pwm=0.000
Stats 369.2: gcodein=0  mcu: mcu_awake=0.013 mcu_task_avg=0.000022 mcu_task_stddev=0.000023 bytes_write=24712 bytes_read=58239 bytes_retransmit=9 bytes_invalid=0 send_seq=1912 receive_seq=1912 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998173  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.11 cputime=17.522 memavail=687464 print_time=371.596 buffer_time=0.622 print_stall=0 extruder: target=0 temp=20.6 pwm=0.000
Stats 370.2: gcodein=0  mcu: mcu_awake=0.013 mcu_task_avg=0.000022 mcu_task_stddev=0.000023 bytes_write=24966 bytes_read=58493 bytes_retransmit=9 bytes_invalid=0 send_seq=1927 receive_seq=1927 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998173  heater_bed: target=0 temp=18.8 pwm=0.000 sysload=0.11 cputime=17.570 memavail=687088 print_time=371.596 buffer_time=0.000 print_stall=0 extruder: target=0 temp=20.5 pwm=0.000
Stats 371.2: gcodein=0  mcu: mcu_awake=0.013 mcu_task_avg=0.000022 mcu_task_stddev=0.000023 bytes_write=25312 bytes_read=58772 bytes_retransmit=9 bytes_invalid=0 send_seq=1944 receive_seq=1944 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=7 upcoming_bytes=0 freq=83998173  heater_bed: target=0 temp=18.8 pwm=0.000 sysload=0.10 cputime=17.636 memavail=687116 print_time=376.017 buffer_time=3.038 print_stall=1 extruder: target=0 temp=20.5 pwm=0.000
Stats 372.2: gcodein=0  mcu: mcu_awake=0.013 mcu_task_avg=0.000022 mcu_task_stddev=0.000023 bytes_write=25492 bytes_read=59052 bytes_retransmit=9 bytes_invalid=0 send_seq=1959 receive_seq=1959 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998171  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.10 cputime=17.684 memavail=687384 print_time=376.017 buffer_time=2.037 print_stall=1 extruder: target=0 temp=20.5 pwm=0.000
Stats 373.2: gcodein=0  mcu: mcu_awake=0.010 mcu_task_avg=0.000027 mcu_task_stddev=0.000032 bytes_write=25654 bytes_read=59311 bytes_retransmit=9 bytes_invalid=0 send_seq=1972 receive_seq=1972 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998173  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.10 cputime=17.733 memavail=686876 print_time=376.017 buffer_time=1.036 print_stall=1 extruder: target=0 temp=20.5 pwm=0.000
Stats 374.2: gcodein=0  mcu: mcu_awake=0.010 mcu_task_avg=0.000027 mcu_task_stddev=0.000032 bytes_write=26066 bytes_read=59590 bytes_retransmit=9 bytes_invalid=0 send_seq=1989 receive_seq=1989 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998174  heater_bed: target=0 temp=18.8 pwm=0.000 sysload=0.10 cputime=17.795 memavail=687168 print_time=379.659 buffer_time=3.675 print_stall=1 extruder: target=0 temp=20.5 pwm=0.000
Stats 375.2: gcodein=0  mcu: mcu_awake=0.010 mcu_task_avg=0.000027 mcu_task_stddev=0.000032 bytes_write=26228 bytes_read=59849 bytes_retransmit=9 bytes_invalid=0 send_seq=2002 receive_seq=2002 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998174  heater_bed: target=0 temp=18.8 pwm=0.000 sysload=0.10 cputime=17.843 memavail=686944 print_time=379.659 buffer_time=2.675 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 376.2: gcodein=0  mcu: mcu_awake=0.010 mcu_task_avg=0.000027 mcu_task_stddev=0.000032 bytes_write=26390 bytes_read=60093 bytes_retransmit=9 bytes_invalid=0 send_seq=2015 receive_seq=2015 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998174  heater_bed: target=0 temp=18.8 pwm=0.000 sysload=0.10 cputime=17.890 memavail=687196 print_time=379.659 buffer_time=1.673 print_stall=1 extruder: target=0 temp=20.5 pwm=0.000
Stats 377.2: gcodein=0  mcu: mcu_awake=0.010 mcu_task_avg=0.000027 mcu_task_stddev=0.000032 bytes_write=26552 bytes_read=60352 bytes_retransmit=9 bytes_invalid=0 send_seq=2028 receive_seq=2028 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998174  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.10 cputime=17.937 memavail=686980 print_time=379.659 buffer_time=0.671 print_stall=1 extruder: target=0 temp=20.5 pwm=0.000
Stats 378.2: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000032 bytes_write=26806 bytes_read=60636 bytes_retransmit=9 bytes_invalid=0 send_seq=2043 receive_seq=2043 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998174  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.10 cputime=17.985 memavail=686980 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 379.2: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000032 bytes_write=26996 bytes_read=60885 bytes_retransmit=9 bytes_invalid=0 send_seq=2057 receive_seq=2057 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998173  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.10 cputime=18.030 memavail=687008 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.5 pwm=0.000
Stats 380.2: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000032 bytes_write=27158 bytes_read=61144 bytes_retransmit=9 bytes_invalid=0 send_seq=2070 receive_seq=2070 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998172  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.10 cputime=18.074 memavail=686784 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 381.2: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000032 bytes_write=27320 bytes_read=61403 bytes_retransmit=9 bytes_invalid=0 send_seq=2083 receive_seq=2083 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998173  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.09 cputime=18.119 memavail=687428 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 382.2: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000032 bytes_write=27482 bytes_read=61647 bytes_retransmit=9 bytes_invalid=0 send_seq=2096 receive_seq=2096 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998177  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.09 cputime=18.163 memavail=687428 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.5 pwm=0.000
Stats 383.2: gcodein=0  mcu: mcu_awake=0.008 mcu_task_avg=0.000031 mcu_task_stddev=0.000045 bytes_write=27644 bytes_read=61921 bytes_retransmit=9 bytes_invalid=0 send_seq=2109 receive_seq=2109 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998178  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.09 cputime=18.211 memavail=687184 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 384.2: gcodein=0  mcu: mcu_awake=0.008 mcu_task_avg=0.000031 mcu_task_stddev=0.000045 bytes_write=27806 bytes_read=62180 bytes_retransmit=9 bytes_invalid=0 send_seq=2122 receive_seq=2122 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998178  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.09 cputime=18.257 memavail=686960 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 385.2: gcodein=0  mcu: mcu_awake=0.008 mcu_task_avg=0.000031 mcu_task_stddev=0.000045 bytes_write=27968 bytes_read=62424 bytes_retransmit=9 bytes_invalid=0 send_seq=2135 receive_seq=2135 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998177  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.09 cputime=18.302 memavail=687248 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 386.2: gcodein=0  mcu: mcu_awake=0.008 mcu_task_avg=0.000031 mcu_task_stddev=0.000045 bytes_write=28130 bytes_read=62683 bytes_retransmit=9 bytes_invalid=0 send_seq=2148 receive_seq=2148 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998177  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.08 cputime=18.348 memavail=686520 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 387.2: gcodein=0  mcu: mcu_awake=0.008 mcu_task_avg=0.000031 mcu_task_stddev=0.000045 bytes_write=28292 bytes_read=62942 bytes_retransmit=9 bytes_invalid=0 send_seq=2161 receive_seq=2161 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998181  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.08 cputime=18.395 memavail=686760 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 388.2: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=28454 bytes_read=63201 bytes_retransmit=9 bytes_invalid=0 send_seq=2174 receive_seq=2174 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998181  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.08 cputime=18.440 memavail=687092 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 389.2: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=28616 bytes_read=63460 bytes_retransmit=9 bytes_invalid=0 send_seq=2187 receive_seq=2187 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998181  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.08 cputime=18.486 memavail=686868 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.5 pwm=0.000
Stats 390.2: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=28778 bytes_read=63719 bytes_retransmit=9 bytes_invalid=0 send_seq=2200 receive_seq=2200 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998180  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.08 cputime=18.532 memavail=686344 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.5 pwm=0.000
Stats 391.2: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=28940 bytes_read=63963 bytes_retransmit=9 bytes_invalid=0 send_seq=2213 receive_seq=2213 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998181  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.07 cputime=18.576 memavail=686424 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 392.2: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=29102 bytes_read=64222 bytes_retransmit=9 bytes_invalid=0 send_seq=2226 receive_seq=2226 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998181  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.07 cputime=18.621 memavail=686384 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.5 pwm=0.000
Stats 393.2: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=29264 bytes_read=64496 bytes_retransmit=9 bytes_invalid=0 send_seq=2239 receive_seq=2239 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998185  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.07 cputime=18.667 memavail=685708 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 394.2: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=29426 bytes_read=64740 bytes_retransmit=9 bytes_invalid=0 send_seq=2252 receive_seq=2252 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998189  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.07 cputime=18.712 memavail=686216 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 395.2: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=29588 bytes_read=64999 bytes_retransmit=9 bytes_invalid=0 send_seq=2265 receive_seq=2265 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998188  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.07 cputime=18.755 memavail=685488 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 396.2: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=29750 bytes_read=65258 bytes_retransmit=9 bytes_invalid=0 send_seq=2278 receive_seq=2278 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998186  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.07 cputime=18.802 memavail=684480 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 397.2: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=29912 bytes_read=65502 bytes_retransmit=9 bytes_invalid=0 send_seq=2291 receive_seq=2291 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998190  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.07 cputime=18.854 memavail=687572 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.5 pwm=0.000
Stats 398.2: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000028 mcu_task_stddev=0.000031 bytes_write=30074 bytes_read=65776 bytes_retransmit=9 bytes_invalid=0 send_seq=2304 receive_seq=2304 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998188  heater_bed: target=0 temp=18.8 pwm=0.000 sysload=0.07 cputime=18.901 memavail=687608 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 399.2: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000028 mcu_task_stddev=0.000031 bytes_write=30236 bytes_read=66035 bytes_retransmit=9 bytes_invalid=0 send_seq=2317 receive_seq=2317 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998189  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.07 cputime=18.945 memavail=687640 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.5 pwm=0.000
Stats 400.2: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000028 mcu_task_stddev=0.000031 bytes_write=30398 bytes_read=66279 bytes_retransmit=9 bytes_invalid=0 send_seq=2330 receive_seq=2330 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998187  heater_bed: target=0 temp=18.8 pwm=0.000 sysload=0.07 cputime=18.990 memavail=687136 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 401.2: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000028 mcu_task_stddev=0.000031 bytes_write=30560 bytes_read=66538 bytes_retransmit=9 bytes_invalid=0 send_seq=2343 receive_seq=2343 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998184  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.06 cputime=19.036 memavail=687136 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.5 pwm=0.000
Stats 402.2: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000028 mcu_task_stddev=0.000031 bytes_write=30722 bytes_read=66797 bytes_retransmit=9 bytes_invalid=0 send_seq=2356 receive_seq=2356 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998183  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.06 cputime=19.082 memavail=687388 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.5 pwm=0.000
Stats 403.2: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000028 mcu_task_stddev=0.000030 bytes_write=30884 bytes_read=67056 bytes_retransmit=9 bytes_invalid=0 send_seq=2369 receive_seq=2369 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998182  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.06 cputime=19.128 memavail=687044 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.5 pwm=0.000
Stats 404.2: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000028 mcu_task_stddev=0.000030 bytes_write=31046 bytes_read=67315 bytes_retransmit=9 bytes_invalid=0 send_seq=2382 receive_seq=2382 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998181  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.06 cputime=19.174 memavail=687048 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 405.2: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000028 mcu_task_stddev=0.000030 bytes_write=31208 bytes_read=67574 bytes_retransmit=9 bytes_invalid=0 send_seq=2395 receive_seq=2395 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998183  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.06 cputime=19.220 memavail=686796 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.5 pwm=0.000
Stats 406.2: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000028 mcu_task_stddev=0.000030 bytes_write=31365 bytes_read=67813 bytes_retransmit=9 bytes_invalid=0 send_seq=2407 receive_seq=2407 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998184  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.30 cputime=19.265 memavail=687048 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 407.2: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000028 mcu_task_stddev=0.000030 bytes_write=31527 bytes_read=68063 bytes_retransmit=9 bytes_invalid=0 send_seq=2420 receive_seq=2420 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998183  heater_bed: target=0 temp=18.8 pwm=0.000 sysload=0.30 cputime=19.310 memavail=686548 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.5 pwm=0.000
Stats 408.2: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=31689 bytes_read=68329 bytes_retransmit=9 bytes_invalid=0 send_seq=2433 receive_seq=2433 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998183  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.30 cputime=19.355 memavail=687260 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.5 pwm=0.000
Stats 409.2: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=31851 bytes_read=68566 bytes_retransmit=9 bytes_invalid=0 send_seq=2446 receive_seq=2446 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998182  heater_bed: target=0 temp=18.8 pwm=0.000 sysload=0.30 cputime=19.400 memavail=687060 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 410.2: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=32013 bytes_read=68823 bytes_retransmit=9 bytes_invalid=0 send_seq=2459 receive_seq=2459 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998181  heater_bed: target=0 temp=18.8 pwm=0.000 sysload=0.30 cputime=19.444 memavail=687308 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 411.2: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=32175 bytes_read=69082 bytes_retransmit=9 bytes_invalid=0 send_seq=2472 receive_seq=2472 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998181  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.35 cputime=19.488 memavail=687060 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.5 pwm=0.000
Stats 412.2: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=32337 bytes_read=69326 bytes_retransmit=9 bytes_invalid=0 send_seq=2485 receive_seq=2485 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998180  heater_bed: target=0 temp=18.8 pwm=0.000 sysload=0.35 cputime=19.532 memavail=687060 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.5 pwm=0.000
Stats 413.2: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=32499 bytes_read=69600 bytes_retransmit=9 bytes_invalid=0 send_seq=2498 receive_seq=2498 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998181  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.35 cputime=19.577 memavail=686816 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 414.2: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=32661 bytes_read=69859 bytes_retransmit=9 bytes_invalid=0 send_seq=2511 receive_seq=2511 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998180  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.35 cputime=19.620 memavail=686764 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.5 pwm=0.000
Stats 415.3: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=32823 bytes_read=70103 bytes_retransmit=9 bytes_invalid=0 send_seq=2524 receive_seq=2524 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998179  heater_bed: target=0 temp=18.8 pwm=0.000 sysload=0.35 cputime=19.664 memavail=687356 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 416.3: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=32985 bytes_read=70362 bytes_retransmit=9 bytes_invalid=0 send_seq=2537 receive_seq=2537 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998179  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.33 cputime=19.707 memavail=687356 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 417.3: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=33147 bytes_read=70621 bytes_retransmit=9 bytes_invalid=0 send_seq=2550 receive_seq=2550 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998180  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.33 cputime=19.751 memavail=687108 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 418.3: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=33309 bytes_read=70880 bytes_retransmit=9 bytes_invalid=0 send_seq=2563 receive_seq=2563 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998179  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.33 cputime=19.793 memavail=687116 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.5 pwm=0.000
Stats 419.3: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=33471 bytes_read=71139 bytes_retransmit=9 bytes_invalid=0 send_seq=2576 receive_seq=2576 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998179  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.33 cputime=19.838 memavail=687116 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 420.3: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=33633 bytes_read=71398 bytes_retransmit=9 bytes_invalid=0 send_seq=2589 receive_seq=2589 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998178  heater_bed: target=0 temp=18.8 pwm=0.000 sysload=0.33 cputime=19.882 memavail=687116 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 421.3: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=33795 bytes_read=71642 bytes_retransmit=9 bytes_invalid=0 send_seq=2602 receive_seq=2602 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998178  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.30 cputime=19.929 memavail=687192 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 422.3: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=33957 bytes_read=71901 bytes_retransmit=9 bytes_invalid=0 send_seq=2615 receive_seq=2615 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998177  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.30 cputime=19.973 memavail=687192 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 423.3: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=34119 bytes_read=72175 bytes_retransmit=9 bytes_invalid=0 send_seq=2628 receive_seq=2628 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998176  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.30 cputime=20.017 memavail=686948 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 424.3: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=34281 bytes_read=72419 bytes_retransmit=9 bytes_invalid=0 send_seq=2641 receive_seq=2641 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998176  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.30 cputime=20.060 memavail=686948 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 425.3: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=34443 bytes_read=72693 bytes_retransmit=9 bytes_invalid=0 send_seq=2654 receive_seq=2654 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998176  heater_bed: target=0 temp=18.8 pwm=0.000 sysload=0.30 cputime=20.107 memavail=686700 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 426.3: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=34605 bytes_read=72937 bytes_retransmit=9 bytes_invalid=0 send_seq=2667 receive_seq=2667 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998175  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.27 cputime=20.151 memavail=687456 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 427.3: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=34767 bytes_read=73181 bytes_retransmit=9 bytes_invalid=0 send_seq=2680 receive_seq=2680 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998175  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.27 cputime=20.196 memavail=687712 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.5 pwm=0.000
Stats 428.3: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000032 bytes_write=34929 bytes_read=73470 bytes_retransmit=9 bytes_invalid=0 send_seq=2693 receive_seq=2693 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998177  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.27 cputime=20.241 memavail=687720 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.5 pwm=0.000
Stats 429.3: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000032 bytes_write=35091 bytes_read=73714 bytes_retransmit=9 bytes_invalid=0 send_seq=2706 receive_seq=2706 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998177  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.27 cputime=20.284 memavail=687972 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 430.3: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000032 bytes_write=35259 bytes_read=73974 bytes_retransmit=9 bytes_invalid=0 send_seq=2720 receive_seq=2720 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998175  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.27 cputime=20.330 memavail=688172 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 431.3: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000032 bytes_write=35421 bytes_read=74248 bytes_retransmit=9 bytes_invalid=0 send_seq=2733 receive_seq=2733 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998175  heater_bed: target=0 temp=18.8 pwm=0.000 sysload=0.25 cputime=20.374 memavail=688476 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.5 pwm=0.000
Stats 432.3: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000032 bytes_write=35583 bytes_read=74492 bytes_retransmit=9 bytes_invalid=0 send_seq=2746 receive_seq=2746 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998177  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.25 cputime=20.417 memavail=688224 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.5 pwm=0.000
Stats 433.3: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=35745 bytes_read=74751 bytes_retransmit=9 bytes_invalid=0 send_seq=2759 receive_seq=2759 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998177  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.25 cputime=20.462 memavail=688736 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.5 pwm=0.000
Stats 434.3: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=35907 bytes_read=75025 bytes_retransmit=9 bytes_invalid=0 send_seq=2772 receive_seq=2772 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998177  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.25 cputime=20.506 memavail=688488 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.5 pwm=0.000
Stats 435.3: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=36069 bytes_read=75269 bytes_retransmit=9 bytes_invalid=0 send_seq=2785 receive_seq=2785 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998176  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.25 cputime=20.549 memavail=688740 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 436.3: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=36231 bytes_read=75513 bytes_retransmit=9 bytes_invalid=0 send_seq=2798 receive_seq=2798 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998176  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.31 cputime=20.593 memavail=688740 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 437.3: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=36393 bytes_read=75787 bytes_retransmit=9 bytes_invalid=0 send_seq=2811 receive_seq=2811 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998176  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.31 cputime=20.638 memavail=687936 print_time=379.659 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.5 pwm=0.000
Stats 978.8: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000029 mcu_task_stddev=0.000031 bytes_write=123907 bytes_read=214558 bytes_retransmit=9 bytes_invalid=0 send_seq=9831 receive_seq=9831 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998113  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.17 cputime=47.601 memavail=692432 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 979.8: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000028 mcu_task_stddev=0.000030 bytes_write=123913 bytes_read=214679 bytes_retransmit=9 bytes_invalid=0 send_seq=9832 receive_seq=9832 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998116  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.17 cputime=47.637 memavail=691780 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 980.8: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000028 mcu_task_stddev=0.000030 bytes_write=123919 bytes_read=214800 bytes_retransmit=9 bytes_invalid=0 send_seq=9833 receive_seq=9833 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998116  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.15 cputime=47.673 memavail=691980 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 981.8: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000028 mcu_task_stddev=0.000030 bytes_write=123925 bytes_read=214921 bytes_retransmit=9 bytes_invalid=0 send_seq=9834 receive_seq=9834 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998115  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.15 cputime=47.710 memavail=692320 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 982.8: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000028 mcu_task_stddev=0.000030 bytes_write=123931 bytes_read=215027 bytes_retransmit=9 bytes_invalid=0 send_seq=9835 receive_seq=9835 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998116  heater_bed: target=0 temp=18.8 pwm=0.000 sysload=0.15 cputime=47.747 memavail=692320 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 983.8: gcodein=0  mcu: mcu_awake=0.007 mcu_task_avg=0.000028 mcu_task_stddev=0.000030 bytes_write=123937 bytes_read=215148 bytes_retransmit=9 bytes_invalid=0 send_seq=9836 receive_seq=9836 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998115  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.15 cputime=47.785 memavail=692528 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 984.8: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=123943 bytes_read=215283 bytes_retransmit=9 bytes_invalid=0 send_seq=9837 receive_seq=9837 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998114  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.15 cputime=47.822 memavail=692356 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 985.9: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=123949 bytes_read=215389 bytes_retransmit=9 bytes_invalid=0 send_seq=9838 receive_seq=9838 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998114  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.14 cputime=47.857 memavail=692396 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 986.9: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=123955 bytes_read=215510 bytes_retransmit=9 bytes_invalid=0 send_seq=9839 receive_seq=9839 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998113  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.14 cputime=47.893 memavail=692396 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 987.9: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=123961 bytes_read=215631 bytes_retransmit=9 bytes_invalid=0 send_seq=9840 receive_seq=9840 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998115  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.14 cputime=47.932 memavail=691896 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 988.9: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=123967 bytes_read=215737 bytes_retransmit=9 bytes_invalid=0 send_seq=9841 receive_seq=9841 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998114  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.14 cputime=47.967 memavail=691924 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 989.9: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=123973 bytes_read=215872 bytes_retransmit=9 bytes_invalid=0 send_seq=9842 receive_seq=9842 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998113  heater_bed: target=0 temp=18.8 pwm=0.000 sysload=0.14 cputime=48.004 memavail=691924 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 990.9: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=123979 bytes_read=215993 bytes_retransmit=9 bytes_invalid=0 send_seq=9843 receive_seq=9843 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998113  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.13 cputime=48.040 memavail=691456 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 991.9: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=123985 bytes_read=216099 bytes_retransmit=9 bytes_invalid=0 send_seq=9844 receive_seq=9844 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998112  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.13 cputime=48.076 memavail=691236 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 992.9: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=123991 bytes_read=216235 bytes_retransmit=9 bytes_invalid=0 send_seq=9845 receive_seq=9845 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998112  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.13 cputime=48.113 memavail=690988 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 993.9: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=123997 bytes_read=216341 bytes_retransmit=9 bytes_invalid=0 send_seq=9846 receive_seq=9846 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998111  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.13 cputime=48.149 memavail=690988 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 994.9: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=124003 bytes_read=216461 bytes_retransmit=9 bytes_invalid=0 send_seq=9847 receive_seq=9847 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998110  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.13 cputime=48.185 memavail=690764 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 995.9: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=124009 bytes_read=216597 bytes_retransmit=9 bytes_invalid=0 send_seq=9848 receive_seq=9848 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998110  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.12 cputime=48.222 memavail=690520 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 996.9: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=124015 bytes_read=216703 bytes_retransmit=9 bytes_invalid=0 send_seq=9849 receive_seq=9849 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998110  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.12 cputime=48.257 memavail=691220 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 997.9: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=124021 bytes_read=216824 bytes_retransmit=9 bytes_invalid=0 send_seq=9850 receive_seq=9850 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998110  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.12 cputime=48.294 memavail=690800 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 998.9: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=124027 bytes_read=216945 bytes_retransmit=9 bytes_invalid=0 send_seq=9851 receive_seq=9851 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998110  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.12 cputime=48.331 memavail=691080 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 999.9: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=124033 bytes_read=217065 bytes_retransmit=9 bytes_invalid=0 send_seq=9852 receive_seq=9852 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998111  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.12 cputime=48.366 memavail=690828 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 1000.9: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=124039 bytes_read=217186 bytes_retransmit=9 bytes_invalid=0 send_seq=9853 receive_seq=9853 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998112  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.11 cputime=48.401 memavail=691092 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 1001.9: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=124045 bytes_read=217307 bytes_retransmit=9 bytes_invalid=0 send_seq=9854 receive_seq=9854 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998114  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.11 cputime=48.442 memavail=683308 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 1002.9: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=124051 bytes_read=217413 bytes_retransmit=9 bytes_invalid=0 send_seq=9855 receive_seq=9855 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998115  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.11 cputime=48.477 memavail=684596 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 1003.9: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=124057 bytes_read=217534 bytes_retransmit=9 bytes_invalid=0 send_seq=9856 receive_seq=9856 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998114  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.11 cputime=48.513 memavail=684624 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 1004.9: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=124063 bytes_read=217669 bytes_retransmit=9 bytes_invalid=0 send_seq=9857 receive_seq=9857 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998114  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.11 cputime=48.548 memavail=684372 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 1005.9: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=124069 bytes_read=217775 bytes_retransmit=9 bytes_invalid=0 send_seq=9858 receive_seq=9858 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998118  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.10 cputime=48.583 memavail=684372 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 1006.9: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=124075 bytes_read=217896 bytes_retransmit=9 bytes_invalid=0 send_seq=9859 receive_seq=9859 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998117  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.10 cputime=48.618 memavail=684380 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 1007.9: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=124081 bytes_read=218017 bytes_retransmit=9 bytes_invalid=0 send_seq=9860 receive_seq=9860 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998116  heater_bed: target=0 temp=18.8 pwm=0.000 sysload=0.10 cputime=48.654 memavail=684408 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 1008.9: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=124087 bytes_read=218123 bytes_retransmit=9 bytes_invalid=0 send_seq=9861 receive_seq=9861 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998117  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.10 cputime=48.690 memavail=685240 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 1009.9: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=124093 bytes_read=218258 bytes_retransmit=9 bytes_invalid=0 send_seq=9862 receive_seq=9862 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998116  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.10 cputime=48.725 memavail=685272 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 1010.9: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=124099 bytes_read=218379 bytes_retransmit=9 bytes_invalid=0 send_seq=9863 receive_seq=9863 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998116  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.09 cputime=48.760 memavail=685056 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 1011.9: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=124105 bytes_read=218485 bytes_retransmit=9 bytes_invalid=0 send_seq=9864 receive_seq=9864 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998115  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.09 cputime=48.795 memavail=685056 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 1013.0: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=124111 bytes_read=218606 bytes_retransmit=9 bytes_invalid=0 send_seq=9865 receive_seq=9865 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998117  heater_bed: target=0 temp=18.6 pwm=0.000 sysload=0.09 cputime=48.831 memavail=685064 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 1014.0: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=124117 bytes_read=218727 bytes_retransmit=9 bytes_invalid=0 send_seq=9866 receive_seq=9866 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998116  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.09 cputime=48.868 memavail=684840 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 1015.0: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=124123 bytes_read=218847 bytes_retransmit=9 bytes_invalid=0 send_seq=9867 receive_seq=9867 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998117  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.09 cputime=48.904 memavail=685096 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 1016.0: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=124129 bytes_read=218968 bytes_retransmit=9 bytes_invalid=0 send_seq=9868 receive_seq=9868 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998116  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.08 cputime=48.940 memavail=684352 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 1017.0: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=124135 bytes_read=219089 bytes_retransmit=9 bytes_invalid=0 send_seq=9869 receive_seq=9869 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998116  heater_bed: target=0 temp=18.8 pwm=0.000 sysload=0.08 cputime=48.975 memavail=684352 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 1018.0: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=124141 bytes_read=219195 bytes_retransmit=9 bytes_invalid=0 send_seq=9870 receive_seq=9870 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998115  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.08 cputime=49.010 memavail=684732 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 1019.0: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=124147 bytes_read=219316 bytes_retransmit=9 bytes_invalid=0 send_seq=9871 receive_seq=9871 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998115  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.08 cputime=49.045 memavail=685044 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 1020.0: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=124153 bytes_read=219449 bytes_retransmit=9 bytes_invalid=0 send_seq=9872 receive_seq=9872 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998115  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.08 cputime=49.081 memavail=685580 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 1021.0: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=124159 bytes_read=219548 bytes_retransmit=9 bytes_invalid=0 send_seq=9873 receive_seq=9873 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998114  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.08 cputime=49.116 memavail=685588 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 1022.0: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=124165 bytes_read=219675 bytes_retransmit=9 bytes_invalid=0 send_seq=9874 receive_seq=9874 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998113  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.08 cputime=49.152 memavail=685588 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 1023.0: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=124171 bytes_read=219774 bytes_retransmit=9 bytes_invalid=0 send_seq=9875 receive_seq=9875 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998113  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.08 cputime=49.188 memavail=685588 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 1024.0: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=124177 bytes_read=219879 bytes_retransmit=9 bytes_invalid=0 send_seq=9876 receive_seq=9876 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998112  heater_bed: target=0 temp=18.8 pwm=0.000 sysload=0.08 cputime=49.223 memavail=685336 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 1025.0: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=124183 bytes_read=220029 bytes_retransmit=9 bytes_invalid=0 send_seq=9877 receive_seq=9877 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998112  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.08 cputime=49.260 memavail=685112 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 1026.0: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=124189 bytes_read=220135 bytes_retransmit=9 bytes_invalid=0 send_seq=9878 receive_seq=9878 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998111  heater_bed: target=0 temp=18.8 pwm=0.000 sysload=0.07 cputime=49.296 memavail=684868 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 1027.0: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=124195 bytes_read=220256 bytes_retransmit=9 bytes_invalid=0 send_seq=9879 receive_seq=9879 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998111  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.07 cputime=49.332 memavail=685376 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.6 pwm=0.000
Stats 1028.0: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=124207 bytes_read=220393 bytes_retransmit=9 bytes_invalid=0 send_seq=9881 receive_seq=9881 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998117  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.07 cputime=49.369 memavail=685152 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 1029.0: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=124213 bytes_read=220499 bytes_retransmit=9 bytes_invalid=0 send_seq=9882 receive_seq=9882 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998120  heater_bed: target=0 temp=18.8 pwm=0.000 sysload=0.07 cputime=49.404 memavail=685716 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 1030.0: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=124219 bytes_read=220634 bytes_retransmit=9 bytes_invalid=0 send_seq=9883 receive_seq=9883 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998119  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.07 cputime=49.440 memavail=686472 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 1031.0: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=124225 bytes_read=220755 bytes_retransmit=9 bytes_invalid=0 send_seq=9884 receive_seq=9884 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998119  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.06 cputime=49.476 memavail=686732 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 1032.0: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=124231 bytes_read=220861 bytes_retransmit=9 bytes_invalid=0 send_seq=9885 receive_seq=9885 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998120  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.06 cputime=49.511 memavail=686732 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 1033.0: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=124237 bytes_read=220982 bytes_retransmit=9 bytes_invalid=0 send_seq=9886 receive_seq=9886 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998120  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.06 cputime=49.547 memavail=686260 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 1034.0: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=124243 bytes_read=221103 bytes_retransmit=9 bytes_invalid=0 send_seq=9887 receive_seq=9887 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998119  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.06 cputime=49.582 memavail=686324 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 1035.0: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=124249 bytes_read=221223 bytes_retransmit=9 bytes_invalid=0 send_seq=9888 receive_seq=9888 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998118  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.06 cputime=49.617 memavail=686072 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 1036.0: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=124255 bytes_read=221344 bytes_retransmit=9 bytes_invalid=0 send_seq=9889 receive_seq=9889 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998118  heater_bed: target=0 temp=18.8 pwm=0.000 sysload=0.06 cputime=49.653 memavail=686120 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 1037.0: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=124261 bytes_read=221465 bytes_retransmit=9 bytes_invalid=0 send_seq=9890 receive_seq=9890 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998117  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.06 cputime=49.689 memavail=686372 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 1038.0: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=124267 bytes_read=221571 bytes_retransmit=9 bytes_invalid=0 send_seq=9891 receive_seq=9891 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998116  heater_bed: target=0 temp=18.7 pwm=0.000 sysload=0.06 cputime=49.724 memavail=686120 print_time=980.599 buffer_time=0.000 print_stall=1 extruder: target=0 temp=20.7 pwm=0.000
Stats 2692.3: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=134356 bytes_read=417647 bytes_retransmit=9 bytes_invalid=0 send_seq=11572 receive_seq=11572 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=19 upcoming_bytes=0 freq=83998236  heater_bed: target=0 temp=19.0 pwm=0.000 sysload=0.36 cputime=104.853 memavail=684184 print_time=2694.861 buffer_time=0.826 print_stall=1 extruder: target=0 temp=20.9 pwm=0.000
Attempting MCU 'mcu' reset command
webhooks client 281473700663696: Disconnected
Restarting printer
Start printer at Wed Apr 24 16:51:28 2024 (1713991888.1 2694.3)
===== Config file =====
[mcu]
serial = /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00

[mcu rpi]
serial = /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00

[adxl345]
spi_bus = spidev1.1
cs_pin = rpi:None

[resonance_tester]
accel_chip = adxl345
probe_points = 
	150,150,20

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set allow_park = client.park_at_cancel|default(false)|lower == 'true' %}
	{% set retract = client.cancel_retract|default(5.0)|abs %}
	
	{% set park_x = "" if (client.park_at_cancel_x|default(none) is none)
	else "X=" ~ client.park_at_cancel_x %}
	{% set park_y = "" if (client.park_at_cancel_y|default(none) is none)
	else "Y=" ~ client.park_at_cancel_y %}
	{% set custom_park = park_x|length > 0 or park_y|length > 0 %}
	
	
	{% if printer['gcode_macro RESUME'].restore_idle_timeout > 0 %}
	SET_IDLE_TIMEOUT TIMEOUT={printer['gcode_macro RESUME'].restore_idle_timeout}
	{% endif %}
	{% if (custom_park or not printer.pause_resume.is_paused) and allow_park %} _TOOLHEAD_PARK_PAUSE_CANCEL {park_x} {park_y} {% endif %}
	_CLIENT_RETRACT LENGTH={retract}
	TURN_OFF_HEATERS
	M106 S0
	{client.user_cancel_macro|default("")}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	
	SET_PAUSE_NEXT_LAYER ENABLE=0
	SET_PAUSE_AT_LAYER ENABLE=0 LAYER=0
	CANCEL_PRINT_BASE

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set idle_timeout = client.idle_timeout|default(0) %}
	{% set temp = printer[printer.toolhead.extruder].target if printer.toolhead.extruder != '' else 0 %}
	{% set restore = False if printer.toolhead.extruder == ''
	else True  if params.RESTORE|default(1)|int == 1 else False %}
	
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=last_extruder_temp VALUE="{{'restore': restore, 'temp': temp}}"
	
	{% if idle_timeout > 0 %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=restore_idle_timeout VALUE={printer.configfile.settings.idle_timeout.timeout}
	SET_IDLE_TIMEOUT TIMEOUT={idle_timeout}
	{% endif %}
	PAUSE_BASE
	{client.user_pause_macro|default("")}
	_TOOLHEAD_PARK_PAUSE_CANCEL {rawparams}

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set sp_move = client.speed_move|default(velocity) %}
	{% set runout_resume = True if client.runout_sensor|default("") == ""
	else True if not printer[client.runout_sensor].enabled
	else printer[client.runout_sensor].filament_detected %}
	{% set can_extrude = True if printer.toolhead.extruder == ''
	else printer[printer.toolhead.extruder].can_extrude %}
	{% set do_resume = False %}
	{% set prompt_txt = [] %}
	
	
	{% if printer.idle_timeout.state|upper == "IDLE" or idle_state %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	{% if last_extruder_temp.restore %}
	
	RESPOND TYPE=echo MSG='{"Restoring \"%s\" temperature to %3.1f\u00B0C, this may take some time" % (printer.toolhead.extruder, last_extruder_temp.temp) }'
	M109 S{last_extruder_temp.temp}
	{% set do_resume = True %}
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	{% if runout_resume %}
	{% if do_resume %}
	{% if restore_idle_timeout > 0 %} SET_IDLE_TIMEOUT TIMEOUT={restore_idle_timeout} {% endif %}
	{client.user_resume_macro|default("")}
	_CLIENT_EXTRUDE
	RESUME_BASE VELOCITY={params.VELOCITY|default(sp_move)}
	{% endif %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]}'
	{% set _d = prompt_txt.append("\"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]) %}
	{% endif %}
	
	{% if not (runout_resume and do_resume) %}
	RESPOND TYPE=command MSG="action:prompt_begin RESUME aborted !!!"
	{% for element in prompt_txt %}
	RESPOND TYPE=command MSG='{"action:prompt_text %s" % element}'
	{% endfor %}
	RESPOND TYPE=command MSG="action:prompt_footer_button Ok|RESPOND TYPE=command MSG=action:prompt_end|info"
	RESPOND TYPE=command MSG="action:prompt_show"
	{% endif %}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[filament_switch_sensor switch_sensor]
switch_pin = ^PB16
pause_on_runout = True
runout_gcode = 
insert_gcode = 

[filament_motion_sensor encoder_sensor]
switch_pin = PB15
detection_length = 3
extruder = extruder
pause_on_runout = False
runout_gcode = 

[gcode_macro PROBE_DOWN]
gcode = 
	SET_PIN PIN=probe_enable VALUE=1

[gcode_macro PROBE_UP]
gcode = 
	SET_PIN PIN=probe_enable VALUE=0

[output_pin probe_enable]
pin = PB12
value = 0

[probe]
pin = ^!PA7
deactivate_on_each_sample = False
x_offset = -16
y_offset = 45
samples = 2
samples_tolerance = 0.05
samples_tolerance_retries = 3
activate_gcode = 
	PROBE_DOWN
	G4 P500
deactivate_gcode = 
	PROBE_UP
z_offset = 0.570

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 9000
max_z_velocity = 7
max_z_accel = 100

[input_shaper]

[stepper_x]
step_pin = PC6
dir_pin = PC5
enable_pin = !PC9
microsteps = 16
rotation_distance = 32
endstop_pin = ^PD4
position_endstop = -15
position_max = 300
position_min = -15
homing_speed = 75

[tmc2130 stepper_x]
cs_pin = PC7
run_current = .75
sense_resistor = 0.120
diag1_pin = !PA4
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[stepper_y]
step_pin = PC12
dir_pin = !PC11
enable_pin = !PC14
microsteps = 16
rotation_distance = 32
endstop_pin = PD6
position_endstop = -10
position_max = 303
position_min = -10
homing_speed = 75

[tmc2130 stepper_y]
cs_pin = PC13
run_current = .75
sense_resistor = 0.120
diag1_pin = !PC15
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[stepper_z]
step_pin = PC17
dir_pin = PC16
enable_pin = !PC19
microsteps = 16
rotation_distance = 2
endstop_pin = probe:z_virtual_endstop
position_max = 265
position_min = -3
homing_speed = 5

[tmc2130 stepper_z]
cs_pin = PC18
run_current = .80
sense_resistor = 0.120
diag1_pin = PC4
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[safe_z_home]
home_xy_position = 166,105
speed = 100
z_hop = 10
z_hop_speed = 100

[extruder]
step_pin = PB10
dir_pin = !PC10
enable_pin = !PB22
microsteps = 16
rotation_distance = 7.81
nozzle_diameter = 0.400
filament_diameter = 1.75
heater_pin = PC24
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB19
min_temp = 0
max_temp = 285
min_extrude_temp = 120
max_extrude_only_distance = 140.0
pressure_advance = .0525
control = pid
pid_kp = 23.681
pid_ki = 1.152
pid_kd = 121.659

[tmc2130 extruder]
cs_pin = PC20
run_current = .75
sense_resistor = 0.120
diag1_pin = !PB23
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[heater_bed]
heater_pin = PC21
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PB20
control = pid
pid_kp = 21
pid_ki = 1.78
pid_kd = 61.93
min_temp = 0
max_temp = 130

[fan]
pin = PC23

[heater_fan nozzle_cooling_fan]
pin = PC25

[display]
lcd_type = st7920
cs_pin = EXP1_4
sclk_pin = EXP1_5
sid_pin = EXP1_3
encoder_pins = ^EXP2_3, ^EXP2_5
click_pin = ^!EXP1_2

[output_pin beeper]
pin = EXP1_1

[board_pins]
aliases = 
	
	EXP1_1=PA14, EXP1_3=PA15, EXP1_5=PA0,  EXP1_7=PA1, EXP1_9=<GND>,
	EXP1_2=PA13, EXP1_4=PA12, EXP1_6=PA16, EXP1_8=PC2, EXP1_10=<5V>,
	
	EXP2_1=PA25, EXP2_3=PB27, EXP2_5=PA3,  EXP2_7=PB25,  EXP2_9=<GND>,
	EXP2_2=PA27, EXP2_4=PA29, EXP2_6=PA26, EXP2_8=<RST>, EXP2_10=<3.3V>

[bed_mesh]
speed = 300
horizontal_move_z = 10
mesh_min = 10, 45
mesh_max = 240, 290
fade_start = 0.6
fade_end = 10.0
probe_count = 15, 15
algorithm = bicubic

[bed_mesh default]
version = 1
points = 
	0.052187, -0.014375, -0.081250, -0.137813, -0.181875
	0.022500, -0.009688, -0.045938, -0.074375, -0.095000
	-0.007500, -0.018438, -0.033750, -0.041875, -0.046875
	-0.055938, -0.047500, -0.044375, -0.030938, -0.010938
	-0.105313, -0.074375, -0.049063, -0.007500, 0.040000
x_count = 5
y_count = 5
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 240.0
min_y = 45.0
max_y = 290.0

[bed_mesh 60degree]
version = 1
points = 
	-0.137188, -0.132500, -0.130000, -0.134063, -0.134375, -0.136875, -0.135313, -0.132500, -0.135000, -0.132500, -0.125000, -0.115938, -0.106250, -0.093125, -0.075313
	-0.124688, -0.121875, -0.123750, -0.111563, -0.129063, -0.126875, -0.125625, -0.123125, -0.120625, -0.113125, -0.105000, -0.098750, -0.087500, -0.073125, -0.063750
	-0.115313, -0.114063, -0.115938, -0.116875, -0.117500, -0.114688, -0.115313, -0.113125, -0.105625, -0.102813, -0.091563, -0.084375, -0.068125, -0.045313, -0.040000
	-0.108750, -0.104375, -0.104375, -0.105313, -0.105938, -0.105938, -0.105938, -0.104688, -0.096563, -0.091563, -0.083125, -0.066875, -0.065313, -0.030000, -0.034688
	-0.103125, -0.097188, -0.098125, -0.098125, -0.099063, -0.098750, -0.100313, -0.095313, -0.090938, -0.085313, -0.075625, -0.065625, -0.051563, -0.038125, -0.015938
	-0.096875, -0.095000, -0.094375, -0.095000, -0.093750, -0.094375, -0.093438, -0.088438, -0.086250, -0.076250, -0.070625, -0.057188, -0.044375, -0.033438, -0.018750
	-0.090625, -0.087813, -0.088125, -0.087813, -0.087500, -0.091875, -0.087188, -0.084688, -0.080625, -0.075000, -0.065000, -0.054375, -0.039688, -0.031563, -0.021250
	-0.091875, -0.089375, -0.087500, -0.089063, -0.086563, -0.089375, -0.088750, -0.085000, -0.083125, -0.076250, -0.069688, -0.060000, -0.045625, -0.037188, -0.020625
	-0.088438, -0.086563, -0.088125, -0.088438, -0.089375, -0.091563, -0.090000, -0.088125, -0.082188, -0.075313, -0.069688, -0.059375, -0.048125, -0.036250, -0.025625
	-0.089688, -0.090313, -0.086875, -0.087500, -0.090938, -0.088438, -0.090625, -0.089375, -0.084375, -0.077813, -0.072188, -0.061250, -0.050313, -0.040625, -0.024688
	-0.095313, -0.094063, -0.090938, -0.091563, -0.089688, -0.092500, -0.090313, -0.089375, -0.083125, -0.075313, -0.068750, -0.058125, -0.047500, -0.036563, -0.019688
	-0.098125, -0.097188, -0.098438, -0.093438, -0.095313, -0.095000, -0.091250, -0.090000, -0.085625, -0.079375, -0.068750, -0.056250, -0.045625, -0.034375, -0.020000
	-0.110313, -0.109063, -0.105625, -0.106563, -0.105313, -0.103750, -0.100938, -0.094688, -0.089063, -0.081875, -0.071250, -0.056875, -0.044688, -0.028125, -0.012813
	-0.116250, -0.111250, -0.107188, -0.106875, -0.103750, -0.101875, -0.097500, -0.092188, -0.083750, -0.076250, -0.065000, -0.052188, -0.038438, -0.022813, -0.005938
	-0.123750, -0.116875, -0.113750, -0.111563, -0.109063, -0.106563, -0.105625, -0.097500, -0.087500, -0.077813, -0.065313, -0.047813, -0.033438, -0.018438, -0.000313
x_count = 15
y_count = 15
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 239.88
min_y = 45.0
max_y = 290.0
=======================
Extruder max_extrude_ratio=0.266081
mcu 'mcu': Starting serial connect
webhooks client 281473682807056: New connection
webhooks client 281473682807056: Client info {'program': 'Moonraker', 'version': 'v0.8.0-327-g9447494'}
Loaded MCU 'mcu' 112 commands (v0.12.0-171-g2f6e94c9 / gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.35.2-2+14+b2) 2.35.2)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_spi0=PA25,PA26,PA27 BUS_PINS_twi0=PA18,PA17 BUS_PINS_twi1=PB13,PB12 BUS_PINS_usart0=PA10,PA11,PA17 BUS_PINS_usart1=PA12,PA13,PA16 BUS_PINS_usart2=PB21,PB20,PB24 CLOCK_FREQ=84000000 MCU=sam3x8e PWM_MAX=255 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
mcu 'rpi': Starting serial connect
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
b'Got EOF when reading from device'
mcu 'rpi': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
Loaded MCU 'rpi' 112 commands (v0.12.0-171-g2f6e94c9 / gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.35.2-2+14+b2) 2.35.2)
MCU 'rpi' config: ADC_MAX=4095 BUS_PINS_spi0=PA25,PA26,PA27 BUS_PINS_twi0=PA18,PA17 BUS_PINS_twi1=PB13,PB12 BUS_PINS_usart0=PA10,PA11,PA17 BUS_PINS_usart1=PA12,PA13,PA16 BUS_PINS_usart2=PB21,PB20,PB24 CLOCK_FREQ=84000000 MCU=sam3x8e PWM_MAX=255 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Starting Klippy...
Args: ['/home/biqu/klipper/klippy/klippy.py', '/home/biqu/printer_data/config/printer.cfg', '-I', '/home/biqu/printer_data/comms/klippy.serial', '-l', '/home/biqu/printer_data/logs/klippy.log', '-a', '/home/biqu/printer_data/comms/klippy.sock']
Git version: 'v0.12.0-171-g2f6e94c9'
Branch: master
Remote: origin
Tracked URL: https://github.com/Klipper3d/klipper
CPU: 4 core ?
Python: '3.9.2 (default, Feb 28 2021, 17:03:44) \n[GCC 10.2.1 20210110]'
Start printer at Wed Apr 24 16:52:17 2024 (1713991937.6 19.1)
===== Config file =====
[mcu]
serial = /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00

[mcu rpi]
serial = /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00

[adxl345]
spi_bus = spidev1.1
cs_pin = rpi:None

[resonance_tester]
accel_chip = adxl345
probe_points = 
	150,150,20

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set allow_park = client.park_at_cancel|default(false)|lower == 'true' %}
	{% set retract = client.cancel_retract|default(5.0)|abs %}
	
	{% set park_x = "" if (client.park_at_cancel_x|default(none) is none)
	else "X=" ~ client.park_at_cancel_x %}
	{% set park_y = "" if (client.park_at_cancel_y|default(none) is none)
	else "Y=" ~ client.park_at_cancel_y %}
	{% set custom_park = park_x|length > 0 or park_y|length > 0 %}
	
	
	{% if printer['gcode_macro RESUME'].restore_idle_timeout > 0 %}
	SET_IDLE_TIMEOUT TIMEOUT={printer['gcode_macro RESUME'].restore_idle_timeout}
	{% endif %}
	{% if (custom_park or not printer.pause_resume.is_paused) and allow_park %} _TOOLHEAD_PARK_PAUSE_CANCEL {park_x} {park_y} {% endif %}
	_CLIENT_RETRACT LENGTH={retract}
	TURN_OFF_HEATERS
	M106 S0
	{client.user_cancel_macro|default("")}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	
	SET_PAUSE_NEXT_LAYER ENABLE=0
	SET_PAUSE_AT_LAYER ENABLE=0 LAYER=0
	CANCEL_PRINT_BASE

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set idle_timeout = client.idle_timeout|default(0) %}
	{% set temp = printer[printer.toolhead.extruder].target if printer.toolhead.extruder != '' else 0 %}
	{% set restore = False if printer.toolhead.extruder == ''
	else True  if params.RESTORE|default(1)|int == 1 else False %}
	
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=last_extruder_temp VALUE="{{'restore': restore, 'temp': temp}}"
	
	{% if idle_timeout > 0 %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=restore_idle_timeout VALUE={printer.configfile.settings.idle_timeout.timeout}
	SET_IDLE_TIMEOUT TIMEOUT={idle_timeout}
	{% endif %}
	PAUSE_BASE
	{client.user_pause_macro|default("")}
	_TOOLHEAD_PARK_PAUSE_CANCEL {rawparams}

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set sp_move = client.speed_move|default(velocity) %}
	{% set runout_resume = True if client.runout_sensor|default("") == ""
	else True if not printer[client.runout_sensor].enabled
	else printer[client.runout_sensor].filament_detected %}
	{% set can_extrude = True if printer.toolhead.extruder == ''
	else printer[printer.toolhead.extruder].can_extrude %}
	{% set do_resume = False %}
	{% set prompt_txt = [] %}
	
	
	{% if printer.idle_timeout.state|upper == "IDLE" or idle_state %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	{% if last_extruder_temp.restore %}
	
	RESPOND TYPE=echo MSG='{"Restoring \"%s\" temperature to %3.1f\u00B0C, this may take some time" % (printer.toolhead.extruder, last_extruder_temp.temp) }'
	M109 S{last_extruder_temp.temp}
	{% set do_resume = True %}
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	{% if runout_resume %}
	{% if do_resume %}
	{% if restore_idle_timeout > 0 %} SET_IDLE_TIMEOUT TIMEOUT={restore_idle_timeout} {% endif %}
	{client.user_resume_macro|default("")}
	_CLIENT_EXTRUDE
	RESUME_BASE VELOCITY={params.VELOCITY|default(sp_move)}
	{% endif %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]}'
	{% set _d = prompt_txt.append("\"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]) %}
	{% endif %}
	
	{% if not (runout_resume and do_resume) %}
	RESPOND TYPE=command MSG="action:prompt_begin RESUME aborted !!!"
	{% for element in prompt_txt %}
	RESPOND TYPE=command MSG='{"action:prompt_text %s" % element}'
	{% endfor %}
	RESPOND TYPE=command MSG="action:prompt_footer_button Ok|RESPOND TYPE=command MSG=action:prompt_end|info"
	RESPOND TYPE=command MSG="action:prompt_show"
	{% endif %}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[filament_switch_sensor switch_sensor]
switch_pin = ^PB16
pause_on_runout = True
runout_gcode = 
insert_gcode = 

[filament_motion_sensor encoder_sensor]
switch_pin = PB15
detection_length = 3
extruder = extruder
pause_on_runout = False
runout_gcode = 

[gcode_macro PROBE_DOWN]
gcode = 
	SET_PIN PIN=probe_enable VALUE=1

[gcode_macro PROBE_UP]
gcode = 
	SET_PIN PIN=probe_enable VALUE=0

[output_pin probe_enable]
pin = PB12
value = 0

[probe]
pin = ^!PA7
deactivate_on_each_sample = False
x_offset = -16
y_offset = 45
samples = 2
samples_tolerance = 0.05
samples_tolerance_retries = 3
activate_gcode = 
	PROBE_DOWN
	G4 P500
deactivate_gcode = 
	PROBE_UP
z_offset = 0.570

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 9000
max_z_velocity = 7
max_z_accel = 100

[input_shaper]

[stepper_x]
step_pin = PC6
dir_pin = PC5
enable_pin = !PC9
microsteps = 16
rotation_distance = 32
endstop_pin = ^PD4
position_endstop = -15
position_max = 300
position_min = -15
homing_speed = 75

[tmc2130 stepper_x]
cs_pin = PC7
run_current = .75
sense_resistor = 0.120
diag1_pin = !PA4
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[stepper_y]
step_pin = PC12
dir_pin = !PC11
enable_pin = !PC14
microsteps = 16
rotation_distance = 32
endstop_pin = PD6
position_endstop = -10
position_max = 303
position_min = -10
homing_speed = 75

[tmc2130 stepper_y]
cs_pin = PC13
run_current = .75
sense_resistor = 0.120
diag1_pin = !PC15
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[stepper_z]
step_pin = PC17
dir_pin = PC16
enable_pin = !PC19
microsteps = 16
rotation_distance = 2
endstop_pin = probe:z_virtual_endstop
position_max = 265
position_min = -3
homing_speed = 5

[tmc2130 stepper_z]
cs_pin = PC18
run_current = .80
sense_resistor = 0.120
diag1_pin = PC4
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[safe_z_home]
home_xy_position = 166,105
speed = 100
z_hop = 10
z_hop_speed = 100

[extruder]
step_pin = PB10
dir_pin = !PC10
enable_pin = !PB22
microsteps = 16
rotation_distance = 7.81
nozzle_diameter = 0.400
filament_diameter = 1.75
heater_pin = PC24
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB19
min_temp = 0
max_temp = 285
min_extrude_temp = 120
max_extrude_only_distance = 140.0
pressure_advance = .0525
control = pid
pid_kp = 23.681
pid_ki = 1.152
pid_kd = 121.659

[tmc2130 extruder]
cs_pin = PC20
run_current = .75
sense_resistor = 0.120
diag1_pin = !PB23
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[heater_bed]
heater_pin = PC21
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PB20
control = pid
pid_kp = 21
pid_ki = 1.78
pid_kd = 61.93
min_temp = 0
max_temp = 130

[fan]
pin = PC23

[heater_fan nozzle_cooling_fan]
pin = PC25

[display]
lcd_type = st7920
cs_pin = EXP1_4
sclk_pin = EXP1_5
sid_pin = EXP1_3
encoder_pins = ^EXP2_3, ^EXP2_5
click_pin = ^!EXP1_2

[output_pin beeper]
pin = EXP1_1

[board_pins]
aliases = 
	
	EXP1_1=PA14, EXP1_3=PA15, EXP1_5=PA0,  EXP1_7=PA1, EXP1_9=<GND>,
	EXP1_2=PA13, EXP1_4=PA12, EXP1_6=PA16, EXP1_8=PC2, EXP1_10=<5V>,
	
	EXP2_1=PA25, EXP2_3=PB27, EXP2_5=PA3,  EXP2_7=PB25,  EXP2_9=<GND>,
	EXP2_2=PA27, EXP2_4=PA29, EXP2_6=PA26, EXP2_8=<RST>, EXP2_10=<3.3V>

[bed_mesh]
speed = 300
horizontal_move_z = 10
mesh_min = 10, 45
mesh_max = 240, 290
fade_start = 0.6
fade_end = 10.0
probe_count = 15, 15
algorithm = bicubic

[bed_mesh default]
version = 1
points = 
	0.052187, -0.014375, -0.081250, -0.137813, -0.181875
	0.022500, -0.009688, -0.045938, -0.074375, -0.095000
	-0.007500, -0.018438, -0.033750, -0.041875, -0.046875
	-0.055938, -0.047500, -0.044375, -0.030938, -0.010938
	-0.105313, -0.074375, -0.049063, -0.007500, 0.040000
x_count = 5
y_count = 5
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 240.0
min_y = 45.0
max_y = 290.0

[bed_mesh 60degree]
version = 1
points = 
	-0.137188, -0.132500, -0.130000, -0.134063, -0.134375, -0.136875, -0.135313, -0.132500, -0.135000, -0.132500, -0.125000, -0.115938, -0.106250, -0.093125, -0.075313
	-0.124688, -0.121875, -0.123750, -0.111563, -0.129063, -0.126875, -0.125625, -0.123125, -0.120625, -0.113125, -0.105000, -0.098750, -0.087500, -0.073125, -0.063750
	-0.115313, -0.114063, -0.115938, -0.116875, -0.117500, -0.114688, -0.115313, -0.113125, -0.105625, -0.102813, -0.091563, -0.084375, -0.068125, -0.045313, -0.040000
	-0.108750, -0.104375, -0.104375, -0.105313, -0.105938, -0.105938, -0.105938, -0.104688, -0.096563, -0.091563, -0.083125, -0.066875, -0.065313, -0.030000, -0.034688
	-0.103125, -0.097188, -0.098125, -0.098125, -0.099063, -0.098750, -0.100313, -0.095313, -0.090938, -0.085313, -0.075625, -0.065625, -0.051563, -0.038125, -0.015938
	-0.096875, -0.095000, -0.094375, -0.095000, -0.093750, -0.094375, -0.093438, -0.088438, -0.086250, -0.076250, -0.070625, -0.057188, -0.044375, -0.033438, -0.018750
	-0.090625, -0.087813, -0.088125, -0.087813, -0.087500, -0.091875, -0.087188, -0.084688, -0.080625, -0.075000, -0.065000, -0.054375, -0.039688, -0.031563, -0.021250
	-0.091875, -0.089375, -0.087500, -0.089063, -0.086563, -0.089375, -0.088750, -0.085000, -0.083125, -0.076250, -0.069688, -0.060000, -0.045625, -0.037188, -0.020625
	-0.088438, -0.086563, -0.088125, -0.088438, -0.089375, -0.091563, -0.090000, -0.088125, -0.082188, -0.075313, -0.069688, -0.059375, -0.048125, -0.036250, -0.025625
	-0.089688, -0.090313, -0.086875, -0.087500, -0.090938, -0.088438, -0.090625, -0.089375, -0.084375, -0.077813, -0.072188, -0.061250, -0.050313, -0.040625, -0.024688
	-0.095313, -0.094063, -0.090938, -0.091563, -0.089688, -0.092500, -0.090313, -0.089375, -0.083125, -0.075313, -0.068750, -0.058125, -0.047500, -0.036563, -0.019688
	-0.098125, -0.097188, -0.098438, -0.093438, -0.095313, -0.095000, -0.091250, -0.090000, -0.085625, -0.079375, -0.068750, -0.056250, -0.045625, -0.034375, -0.020000
	-0.110313, -0.109063, -0.105625, -0.106563, -0.105313, -0.103750, -0.100938, -0.094688, -0.089063, -0.081875, -0.071250, -0.056875, -0.044688, -0.028125, -0.012813
	-0.116250, -0.111250, -0.107188, -0.106875, -0.103750, -0.101875, -0.097500, -0.092188, -0.083750, -0.076250, -0.065000, -0.052188, -0.038438, -0.022813, -0.005938
	-0.123750, -0.116875, -0.113750, -0.111563, -0.109063, -0.106563, -0.105625, -0.097500, -0.087500, -0.077813, -0.065313, -0.047813, -0.033438, -0.018438, -0.000313
x_count = 15
y_count = 15
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 239.88
min_y = 45.0
max_y = 290.0
=======================
Extruder max_extrude_ratio=0.266081
mcu 'mcu': Starting serial connect
Loaded MCU 'mcu' 112 commands (v0.12.0-171-g2f6e94c9 / gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.35.2-2+14+b2) 2.35.2)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_spi0=PA25,PA26,PA27 BUS_PINS_twi0=PA18,PA17 BUS_PINS_twi1=PB13,PB12 BUS_PINS_usart0=PA10,PA11,PA17 BUS_PINS_usart1=PA12,PA13,PA16 BUS_PINS_usart2=PB21,PB20,PB24 CLOCK_FREQ=84000000 MCU=sam3x8e PWM_MAX=255 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
mcu 'rpi': Starting serial connect
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
webhooks client 281473004583136: New connection
webhooks client 281473004583136: Client info {'program': 'Moonraker', 'version': 'v0.8.0-327-g9447494'}
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
MCU error during connect
Traceback (most recent call last):
  File "/home/biqu/klipper/klippy/mcu.py", line 791, in _mcu_identify
    self._serial.connect_uart(self._serialport, self._baud, rts)
  File "/home/biqu/klipper/klippy/serialhdl.py", line 182, in connect_uart
    self._error("Unable to connect")
  File "/home/biqu/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'rpi': Unable to connect

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/biqu/klipper/klippy/klippy.py", line 176, in _connect
    self.send_event("klippy:mcu_identify")
  File "/home/biqu/klipper/klippy/klippy.py", line 263, in send_event
    return [cb(*params) for cb in self.event_handlers.get(event, [])]
  File "/home/biqu/klipper/klippy/klippy.py", line 263, in <listcomp>
    return [cb(*params) for cb in self.event_handlers.get(event, [])]
  File "/home/biqu/klipper/klippy/mcu.py", line 796, in _mcu_identify
    raise error(str(e))
mcu.error: mcu 'rpi': Unable to connect
Build file /home/biqu/klipper/klippy/../.config(1560): Tue Apr 23 16:27:10 2024
========= Last MCU build config =========
CONFIG_LOW_LEVEL_OPTIONS=y
# CONFIG_MACH_AVR is not set
CONFIG_MACH_ATSAM=y
# CONFIG_MACH_ATSAMD is not set
# CONFIG_MACH_LPC176X is not set
# CONFIG_MACH_STM32 is not set
# CONFIG_MACH_HC32F460 is not set
# CONFIG_MACH_RP2040 is not set
# CONFIG_MACH_PRU is not set
# CONFIG_MACH_AR100 is not set
# CONFIG_MACH_LINUX is not set
# CONFIG_MACH_SIMU is not set
CONFIG_BOARD_DIRECTORY="atsam"
CONFIG_MCU="sam3x8e"
CONFIG_CLOCK_FREQ=84000000
CONFIG_USBSERIAL=y
CONFIG_ATSAM_SELECT=y
CONFIG_MACH_SAM3X8E=y
# CONFIG_MACH_SAM3X8C is not set
# CONFIG_MACH_SAM4S8C is not set
# CONFIG_MACH_SAM4E8E is not set
# CONFIG_MACH_SAME70Q20B is not set
CONFIG_MACH_SAM3X=y
CONFIG_FLASH_SIZE=0x80000
CONFIG_FLASH_BOOT_ADDRESS=0x0
CONFIG_RAM_START=0x20000000
CONFIG_RAM_SIZE=0x18000
CONFIG_STACK_SIZE=512
CONFIG_FLASH_APPLICATION_ADDRESS=0x80000
CONFIG_ATSAM_USB=y
# CONFIG_ATSAM_SERIAL is not set
CONFIG_USB=y
CONFIG_USB_VENDOR_ID=0x1d50
CONFIG_USB_DEVICE_ID=0x614e
CONFIG_USB_SERIAL_NUMBER_CHIPID=y
CONFIG_USB_SERIAL_NUMBER="12345"

#
# USB ids
#
# end of USB ids

CONFIG_WANT_GPIO_BITBANGING=y
CONFIG_WANT_DISPLAYS=y
CONFIG_WANT_SENSORS=y
CONFIG_WANT_LIS2DW=y
CONFIG_WANT_LDC1612=y
CONFIG_WANT_SOFTWARE_I2C=y
CONFIG_WANT_SOFTWARE_SPI=y
CONFIG_NEED_SENSOR_BULK=y
CONFIG_CANBUS_FREQUENCY=1000000
CONFIG_INITIAL_PINS=""
CONFIG_HAVE_GPIO=y
CONFIG_HAVE_GPIO_ADC=y
CONFIG_HAVE_GPIO_SPI=y
CONFIG_HAVE_GPIO_I2C=y
CONFIG_HAVE_GPIO_HARD_PWM=y
CONFIG_HAVE_STRICT_TIMING=y
CONFIG_HAVE_CHIPID=y
CONFIG_HAVE_STEPPER_BOTH_EDGE=y
CONFIG_HAVE_BOOTLOADER_REQUEST=y
CONFIG_INLINE_STEPPER_HACK=y
=======================
Build file /home/biqu/klipper/klippy/../out/klipper.dict(7778): Tue Apr 23 16:28:06 2024
Last MCU build version: v0.12.0-171-g2f6e94c9
Last MCU build tools: gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.35.2-2+14+b2) 2.35.2
Last MCU build config: ADC_MAX=4095 BUS_PINS_spi0=PA25,PA26,PA27 BUS_PINS_twi0=PA18,PA17 BUS_PINS_twi1=PB13,PB12 BUS_PINS_usart0=PA10,PA11,PA17 BUS_PINS_usart1=PA12,PA13,PA16 BUS_PINS_usart2=PB21,PB20,PB24 CLOCK_FREQ=84000000 MCU=sam3x8e PWM_MAX=255 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Build file /home/biqu/klipper/klippy/../out/klipper.elf(1068496): Tue Apr 23 16:28:23 2024
Attempting MCU 'mcu' reset command
Attempting MCU 'rpi' reset
Unhandled exception during post run
Traceback (most recent call last):
  File "/home/biqu/klipper/klippy/klippy.py", line 234, in run
    self.send_event("klippy:firmware_restart")
  File "/home/biqu/klipper/klippy/klippy.py", line 263, in send_event
    return [cb(*params) for cb in self.event_handlers.get(event, [])]
  File "/home/biqu/klipper/klippy/klippy.py", line 263, in <listcomp>
    return [cb(*params) for cb in self.event_handlers.get(event, [])]
  File "/home/biqu/klipper/klippy/mcu.py", line 953, in _firmware_restart
    self._restart_arduino()
  File "/home/biqu/klipper/klippy/mcu.py", line 913, in _restart_arduino
    serialhdl.arduino_reset(self._serialport, self._reactor)
  File "/home/biqu/klipper/klippy/serialhdl.py", line 385, in arduino_reset
    ser.dtr = False
  File "/home/biqu/klippy-env/lib/python3.9/site-packages/serial/serialutil.py", line 469, in dtr
    self._update_dtr_state()
  File "/home/biqu/klippy-env/lib/python3.9/site-packages/serial/serialposix.py", line 636, in _update_dtr_state
    fcntl.ioctl(self.fd, TIOCMBIC, TIOCM_DTR_str)
OSError: [Errno 5] Input/output error
Restarting printer
Start printer at Wed Apr 24 16:58:04 2024 (1713992284.5 356.0)
===== Config file =====
[mcu]
serial = /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00

[mcu rpi]
serial = /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00

[adxl345]
spi_bus = spidev1.1
cs_pin = None

[resonance_tester]
accel_chip = adxl345
probe_points = 
	150,150,20

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set allow_park = client.park_at_cancel|default(false)|lower == 'true' %}
	{% set retract = client.cancel_retract|default(5.0)|abs %}
	
	{% set park_x = "" if (client.park_at_cancel_x|default(none) is none)
	else "X=" ~ client.park_at_cancel_x %}
	{% set park_y = "" if (client.park_at_cancel_y|default(none) is none)
	else "Y=" ~ client.park_at_cancel_y %}
	{% set custom_park = park_x|length > 0 or park_y|length > 0 %}
	
	
	{% if printer['gcode_macro RESUME'].restore_idle_timeout > 0 %}
	SET_IDLE_TIMEOUT TIMEOUT={printer['gcode_macro RESUME'].restore_idle_timeout}
	{% endif %}
	{% if (custom_park or not printer.pause_resume.is_paused) and allow_park %} _TOOLHEAD_PARK_PAUSE_CANCEL {park_x} {park_y} {% endif %}
	_CLIENT_RETRACT LENGTH={retract}
	TURN_OFF_HEATERS
	M106 S0
	{client.user_cancel_macro|default("")}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	
	SET_PAUSE_NEXT_LAYER ENABLE=0
	SET_PAUSE_AT_LAYER ENABLE=0 LAYER=0
	CANCEL_PRINT_BASE

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set idle_timeout = client.idle_timeout|default(0) %}
	{% set temp = printer[printer.toolhead.extruder].target if printer.toolhead.extruder != '' else 0 %}
	{% set restore = False if printer.toolhead.extruder == ''
	else True  if params.RESTORE|default(1)|int == 1 else False %}
	
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=last_extruder_temp VALUE="{{'restore': restore, 'temp': temp}}"
	
	{% if idle_timeout > 0 %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=restore_idle_timeout VALUE={printer.configfile.settings.idle_timeout.timeout}
	SET_IDLE_TIMEOUT TIMEOUT={idle_timeout}
	{% endif %}
	PAUSE_BASE
	{client.user_pause_macro|default("")}
	_TOOLHEAD_PARK_PAUSE_CANCEL {rawparams}

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set sp_move = client.speed_move|default(velocity) %}
	{% set runout_resume = True if client.runout_sensor|default("") == ""
	else True if not printer[client.runout_sensor].enabled
	else printer[client.runout_sensor].filament_detected %}
	{% set can_extrude = True if printer.toolhead.extruder == ''
	else printer[printer.toolhead.extruder].can_extrude %}
	{% set do_resume = False %}
	{% set prompt_txt = [] %}
	
	
	{% if printer.idle_timeout.state|upper == "IDLE" or idle_state %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	{% if last_extruder_temp.restore %}
	
	RESPOND TYPE=echo MSG='{"Restoring \"%s\" temperature to %3.1f\u00B0C, this may take some time" % (printer.toolhead.extruder, last_extruder_temp.temp) }'
	M109 S{last_extruder_temp.temp}
	{% set do_resume = True %}
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	{% if runout_resume %}
	{% if do_resume %}
	{% if restore_idle_timeout > 0 %} SET_IDLE_TIMEOUT TIMEOUT={restore_idle_timeout} {% endif %}
	{client.user_resume_macro|default("")}
	_CLIENT_EXTRUDE
	RESUME_BASE VELOCITY={params.VELOCITY|default(sp_move)}
	{% endif %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]}'
	{% set _d = prompt_txt.append("\"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]) %}
	{% endif %}
	
	{% if not (runout_resume and do_resume) %}
	RESPOND TYPE=command MSG="action:prompt_begin RESUME aborted !!!"
	{% for element in prompt_txt %}
	RESPOND TYPE=command MSG='{"action:prompt_text %s" % element}'
	{% endfor %}
	RESPOND TYPE=command MSG="action:prompt_footer_button Ok|RESPOND TYPE=command MSG=action:prompt_end|info"
	RESPOND TYPE=command MSG="action:prompt_show"
	{% endif %}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[filament_switch_sensor switch_sensor]
switch_pin = ^PB16
pause_on_runout = True
runout_gcode = 
insert_gcode = 

[filament_motion_sensor encoder_sensor]
switch_pin = PB15
detection_length = 3
extruder = extruder
pause_on_runout = False
runout_gcode = 

[gcode_macro PROBE_DOWN]
gcode = 
	SET_PIN PIN=probe_enable VALUE=1

[gcode_macro PROBE_UP]
gcode = 
	SET_PIN PIN=probe_enable VALUE=0

[output_pin probe_enable]
pin = PB12
value = 0

[probe]
pin = ^!PA7
deactivate_on_each_sample = False
x_offset = -16
y_offset = 45
samples = 2
samples_tolerance = 0.05
samples_tolerance_retries = 3
activate_gcode = 
	PROBE_DOWN
	G4 P500
deactivate_gcode = 
	PROBE_UP
z_offset = 0.570

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 9000
max_z_velocity = 7
max_z_accel = 100

[input_shaper]

[stepper_x]
step_pin = PC6
dir_pin = PC5
enable_pin = !PC9
microsteps = 16
rotation_distance = 32
endstop_pin = ^PD4
position_endstop = -15
position_max = 300
position_min = -15
homing_speed = 75

[tmc2130 stepper_x]
cs_pin = PC7
run_current = .75
sense_resistor = 0.120
diag1_pin = !PA4
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[stepper_y]
step_pin = PC12
dir_pin = !PC11
enable_pin = !PC14
microsteps = 16
rotation_distance = 32
endstop_pin = PD6
position_endstop = -10
position_max = 303
position_min = -10
homing_speed = 75

[tmc2130 stepper_y]
cs_pin = PC13
run_current = .75
sense_resistor = 0.120
diag1_pin = !PC15
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[stepper_z]
step_pin = PC17
dir_pin = PC16
enable_pin = !PC19
microsteps = 16
rotation_distance = 2
endstop_pin = probe:z_virtual_endstop
position_max = 265
position_min = -3
homing_speed = 5

[tmc2130 stepper_z]
cs_pin = PC18
run_current = .80
sense_resistor = 0.120
diag1_pin = PC4
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[safe_z_home]
home_xy_position = 166,105
speed = 100
z_hop = 10
z_hop_speed = 100

[extruder]
step_pin = PB10
dir_pin = !PC10
enable_pin = !PB22
microsteps = 16
rotation_distance = 7.81
nozzle_diameter = 0.400
filament_diameter = 1.75
heater_pin = PC24
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB19
min_temp = 0
max_temp = 285
min_extrude_temp = 120
max_extrude_only_distance = 140.0
pressure_advance = .0525
control = pid
pid_kp = 23.681
pid_ki = 1.152
pid_kd = 121.659

[tmc2130 extruder]
cs_pin = PC20
run_current = .75
sense_resistor = 0.120
diag1_pin = !PB23
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[heater_bed]
heater_pin = PC21
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PB20
control = pid
pid_kp = 21
pid_ki = 1.78
pid_kd = 61.93
min_temp = 0
max_temp = 130

[fan]
pin = PC23

[heater_fan nozzle_cooling_fan]
pin = PC25

[display]
lcd_type = st7920
cs_pin = EXP1_4
sclk_pin = EXP1_5
sid_pin = EXP1_3
encoder_pins = ^EXP2_3, ^EXP2_5
click_pin = ^!EXP1_2

[output_pin beeper]
pin = EXP1_1

[board_pins]
aliases = 
	
	EXP1_1=PA14, EXP1_3=PA15, EXP1_5=PA0,  EXP1_7=PA1, EXP1_9=<GND>,
	EXP1_2=PA13, EXP1_4=PA12, EXP1_6=PA16, EXP1_8=PC2, EXP1_10=<5V>,
	
	EXP2_1=PA25, EXP2_3=PB27, EXP2_5=PA3,  EXP2_7=PB25,  EXP2_9=<GND>,
	EXP2_2=PA27, EXP2_4=PA29, EXP2_6=PA26, EXP2_8=<RST>, EXP2_10=<3.3V>

[bed_mesh]
speed = 300
horizontal_move_z = 10
mesh_min = 10, 45
mesh_max = 240, 290
fade_start = 0.6
fade_end = 10.0
probe_count = 15, 15
algorithm = bicubic

[bed_mesh default]
version = 1
points = 
	0.052187, -0.014375, -0.081250, -0.137813, -0.181875
	0.022500, -0.009688, -0.045938, -0.074375, -0.095000
	-0.007500, -0.018438, -0.033750, -0.041875, -0.046875
	-0.055938, -0.047500, -0.044375, -0.030938, -0.010938
	-0.105313, -0.074375, -0.049063, -0.007500, 0.040000
x_count = 5
y_count = 5
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 240.0
min_y = 45.0
max_y = 290.0

[bed_mesh 60degree]
version = 1
points = 
	-0.137188, -0.132500, -0.130000, -0.134063, -0.134375, -0.136875, -0.135313, -0.132500, -0.135000, -0.132500, -0.125000, -0.115938, -0.106250, -0.093125, -0.075313
	-0.124688, -0.121875, -0.123750, -0.111563, -0.129063, -0.126875, -0.125625, -0.123125, -0.120625, -0.113125, -0.105000, -0.098750, -0.087500, -0.073125, -0.063750
	-0.115313, -0.114063, -0.115938, -0.116875, -0.117500, -0.114688, -0.115313, -0.113125, -0.105625, -0.102813, -0.091563, -0.084375, -0.068125, -0.045313, -0.040000
	-0.108750, -0.104375, -0.104375, -0.105313, -0.105938, -0.105938, -0.105938, -0.104688, -0.096563, -0.091563, -0.083125, -0.066875, -0.065313, -0.030000, -0.034688
	-0.103125, -0.097188, -0.098125, -0.098125, -0.099063, -0.098750, -0.100313, -0.095313, -0.090938, -0.085313, -0.075625, -0.065625, -0.051563, -0.038125, -0.015938
	-0.096875, -0.095000, -0.094375, -0.095000, -0.093750, -0.094375, -0.093438, -0.088438, -0.086250, -0.076250, -0.070625, -0.057188, -0.044375, -0.033438, -0.018750
	-0.090625, -0.087813, -0.088125, -0.087813, -0.087500, -0.091875, -0.087188, -0.084688, -0.080625, -0.075000, -0.065000, -0.054375, -0.039688, -0.031563, -0.021250
	-0.091875, -0.089375, -0.087500, -0.089063, -0.086563, -0.089375, -0.088750, -0.085000, -0.083125, -0.076250, -0.069688, -0.060000, -0.045625, -0.037188, -0.020625
	-0.088438, -0.086563, -0.088125, -0.088438, -0.089375, -0.091563, -0.090000, -0.088125, -0.082188, -0.075313, -0.069688, -0.059375, -0.048125, -0.036250, -0.025625
	-0.089688, -0.090313, -0.086875, -0.087500, -0.090938, -0.088438, -0.090625, -0.089375, -0.084375, -0.077813, -0.072188, -0.061250, -0.050313, -0.040625, -0.024688
	-0.095313, -0.094063, -0.090938, -0.091563, -0.089688, -0.092500, -0.090313, -0.089375, -0.083125, -0.075313, -0.068750, -0.058125, -0.047500, -0.036563, -0.019688
	-0.098125, -0.097188, -0.098438, -0.093438, -0.095313, -0.095000, -0.091250, -0.090000, -0.085625, -0.079375, -0.068750, -0.056250, -0.045625, -0.034375, -0.020000
	-0.110313, -0.109063, -0.105625, -0.106563, -0.105313, -0.103750, -0.100938, -0.094688, -0.089063, -0.081875, -0.071250, -0.056875, -0.044688, -0.028125, -0.012813
	-0.116250, -0.111250, -0.107188, -0.106875, -0.103750, -0.101875, -0.097500, -0.092188, -0.083750, -0.076250, -0.065000, -0.052188, -0.038438, -0.022813, -0.005938
	-0.123750, -0.116875, -0.113750, -0.111563, -0.109063, -0.106563, -0.105625, -0.097500, -0.087500, -0.077813, -0.065313, -0.047813, -0.033438, -0.018438, -0.000313
x_count = 15
y_count = 15
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 239.88
min_y = 45.0
max_y = 290.0
=======================
Extruder max_extrude_ratio=0.266081
mcu 'mcu': Starting serial connect
webhooks client 281473004710784: New connection
webhooks client 281473004710784: Client info {'program': 'Moonraker', 'version': 'v0.8.0-327-g9447494'}
Loaded MCU 'mcu' 112 commands (v0.12.0-171-g2f6e94c9 / gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.35.2-2+14+b2) 2.35.2)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_spi0=PA25,PA26,PA27 BUS_PINS_twi0=PA18,PA17 BUS_PINS_twi1=PB13,PB12 BUS_PINS_usart0=PA10,PA11,PA17 BUS_PINS_usart1=PA12,PA13,PA16 BUS_PINS_usart2=PB21,PB20,PB24 CLOCK_FREQ=84000000 MCU=sam3x8e PWM_MAX=255 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
mcu 'rpi': Starting serial connect
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
mcu 'rpi': Unable to open serial port: [Errno 11] Could not exclusively lock port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 11] Resource temporarily unavailable
MCU error during connect
Traceback (most recent call last):
  File "/home/biqu/klipper/klippy/mcu.py", line 791, in _mcu_identify
    self._serial.connect_uart(self._serialport, self._baud, rts)
  File "/home/biqu/klipper/klippy/serialhdl.py", line 182, in connect_uart
    self._error("Unable to connect")
  File "/home/biqu/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'rpi': Unable to connect

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/biqu/klipper/klippy/klippy.py", line 176, in _connect
    self.send_event("klippy:mcu_identify")
  File "/home/biqu/klipper/klippy/klippy.py", line 263, in send_event
    return [cb(*params) for cb in self.event_handlers.get(event, [])]
  File "/home/biqu/klipper/klippy/klippy.py", line 263, in <listcomp>
    return [cb(*params) for cb in self.event_handlers.get(event, [])]
  File "/home/biqu/klipper/klippy/mcu.py", line 796, in _mcu_identify
    raise error(str(e))
mcu.error: mcu 'rpi': Unable to connect
Build file /home/biqu/klipper/klippy/../.config(1560): Tue Apr 23 16:27:10 2024
========= Last MCU build config =========
CONFIG_LOW_LEVEL_OPTIONS=y
# CONFIG_MACH_AVR is not set
CONFIG_MACH_ATSAM=y
# CONFIG_MACH_ATSAMD is not set
# CONFIG_MACH_LPC176X is not set
# CONFIG_MACH_STM32 is not set
# CONFIG_MACH_HC32F460 is not set
# CONFIG_MACH_RP2040 is not set
# CONFIG_MACH_PRU is not set
# CONFIG_MACH_AR100 is not set
# CONFIG_MACH_LINUX is not set
# CONFIG_MACH_SIMU is not set
CONFIG_BOARD_DIRECTORY="atsam"
CONFIG_MCU="sam3x8e"
CONFIG_CLOCK_FREQ=84000000
CONFIG_USBSERIAL=y
CONFIG_ATSAM_SELECT=y
CONFIG_MACH_SAM3X8E=y
# CONFIG_MACH_SAM3X8C is not set
# CONFIG_MACH_SAM4S8C is not set
# CONFIG_MACH_SAM4E8E is not set
# CONFIG_MACH_SAME70Q20B is not set
CONFIG_MACH_SAM3X=y
CONFIG_FLASH_SIZE=0x80000
CONFIG_FLASH_BOOT_ADDRESS=0x0
CONFIG_RAM_START=0x20000000
CONFIG_RAM_SIZE=0x18000
CONFIG_STACK_SIZE=512
CONFIG_FLASH_APPLICATION_ADDRESS=0x80000
CONFIG_ATSAM_USB=y
# CONFIG_ATSAM_SERIAL is not set
CONFIG_USB=y
CONFIG_USB_VENDOR_ID=0x1d50
CONFIG_USB_DEVICE_ID=0x614e
CONFIG_USB_SERIAL_NUMBER_CHIPID=y
CONFIG_USB_SERIAL_NUMBER="12345"

#
# USB ids
#
# end of USB ids

CONFIG_WANT_GPIO_BITBANGING=y
CONFIG_WANT_DISPLAYS=y
CONFIG_WANT_SENSORS=y
CONFIG_WANT_LIS2DW=y
CONFIG_WANT_LDC1612=y
CONFIG_WANT_SOFTWARE_I2C=y
CONFIG_WANT_SOFTWARE_SPI=y
CONFIG_NEED_SENSOR_BULK=y
CONFIG_CANBUS_FREQUENCY=1000000
CONFIG_INITIAL_PINS=""
CONFIG_HAVE_GPIO=y
CONFIG_HAVE_GPIO_ADC=y
CONFIG_HAVE_GPIO_SPI=y
CONFIG_HAVE_GPIO_I2C=y
CONFIG_HAVE_GPIO_HARD_PWM=y
CONFIG_HAVE_STRICT_TIMING=y
CONFIG_HAVE_CHIPID=y
CONFIG_HAVE_STEPPER_BOTH_EDGE=y
CONFIG_HAVE_BOOTLOADER_REQUEST=y
CONFIG_INLINE_STEPPER_HACK=y
=======================
Build file /home/biqu/klipper/klippy/../out/klipper.dict(7778): Tue Apr 23 16:28:06 2024
Last MCU build version: v0.12.0-171-g2f6e94c9
Last MCU build tools: gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.35.2-2+14+b2) 2.35.2
Last MCU build config: ADC_MAX=4095 BUS_PINS_spi0=PA25,PA26,PA27 BUS_PINS_twi0=PA18,PA17 BUS_PINS_twi1=PB13,PB12 BUS_PINS_usart0=PA10,PA11,PA17 BUS_PINS_usart1=PA12,PA13,PA16 BUS_PINS_usart2=PB21,PB20,PB24 CLOCK_FREQ=84000000 MCU=sam3x8e PWM_MAX=255 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Build file /home/biqu/klipper/klippy/../out/klipper.elf(1068496): Tue Apr 23 16:28:23 2024
Attempting MCU 'mcu' reset command
Attempting MCU 'rpi' reset
Unhandled exception during post run
Traceback (most recent call last):
  File "/home/biqu/klippy-env/lib/python3.9/site-packages/serial/serialposix.py", line 265, in open
    self.fd = os.open(self.portstr, os.O_RDWR | os.O_NOCTTY | os.O_NONBLOCK)
OSError: [Errno 5] Input/output error: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/biqu/klipper/klippy/klippy.py", line 234, in run
    self.send_event("klippy:firmware_restart")
  File "/home/biqu/klipper/klippy/klippy.py", line 263, in send_event
    return [cb(*params) for cb in self.event_handlers.get(event, [])]
  File "/home/biqu/klipper/klippy/klippy.py", line 263, in <listcomp>
    return [cb(*params) for cb in self.event_handlers.get(event, [])]
  File "/home/biqu/klipper/klippy/mcu.py", line 953, in _firmware_restart
    self._restart_arduino()
  File "/home/biqu/klipper/klippy/mcu.py", line 913, in _restart_arduino
    serialhdl.arduino_reset(self._serialport, self._reactor)
  File "/home/biqu/klipper/klippy/serialhdl.py", line 379, in arduino_reset
    ser = serial.Serial(serialport, 2400, timeout=0, exclusive=True)
  File "/home/biqu/klippy-env/lib/python3.9/site-packages/serial/serialutil.py", line 240, in __init__
    self.open()
  File "/home/biqu/klippy-env/lib/python3.9/site-packages/serial/serialposix.py", line 268, in open
    raise SerialException(msg.errno, "could not open port {}: {}".format(self._port, msg))
serial.serialutil.SerialException: [Errno 5] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 5] Input/output error: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
Restarting printer
Start printer at Wed Apr 24 17:03:20 2024 (1713992600.5 672.0)
===== Config file =====
[mcu]
serial = /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00

[mcu rpi]
serial = /tmp/klipper_host_mcu

[adxl345]
spi_bus = spidev1.1
cs_pin = CB1:None

[resonance_tester]
accel_chip = adxl345
probe_points = 
	150,150,20

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set allow_park = client.park_at_cancel|default(false)|lower == 'true' %}
	{% set retract = client.cancel_retract|default(5.0)|abs %}
	
	{% set park_x = "" if (client.park_at_cancel_x|default(none) is none)
	else "X=" ~ client.park_at_cancel_x %}
	{% set park_y = "" if (client.park_at_cancel_y|default(none) is none)
	else "Y=" ~ client.park_at_cancel_y %}
	{% set custom_park = park_x|length > 0 or park_y|length > 0 %}
	
	
	{% if printer['gcode_macro RESUME'].restore_idle_timeout > 0 %}
	SET_IDLE_TIMEOUT TIMEOUT={printer['gcode_macro RESUME'].restore_idle_timeout}
	{% endif %}
	{% if (custom_park or not printer.pause_resume.is_paused) and allow_park %} _TOOLHEAD_PARK_PAUSE_CANCEL {park_x} {park_y} {% endif %}
	_CLIENT_RETRACT LENGTH={retract}
	TURN_OFF_HEATERS
	M106 S0
	{client.user_cancel_macro|default("")}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	
	SET_PAUSE_NEXT_LAYER ENABLE=0
	SET_PAUSE_AT_LAYER ENABLE=0 LAYER=0
	CANCEL_PRINT_BASE

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set idle_timeout = client.idle_timeout|default(0) %}
	{% set temp = printer[printer.toolhead.extruder].target if printer.toolhead.extruder != '' else 0 %}
	{% set restore = False if printer.toolhead.extruder == ''
	else True  if params.RESTORE|default(1)|int == 1 else False %}
	
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=last_extruder_temp VALUE="{{'restore': restore, 'temp': temp}}"
	
	{% if idle_timeout > 0 %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=restore_idle_timeout VALUE={printer.configfile.settings.idle_timeout.timeout}
	SET_IDLE_TIMEOUT TIMEOUT={idle_timeout}
	{% endif %}
	PAUSE_BASE
	{client.user_pause_macro|default("")}
	_TOOLHEAD_PARK_PAUSE_CANCEL {rawparams}

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set sp_move = client.speed_move|default(velocity) %}
	{% set runout_resume = True if client.runout_sensor|default("") == ""
	else True if not printer[client.runout_sensor].enabled
	else printer[client.runout_sensor].filament_detected %}
	{% set can_extrude = True if printer.toolhead.extruder == ''
	else printer[printer.toolhead.extruder].can_extrude %}
	{% set do_resume = False %}
	{% set prompt_txt = [] %}
	
	
	{% if printer.idle_timeout.state|upper == "IDLE" or idle_state %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	{% if last_extruder_temp.restore %}
	
	RESPOND TYPE=echo MSG='{"Restoring \"%s\" temperature to %3.1f\u00B0C, this may take some time" % (printer.toolhead.extruder, last_extruder_temp.temp) }'
	M109 S{last_extruder_temp.temp}
	{% set do_resume = True %}
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	{% if runout_resume %}
	{% if do_resume %}
	{% if restore_idle_timeout > 0 %} SET_IDLE_TIMEOUT TIMEOUT={restore_idle_timeout} {% endif %}
	{client.user_resume_macro|default("")}
	_CLIENT_EXTRUDE
	RESUME_BASE VELOCITY={params.VELOCITY|default(sp_move)}
	{% endif %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]}'
	{% set _d = prompt_txt.append("\"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]) %}
	{% endif %}
	
	{% if not (runout_resume and do_resume) %}
	RESPOND TYPE=command MSG="action:prompt_begin RESUME aborted !!!"
	{% for element in prompt_txt %}
	RESPOND TYPE=command MSG='{"action:prompt_text %s" % element}'
	{% endfor %}
	RESPOND TYPE=command MSG="action:prompt_footer_button Ok|RESPOND TYPE=command MSG=action:prompt_end|info"
	RESPOND TYPE=command MSG="action:prompt_show"
	{% endif %}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[filament_switch_sensor switch_sensor]
switch_pin = ^PB16
pause_on_runout = True
runout_gcode = 
insert_gcode = 

[filament_motion_sensor encoder_sensor]
switch_pin = PB15
detection_length = 3
extruder = extruder
pause_on_runout = False
runout_gcode = 

[gcode_macro PROBE_DOWN]
gcode = 
	SET_PIN PIN=probe_enable VALUE=1

[gcode_macro PROBE_UP]
gcode = 
	SET_PIN PIN=probe_enable VALUE=0

[output_pin probe_enable]
pin = PB12
value = 0

[probe]
pin = ^!PA7
deactivate_on_each_sample = False
x_offset = -16
y_offset = 45
samples = 2
samples_tolerance = 0.05
samples_tolerance_retries = 3
activate_gcode = 
	PROBE_DOWN
	G4 P500
deactivate_gcode = 
	PROBE_UP
z_offset = 0.570

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 9000
max_z_velocity = 7
max_z_accel = 100

[input_shaper]

[stepper_x]
step_pin = PC6
dir_pin = PC5
enable_pin = !PC9
microsteps = 16
rotation_distance = 32
endstop_pin = ^PD4
position_endstop = -15
position_max = 300
position_min = -15
homing_speed = 75

[tmc2130 stepper_x]
cs_pin = PC7
run_current = .75
sense_resistor = 0.120
diag1_pin = !PA4
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[stepper_y]
step_pin = PC12
dir_pin = !PC11
enable_pin = !PC14
microsteps = 16
rotation_distance = 32
endstop_pin = PD6
position_endstop = -10
position_max = 303
position_min = -10
homing_speed = 75

[tmc2130 stepper_y]
cs_pin = PC13
run_current = .75
sense_resistor = 0.120
diag1_pin = !PC15
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[stepper_z]
step_pin = PC17
dir_pin = PC16
enable_pin = !PC19
microsteps = 16
rotation_distance = 2
endstop_pin = probe:z_virtual_endstop
position_max = 265
position_min = -3
homing_speed = 5

[tmc2130 stepper_z]
cs_pin = PC18
run_current = .80
sense_resistor = 0.120
diag1_pin = PC4
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[safe_z_home]
home_xy_position = 166,105
speed = 100
z_hop = 10
z_hop_speed = 100

[extruder]
step_pin = PB10
dir_pin = !PC10
enable_pin = !PB22
microsteps = 16
rotation_distance = 7.81
nozzle_diameter = 0.400
filament_diameter = 1.75
heater_pin = PC24
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB19
min_temp = 0
max_temp = 285
min_extrude_temp = 120
max_extrude_only_distance = 140.0
pressure_advance = .0525
control = pid
pid_kp = 23.681
pid_ki = 1.152
pid_kd = 121.659

[tmc2130 extruder]
cs_pin = PC20
run_current = .75
sense_resistor = 0.120
diag1_pin = !PB23
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[heater_bed]
heater_pin = PC21
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PB20
control = pid
pid_kp = 21
pid_ki = 1.78
pid_kd = 61.93
min_temp = 0
max_temp = 130

[fan]
pin = PC23

[heater_fan nozzle_cooling_fan]
pin = PC25

[display]
lcd_type = st7920
cs_pin = EXP1_4
sclk_pin = EXP1_5
sid_pin = EXP1_3
encoder_pins = ^EXP2_3, ^EXP2_5
click_pin = ^!EXP1_2

[output_pin beeper]
pin = EXP1_1

[board_pins]
aliases = 
	
	EXP1_1=PA14, EXP1_3=PA15, EXP1_5=PA0,  EXP1_7=PA1, EXP1_9=<GND>,
	EXP1_2=PA13, EXP1_4=PA12, EXP1_6=PA16, EXP1_8=PC2, EXP1_10=<5V>,
	
	EXP2_1=PA25, EXP2_3=PB27, EXP2_5=PA3,  EXP2_7=PB25,  EXP2_9=<GND>,
	EXP2_2=PA27, EXP2_4=PA29, EXP2_6=PA26, EXP2_8=<RST>, EXP2_10=<3.3V>

[bed_mesh]
speed = 300
horizontal_move_z = 10
mesh_min = 10, 45
mesh_max = 240, 290
fade_start = 0.6
fade_end = 10.0
probe_count = 15, 15
algorithm = bicubic

[bed_mesh default]
version = 1
points = 
	0.052187, -0.014375, -0.081250, -0.137813, -0.181875
	0.022500, -0.009688, -0.045938, -0.074375, -0.095000
	-0.007500, -0.018438, -0.033750, -0.041875, -0.046875
	-0.055938, -0.047500, -0.044375, -0.030938, -0.010938
	-0.105313, -0.074375, -0.049063, -0.007500, 0.040000
x_count = 5
y_count = 5
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 240.0
min_y = 45.0
max_y = 290.0

[bed_mesh 60degree]
version = 1
points = 
	-0.137188, -0.132500, -0.130000, -0.134063, -0.134375, -0.136875, -0.135313, -0.132500, -0.135000, -0.132500, -0.125000, -0.115938, -0.106250, -0.093125, -0.075313
	-0.124688, -0.121875, -0.123750, -0.111563, -0.129063, -0.126875, -0.125625, -0.123125, -0.120625, -0.113125, -0.105000, -0.098750, -0.087500, -0.073125, -0.063750
	-0.115313, -0.114063, -0.115938, -0.116875, -0.117500, -0.114688, -0.115313, -0.113125, -0.105625, -0.102813, -0.091563, -0.084375, -0.068125, -0.045313, -0.040000
	-0.108750, -0.104375, -0.104375, -0.105313, -0.105938, -0.105938, -0.105938, -0.104688, -0.096563, -0.091563, -0.083125, -0.066875, -0.065313, -0.030000, -0.034688
	-0.103125, -0.097188, -0.098125, -0.098125, -0.099063, -0.098750, -0.100313, -0.095313, -0.090938, -0.085313, -0.075625, -0.065625, -0.051563, -0.038125, -0.015938
	-0.096875, -0.095000, -0.094375, -0.095000, -0.093750, -0.094375, -0.093438, -0.088438, -0.086250, -0.076250, -0.070625, -0.057188, -0.044375, -0.033438, -0.018750
	-0.090625, -0.087813, -0.088125, -0.087813, -0.087500, -0.091875, -0.087188, -0.084688, -0.080625, -0.075000, -0.065000, -0.054375, -0.039688, -0.031563, -0.021250
	-0.091875, -0.089375, -0.087500, -0.089063, -0.086563, -0.089375, -0.088750, -0.085000, -0.083125, -0.076250, -0.069688, -0.060000, -0.045625, -0.037188, -0.020625
	-0.088438, -0.086563, -0.088125, -0.088438, -0.089375, -0.091563, -0.090000, -0.088125, -0.082188, -0.075313, -0.069688, -0.059375, -0.048125, -0.036250, -0.025625
	-0.089688, -0.090313, -0.086875, -0.087500, -0.090938, -0.088438, -0.090625, -0.089375, -0.084375, -0.077813, -0.072188, -0.061250, -0.050313, -0.040625, -0.024688
	-0.095313, -0.094063, -0.090938, -0.091563, -0.089688, -0.092500, -0.090313, -0.089375, -0.083125, -0.075313, -0.068750, -0.058125, -0.047500, -0.036563, -0.019688
	-0.098125, -0.097188, -0.098438, -0.093438, -0.095313, -0.095000, -0.091250, -0.090000, -0.085625, -0.079375, -0.068750, -0.056250, -0.045625, -0.034375, -0.020000
	-0.110313, -0.109063, -0.105625, -0.106563, -0.105313, -0.103750, -0.100938, -0.094688, -0.089063, -0.081875, -0.071250, -0.056875, -0.044688, -0.028125, -0.012813
	-0.116250, -0.111250, -0.107188, -0.106875, -0.103750, -0.101875, -0.097500, -0.092188, -0.083750, -0.076250, -0.065000, -0.052188, -0.038438, -0.022813, -0.005938
	-0.123750, -0.116875, -0.113750, -0.111563, -0.109063, -0.106563, -0.105625, -0.097500, -0.087500, -0.077813, -0.065313, -0.047813, -0.033438, -0.018438, -0.000313
x_count = 15
y_count = 15
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 239.88
min_y = 45.0
max_y = 290.0
=======================
Config error
Traceback (most recent call last):
  File "/home/biqu/klipper/klippy/klippy.py", line 175, in _connect
    self._read_config()
  File "/home/biqu/klipper/klippy/klippy.py", line 141, in _read_config
    self.load_object(config, section_config.get_name(), None)
  File "/home/biqu/klipper/klippy/klippy.py", line 130, in load_object
    self.objects[section] = init_func(config.getsection(section))
  File "/home/biqu/klipper/klippy/extras/adxl345.py", line 302, in load_config
    return ADXL345(config)
  File "/home/biqu/klipper/klippy/extras/adxl345.py", line 199, in __init__
    self.spi = bus.MCU_SPI_from_config(config, 3, default_speed=5000000)
  File "/home/biqu/klipper/klippy/extras/bus.py", line 113, in MCU_SPI_from_config
    cs_pin_params = ppins.lookup_pin(cs_pin, share_type=share_type)
  File "/home/biqu/klipper/klippy/pins.py", line 98, in lookup_pin
    pin_params = self.parse_pin(pin_desc, can_invert, can_pullup)
  File "/home/biqu/klipper/klippy/pins.py", line 83, in parse_pin
    raise error("Unknown pin chip name '%s'" % (chip_name,))
pins.error: Unknown pin chip name 'CB1'
webhooks client 281473013228736: New connection
webhooks client 281473013228736: Client info {'program': 'Moonraker', 'version': 'v0.8.0-327-g9447494'}
Attempting MCU 'mcu' reset
Unable to issue reset command on MCU 'rpi'
webhooks client 281473013228736: Disconnected
Restarting printer
Start printer at Wed Apr 24 17:04:51 2024 (1713992691.3 762.8)
===== Config file =====
[mcu]
serial = /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00

[adxl345]
cs_pin = CB1:None
spi_bus = spidev1.1
axes_map = x,y,x

[resonance_tester]
accel_chip = adxl345
probe_points = 
	150,150,20

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set allow_park = client.park_at_cancel|default(false)|lower == 'true' %}
	{% set retract = client.cancel_retract|default(5.0)|abs %}
	
	{% set park_x = "" if (client.park_at_cancel_x|default(none) is none)
	else "X=" ~ client.park_at_cancel_x %}
	{% set park_y = "" if (client.park_at_cancel_y|default(none) is none)
	else "Y=" ~ client.park_at_cancel_y %}
	{% set custom_park = park_x|length > 0 or park_y|length > 0 %}
	
	
	{% if printer['gcode_macro RESUME'].restore_idle_timeout > 0 %}
	SET_IDLE_TIMEOUT TIMEOUT={printer['gcode_macro RESUME'].restore_idle_timeout}
	{% endif %}
	{% if (custom_park or not printer.pause_resume.is_paused) and allow_park %} _TOOLHEAD_PARK_PAUSE_CANCEL {park_x} {park_y} {% endif %}
	_CLIENT_RETRACT LENGTH={retract}
	TURN_OFF_HEATERS
	M106 S0
	{client.user_cancel_macro|default("")}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	
	SET_PAUSE_NEXT_LAYER ENABLE=0
	SET_PAUSE_AT_LAYER ENABLE=0 LAYER=0
	CANCEL_PRINT_BASE

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set idle_timeout = client.idle_timeout|default(0) %}
	{% set temp = printer[printer.toolhead.extruder].target if printer.toolhead.extruder != '' else 0 %}
	{% set restore = False if printer.toolhead.extruder == ''
	else True  if params.RESTORE|default(1)|int == 1 else False %}
	
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=last_extruder_temp VALUE="{{'restore': restore, 'temp': temp}}"
	
	{% if idle_timeout > 0 %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=restore_idle_timeout VALUE={printer.configfile.settings.idle_timeout.timeout}
	SET_IDLE_TIMEOUT TIMEOUT={idle_timeout}
	{% endif %}
	PAUSE_BASE
	{client.user_pause_macro|default("")}
	_TOOLHEAD_PARK_PAUSE_CANCEL {rawparams}

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set sp_move = client.speed_move|default(velocity) %}
	{% set runout_resume = True if client.runout_sensor|default("") == ""
	else True if not printer[client.runout_sensor].enabled
	else printer[client.runout_sensor].filament_detected %}
	{% set can_extrude = True if printer.toolhead.extruder == ''
	else printer[printer.toolhead.extruder].can_extrude %}
	{% set do_resume = False %}
	{% set prompt_txt = [] %}
	
	
	{% if printer.idle_timeout.state|upper == "IDLE" or idle_state %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	{% if last_extruder_temp.restore %}
	
	RESPOND TYPE=echo MSG='{"Restoring \"%s\" temperature to %3.1f\u00B0C, this may take some time" % (printer.toolhead.extruder, last_extruder_temp.temp) }'
	M109 S{last_extruder_temp.temp}
	{% set do_resume = True %}
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	{% if runout_resume %}
	{% if do_resume %}
	{% if restore_idle_timeout > 0 %} SET_IDLE_TIMEOUT TIMEOUT={restore_idle_timeout} {% endif %}
	{client.user_resume_macro|default("")}
	_CLIENT_EXTRUDE
	RESUME_BASE VELOCITY={params.VELOCITY|default(sp_move)}
	{% endif %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]}'
	{% set _d = prompt_txt.append("\"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]) %}
	{% endif %}
	
	{% if not (runout_resume and do_resume) %}
	RESPOND TYPE=command MSG="action:prompt_begin RESUME aborted !!!"
	{% for element in prompt_txt %}
	RESPOND TYPE=command MSG='{"action:prompt_text %s" % element}'
	{% endfor %}
	RESPOND TYPE=command MSG="action:prompt_footer_button Ok|RESPOND TYPE=command MSG=action:prompt_end|info"
	RESPOND TYPE=command MSG="action:prompt_show"
	{% endif %}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[filament_switch_sensor switch_sensor]
switch_pin = ^PB16
pause_on_runout = True
runout_gcode = 
insert_gcode = 

[filament_motion_sensor encoder_sensor]
switch_pin = PB15
detection_length = 3
extruder = extruder
pause_on_runout = False
runout_gcode = 

[gcode_macro PROBE_DOWN]
gcode = 
	SET_PIN PIN=probe_enable VALUE=1

[gcode_macro PROBE_UP]
gcode = 
	SET_PIN PIN=probe_enable VALUE=0

[output_pin probe_enable]
pin = PB12
value = 0

[probe]
pin = ^!PA7
deactivate_on_each_sample = False
x_offset = -16
y_offset = 45
samples = 2
samples_tolerance = 0.05
samples_tolerance_retries = 3
activate_gcode = 
	PROBE_DOWN
	G4 P500
deactivate_gcode = 
	PROBE_UP
z_offset = 0.570

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 9000
max_z_velocity = 7
max_z_accel = 100

[input_shaper]

[stepper_x]
step_pin = PC6
dir_pin = PC5
enable_pin = !PC9
microsteps = 16
rotation_distance = 32
endstop_pin = ^PD4
position_endstop = -15
position_max = 300
position_min = -15
homing_speed = 75

[tmc2130 stepper_x]
cs_pin = PC7
run_current = .75
sense_resistor = 0.120
diag1_pin = !PA4
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[stepper_y]
step_pin = PC12
dir_pin = !PC11
enable_pin = !PC14
microsteps = 16
rotation_distance = 32
endstop_pin = PD6
position_endstop = -10
position_max = 303
position_min = -10
homing_speed = 75

[tmc2130 stepper_y]
cs_pin = PC13
run_current = .75
sense_resistor = 0.120
diag1_pin = !PC15
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[stepper_z]
step_pin = PC17
dir_pin = PC16
enable_pin = !PC19
microsteps = 16
rotation_distance = 2
endstop_pin = probe:z_virtual_endstop
position_max = 265
position_min = -3
homing_speed = 5

[tmc2130 stepper_z]
cs_pin = PC18
run_current = .80
sense_resistor = 0.120
diag1_pin = PC4
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[safe_z_home]
home_xy_position = 166,105
speed = 100
z_hop = 10
z_hop_speed = 100

[extruder]
step_pin = PB10
dir_pin = !PC10
enable_pin = !PB22
microsteps = 16
rotation_distance = 7.81
nozzle_diameter = 0.400
filament_diameter = 1.75
heater_pin = PC24
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB19
min_temp = 0
max_temp = 285
min_extrude_temp = 120
max_extrude_only_distance = 140.0
pressure_advance = .0525
control = pid
pid_kp = 23.681
pid_ki = 1.152
pid_kd = 121.659

[tmc2130 extruder]
cs_pin = PC20
run_current = .75
sense_resistor = 0.120
diag1_pin = !PB23
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[heater_bed]
heater_pin = PC21
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PB20
control = pid
pid_kp = 21
pid_ki = 1.78
pid_kd = 61.93
min_temp = 0
max_temp = 130

[fan]
pin = PC23

[heater_fan nozzle_cooling_fan]
pin = PC25

[display]
lcd_type = st7920
cs_pin = EXP1_4
sclk_pin = EXP1_5
sid_pin = EXP1_3
encoder_pins = ^EXP2_3, ^EXP2_5
click_pin = ^!EXP1_2

[output_pin beeper]
pin = EXP1_1

[board_pins]
aliases = 
	
	EXP1_1=PA14, EXP1_3=PA15, EXP1_5=PA0,  EXP1_7=PA1, EXP1_9=<GND>,
	EXP1_2=PA13, EXP1_4=PA12, EXP1_6=PA16, EXP1_8=PC2, EXP1_10=<5V>,
	
	EXP2_1=PA25, EXP2_3=PB27, EXP2_5=PA3,  EXP2_7=PB25,  EXP2_9=<GND>,
	EXP2_2=PA27, EXP2_4=PA29, EXP2_6=PA26, EXP2_8=<RST>, EXP2_10=<3.3V>

[bed_mesh]
speed = 300
horizontal_move_z = 10
mesh_min = 10, 45
mesh_max = 240, 290
fade_start = 0.6
fade_end = 10.0
probe_count = 15, 15
algorithm = bicubic

[bed_mesh default]
version = 1
points = 
	0.052187, -0.014375, -0.081250, -0.137813, -0.181875
	0.022500, -0.009688, -0.045938, -0.074375, -0.095000
	-0.007500, -0.018438, -0.033750, -0.041875, -0.046875
	-0.055938, -0.047500, -0.044375, -0.030938, -0.010938
	-0.105313, -0.074375, -0.049063, -0.007500, 0.040000
x_count = 5
y_count = 5
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 240.0
min_y = 45.0
max_y = 290.0

[bed_mesh 60degree]
version = 1
points = 
	-0.137188, -0.132500, -0.130000, -0.134063, -0.134375, -0.136875, -0.135313, -0.132500, -0.135000, -0.132500, -0.125000, -0.115938, -0.106250, -0.093125, -0.075313
	-0.124688, -0.121875, -0.123750, -0.111563, -0.129063, -0.126875, -0.125625, -0.123125, -0.120625, -0.113125, -0.105000, -0.098750, -0.087500, -0.073125, -0.063750
	-0.115313, -0.114063, -0.115938, -0.116875, -0.117500, -0.114688, -0.115313, -0.113125, -0.105625, -0.102813, -0.091563, -0.084375, -0.068125, -0.045313, -0.040000
	-0.108750, -0.104375, -0.104375, -0.105313, -0.105938, -0.105938, -0.105938, -0.104688, -0.096563, -0.091563, -0.083125, -0.066875, -0.065313, -0.030000, -0.034688
	-0.103125, -0.097188, -0.098125, -0.098125, -0.099063, -0.098750, -0.100313, -0.095313, -0.090938, -0.085313, -0.075625, -0.065625, -0.051563, -0.038125, -0.015938
	-0.096875, -0.095000, -0.094375, -0.095000, -0.093750, -0.094375, -0.093438, -0.088438, -0.086250, -0.076250, -0.070625, -0.057188, -0.044375, -0.033438, -0.018750
	-0.090625, -0.087813, -0.088125, -0.087813, -0.087500, -0.091875, -0.087188, -0.084688, -0.080625, -0.075000, -0.065000, -0.054375, -0.039688, -0.031563, -0.021250
	-0.091875, -0.089375, -0.087500, -0.089063, -0.086563, -0.089375, -0.088750, -0.085000, -0.083125, -0.076250, -0.069688, -0.060000, -0.045625, -0.037188, -0.020625
	-0.088438, -0.086563, -0.088125, -0.088438, -0.089375, -0.091563, -0.090000, -0.088125, -0.082188, -0.075313, -0.069688, -0.059375, -0.048125, -0.036250, -0.025625
	-0.089688, -0.090313, -0.086875, -0.087500, -0.090938, -0.088438, -0.090625, -0.089375, -0.084375, -0.077813, -0.072188, -0.061250, -0.050313, -0.040625, -0.024688
	-0.095313, -0.094063, -0.090938, -0.091563, -0.089688, -0.092500, -0.090313, -0.089375, -0.083125, -0.075313, -0.068750, -0.058125, -0.047500, -0.036563, -0.019688
	-0.098125, -0.097188, -0.098438, -0.093438, -0.095313, -0.095000, -0.091250, -0.090000, -0.085625, -0.079375, -0.068750, -0.056250, -0.045625, -0.034375, -0.020000
	-0.110313, -0.109063, -0.105625, -0.106563, -0.105313, -0.103750, -0.100938, -0.094688, -0.089063, -0.081875, -0.071250, -0.056875, -0.044688, -0.028125, -0.012813
	-0.116250, -0.111250, -0.107188, -0.106875, -0.103750, -0.101875, -0.097500, -0.092188, -0.083750, -0.076250, -0.065000, -0.052188, -0.038438, -0.022813, -0.005938
	-0.123750, -0.116875, -0.113750, -0.111563, -0.109063, -0.106563, -0.105625, -0.097500, -0.087500, -0.077813, -0.065313, -0.047813, -0.033438, -0.018438, -0.000313
x_count = 15
y_count = 15
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 239.88
min_y = 45.0
max_y = 290.0
=======================
Config error
Traceback (most recent call last):
  File "/home/biqu/klipper/klippy/klippy.py", line 175, in _connect
    self._read_config()
  File "/home/biqu/klipper/klippy/klippy.py", line 141, in _read_config
    self.load_object(config, section_config.get_name(), None)
  File "/home/biqu/klipper/klippy/klippy.py", line 130, in load_object
    self.objects[section] = init_func(config.getsection(section))
  File "/home/biqu/klipper/klippy/extras/adxl345.py", line 302, in load_config
    return ADXL345(config)
  File "/home/biqu/klipper/klippy/extras/adxl345.py", line 199, in __init__
    self.spi = bus.MCU_SPI_from_config(config, 3, default_speed=5000000)
  File "/home/biqu/klipper/klippy/extras/bus.py", line 113, in MCU_SPI_from_config
    cs_pin_params = ppins.lookup_pin(cs_pin, share_type=share_type)
  File "/home/biqu/klipper/klippy/pins.py", line 98, in lookup_pin
    pin_params = self.parse_pin(pin_desc, can_invert, can_pullup)
  File "/home/biqu/klipper/klippy/pins.py", line 83, in parse_pin
    raise error("Unknown pin chip name '%s'" % (chip_name,))
pins.error: Unknown pin chip name 'CB1'
webhooks client 281473006552208: New connection
webhooks client 281473006552208: Client info {'program': 'Moonraker', 'version': 'v0.8.0-327-g9447494'}
Attempting MCU 'mcu' reset
webhooks client 281473006552208: Disconnected
Restarting printer
Start printer at Wed Apr 24 17:06:01 2024 (1713992761.2 832.8)
===== Config file =====
[mcu]
serial = /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set allow_park = client.park_at_cancel|default(false)|lower == 'true' %}
	{% set retract = client.cancel_retract|default(5.0)|abs %}
	
	{% set park_x = "" if (client.park_at_cancel_x|default(none) is none)
	else "X=" ~ client.park_at_cancel_x %}
	{% set park_y = "" if (client.park_at_cancel_y|default(none) is none)
	else "Y=" ~ client.park_at_cancel_y %}
	{% set custom_park = park_x|length > 0 or park_y|length > 0 %}
	
	
	{% if printer['gcode_macro RESUME'].restore_idle_timeout > 0 %}
	SET_IDLE_TIMEOUT TIMEOUT={printer['gcode_macro RESUME'].restore_idle_timeout}
	{% endif %}
	{% if (custom_park or not printer.pause_resume.is_paused) and allow_park %} _TOOLHEAD_PARK_PAUSE_CANCEL {park_x} {park_y} {% endif %}
	_CLIENT_RETRACT LENGTH={retract}
	TURN_OFF_HEATERS
	M106 S0
	{client.user_cancel_macro|default("")}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	
	SET_PAUSE_NEXT_LAYER ENABLE=0
	SET_PAUSE_AT_LAYER ENABLE=0 LAYER=0
	CANCEL_PRINT_BASE

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set idle_timeout = client.idle_timeout|default(0) %}
	{% set temp = printer[printer.toolhead.extruder].target if printer.toolhead.extruder != '' else 0 %}
	{% set restore = False if printer.toolhead.extruder == ''
	else True  if params.RESTORE|default(1)|int == 1 else False %}
	
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=last_extruder_temp VALUE="{{'restore': restore, 'temp': temp}}"
	
	{% if idle_timeout > 0 %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=restore_idle_timeout VALUE={printer.configfile.settings.idle_timeout.timeout}
	SET_IDLE_TIMEOUT TIMEOUT={idle_timeout}
	{% endif %}
	PAUSE_BASE
	{client.user_pause_macro|default("")}
	_TOOLHEAD_PARK_PAUSE_CANCEL {rawparams}

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set sp_move = client.speed_move|default(velocity) %}
	{% set runout_resume = True if client.runout_sensor|default("") == ""
	else True if not printer[client.runout_sensor].enabled
	else printer[client.runout_sensor].filament_detected %}
	{% set can_extrude = True if printer.toolhead.extruder == ''
	else printer[printer.toolhead.extruder].can_extrude %}
	{% set do_resume = False %}
	{% set prompt_txt = [] %}
	
	
	{% if printer.idle_timeout.state|upper == "IDLE" or idle_state %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	{% if last_extruder_temp.restore %}
	
	RESPOND TYPE=echo MSG='{"Restoring \"%s\" temperature to %3.1f\u00B0C, this may take some time" % (printer.toolhead.extruder, last_extruder_temp.temp) }'
	M109 S{last_extruder_temp.temp}
	{% set do_resume = True %}
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	{% if runout_resume %}
	{% if do_resume %}
	{% if restore_idle_timeout > 0 %} SET_IDLE_TIMEOUT TIMEOUT={restore_idle_timeout} {% endif %}
	{client.user_resume_macro|default("")}
	_CLIENT_EXTRUDE
	RESUME_BASE VELOCITY={params.VELOCITY|default(sp_move)}
	{% endif %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]}'
	{% set _d = prompt_txt.append("\"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]) %}
	{% endif %}
	
	{% if not (runout_resume and do_resume) %}
	RESPOND TYPE=command MSG="action:prompt_begin RESUME aborted !!!"
	{% for element in prompt_txt %}
	RESPOND TYPE=command MSG='{"action:prompt_text %s" % element}'
	{% endfor %}
	RESPOND TYPE=command MSG="action:prompt_footer_button Ok|RESPOND TYPE=command MSG=action:prompt_end|info"
	RESPOND TYPE=command MSG="action:prompt_show"
	{% endif %}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[filament_switch_sensor switch_sensor]
switch_pin = ^PB16
pause_on_runout = True
runout_gcode = 
insert_gcode = 

[filament_motion_sensor encoder_sensor]
switch_pin = PB15
detection_length = 3
extruder = extruder
pause_on_runout = False
runout_gcode = 

[gcode_macro PROBE_DOWN]
gcode = 
	SET_PIN PIN=probe_enable VALUE=1

[gcode_macro PROBE_UP]
gcode = 
	SET_PIN PIN=probe_enable VALUE=0

[output_pin probe_enable]
pin = PB12
value = 0

[probe]
pin = ^!PA7
deactivate_on_each_sample = False
x_offset = -16
y_offset = 45
samples = 2
samples_tolerance = 0.05
samples_tolerance_retries = 3
activate_gcode = 
	PROBE_DOWN
	G4 P500
deactivate_gcode = 
	PROBE_UP
z_offset = 0.570

[adxl345]
cs_pin = CB1:None
spi_bus = spidev1.1
axes_map = x,y,x

[resonance_tester]
accel_chip = adxl345
probe_points = 
	150,150,20

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 9000
max_z_velocity = 7
max_z_accel = 100

[input_shaper]

[stepper_x]
step_pin = PC6
dir_pin = PC5
enable_pin = !PC9
microsteps = 16
rotation_distance = 32
endstop_pin = ^PD4
position_endstop = -15
position_max = 300
position_min = -15
homing_speed = 75

[tmc2130 stepper_x]
cs_pin = PC7
run_current = .75
sense_resistor = 0.120
diag1_pin = !PA4
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[stepper_y]
step_pin = PC12
dir_pin = !PC11
enable_pin = !PC14
microsteps = 16
rotation_distance = 32
endstop_pin = PD6
position_endstop = -10
position_max = 303
position_min = -10
homing_speed = 75

[tmc2130 stepper_y]
cs_pin = PC13
run_current = .75
sense_resistor = 0.120
diag1_pin = !PC15
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[stepper_z]
step_pin = PC17
dir_pin = PC16
enable_pin = !PC19
microsteps = 16
rotation_distance = 2
endstop_pin = probe:z_virtual_endstop
position_max = 265
position_min = -3
homing_speed = 5

[tmc2130 stepper_z]
cs_pin = PC18
run_current = .80
sense_resistor = 0.120
diag1_pin = PC4
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[safe_z_home]
home_xy_position = 166,105
speed = 100
z_hop = 10
z_hop_speed = 100

[extruder]
step_pin = PB10
dir_pin = !PC10
enable_pin = !PB22
microsteps = 16
rotation_distance = 7.81
nozzle_diameter = 0.400
filament_diameter = 1.75
heater_pin = PC24
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB19
min_temp = 0
max_temp = 285
min_extrude_temp = 120
max_extrude_only_distance = 140.0
pressure_advance = .0525
control = pid
pid_kp = 23.681
pid_ki = 1.152
pid_kd = 121.659

[tmc2130 extruder]
cs_pin = PC20
run_current = .75
sense_resistor = 0.120
diag1_pin = !PB23
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[heater_bed]
heater_pin = PC21
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PB20
control = pid
pid_kp = 21
pid_ki = 1.78
pid_kd = 61.93
min_temp = 0
max_temp = 130

[fan]
pin = PC23

[heater_fan nozzle_cooling_fan]
pin = PC25

[display]
lcd_type = st7920
cs_pin = EXP1_4
sclk_pin = EXP1_5
sid_pin = EXP1_3
encoder_pins = ^EXP2_3, ^EXP2_5
click_pin = ^!EXP1_2

[output_pin beeper]
pin = EXP1_1

[board_pins]
aliases = 
	
	EXP1_1=PA14, EXP1_3=PA15, EXP1_5=PA0,  EXP1_7=PA1, EXP1_9=<GND>,
	EXP1_2=PA13, EXP1_4=PA12, EXP1_6=PA16, EXP1_8=PC2, EXP1_10=<5V>,
	
	EXP2_1=PA25, EXP2_3=PB27, EXP2_5=PA3,  EXP2_7=PB25,  EXP2_9=<GND>,
	EXP2_2=PA27, EXP2_4=PA29, EXP2_6=PA26, EXP2_8=<RST>, EXP2_10=<3.3V>

[bed_mesh]
speed = 300
horizontal_move_z = 10
mesh_min = 10, 45
mesh_max = 240, 290
fade_start = 0.6
fade_end = 10.0
probe_count = 15, 15
algorithm = bicubic

[bed_mesh default]
version = 1
points = 
	0.052187, -0.014375, -0.081250, -0.137813, -0.181875
	0.022500, -0.009688, -0.045938, -0.074375, -0.095000
	-0.007500, -0.018438, -0.033750, -0.041875, -0.046875
	-0.055938, -0.047500, -0.044375, -0.030938, -0.010938
	-0.105313, -0.074375, -0.049063, -0.007500, 0.040000
x_count = 5
y_count = 5
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 240.0
min_y = 45.0
max_y = 290.0

[bed_mesh 60degree]
version = 1
points = 
	-0.137188, -0.132500, -0.130000, -0.134063, -0.134375, -0.136875, -0.135313, -0.132500, -0.135000, -0.132500, -0.125000, -0.115938, -0.106250, -0.093125, -0.075313
	-0.124688, -0.121875, -0.123750, -0.111563, -0.129063, -0.126875, -0.125625, -0.123125, -0.120625, -0.113125, -0.105000, -0.098750, -0.087500, -0.073125, -0.063750
	-0.115313, -0.114063, -0.115938, -0.116875, -0.117500, -0.114688, -0.115313, -0.113125, -0.105625, -0.102813, -0.091563, -0.084375, -0.068125, -0.045313, -0.040000
	-0.108750, -0.104375, -0.104375, -0.105313, -0.105938, -0.105938, -0.105938, -0.104688, -0.096563, -0.091563, -0.083125, -0.066875, -0.065313, -0.030000, -0.034688
	-0.103125, -0.097188, -0.098125, -0.098125, -0.099063, -0.098750, -0.100313, -0.095313, -0.090938, -0.085313, -0.075625, -0.065625, -0.051563, -0.038125, -0.015938
	-0.096875, -0.095000, -0.094375, -0.095000, -0.093750, -0.094375, -0.093438, -0.088438, -0.086250, -0.076250, -0.070625, -0.057188, -0.044375, -0.033438, -0.018750
	-0.090625, -0.087813, -0.088125, -0.087813, -0.087500, -0.091875, -0.087188, -0.084688, -0.080625, -0.075000, -0.065000, -0.054375, -0.039688, -0.031563, -0.021250
	-0.091875, -0.089375, -0.087500, -0.089063, -0.086563, -0.089375, -0.088750, -0.085000, -0.083125, -0.076250, -0.069688, -0.060000, -0.045625, -0.037188, -0.020625
	-0.088438, -0.086563, -0.088125, -0.088438, -0.089375, -0.091563, -0.090000, -0.088125, -0.082188, -0.075313, -0.069688, -0.059375, -0.048125, -0.036250, -0.025625
	-0.089688, -0.090313, -0.086875, -0.087500, -0.090938, -0.088438, -0.090625, -0.089375, -0.084375, -0.077813, -0.072188, -0.061250, -0.050313, -0.040625, -0.024688
	-0.095313, -0.094063, -0.090938, -0.091563, -0.089688, -0.092500, -0.090313, -0.089375, -0.083125, -0.075313, -0.068750, -0.058125, -0.047500, -0.036563, -0.019688
	-0.098125, -0.097188, -0.098438, -0.093438, -0.095313, -0.095000, -0.091250, -0.090000, -0.085625, -0.079375, -0.068750, -0.056250, -0.045625, -0.034375, -0.020000
	-0.110313, -0.109063, -0.105625, -0.106563, -0.105313, -0.103750, -0.100938, -0.094688, -0.089063, -0.081875, -0.071250, -0.056875, -0.044688, -0.028125, -0.012813
	-0.116250, -0.111250, -0.107188, -0.106875, -0.103750, -0.101875, -0.097500, -0.092188, -0.083750, -0.076250, -0.065000, -0.052188, -0.038438, -0.022813, -0.005938
	-0.123750, -0.116875, -0.113750, -0.111563, -0.109063, -0.106563, -0.105625, -0.097500, -0.087500, -0.077813, -0.065313, -0.047813, -0.033438, -0.018438, -0.000313
x_count = 15
y_count = 15
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 239.88
min_y = 45.0
max_y = 290.0
=======================
Config error
Traceback (most recent call last):
  File "/home/biqu/klipper/klippy/klippy.py", line 175, in _connect
    self._read_config()
  File "/home/biqu/klipper/klippy/klippy.py", line 141, in _read_config
    self.load_object(config, section_config.get_name(), None)
  File "/home/biqu/klipper/klippy/klippy.py", line 130, in load_object
    self.objects[section] = init_func(config.getsection(section))
  File "/home/biqu/klipper/klippy/extras/adxl345.py", line 302, in load_config
    return ADXL345(config)
  File "/home/biqu/klipper/klippy/extras/adxl345.py", line 199, in __init__
    self.spi = bus.MCU_SPI_from_config(config, 3, default_speed=5000000)
  File "/home/biqu/klipper/klippy/extras/bus.py", line 113, in MCU_SPI_from_config
    cs_pin_params = ppins.lookup_pin(cs_pin, share_type=share_type)
  File "/home/biqu/klipper/klippy/pins.py", line 98, in lookup_pin
    pin_params = self.parse_pin(pin_desc, can_invert, can_pullup)
  File "/home/biqu/klipper/klippy/pins.py", line 83, in parse_pin
    raise error("Unknown pin chip name '%s'" % (chip_name,))
pins.error: Unknown pin chip name 'CB1'
webhooks client 281473004056528: New connection
webhooks client 281473004056528: Client info {'program': 'Moonraker', 'version': 'v0.8.0-327-g9447494'}
Attempting MCU 'mcu' reset
webhooks client 281473004056528: Disconnected
Restarting printer
Start printer at Wed Apr 24 17:06:26 2024 (1713992786.7 858.3)
===== Config file =====
[mcu]
serial = /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set allow_park = client.park_at_cancel|default(false)|lower == 'true' %}
	{% set retract = client.cancel_retract|default(5.0)|abs %}
	
	{% set park_x = "" if (client.park_at_cancel_x|default(none) is none)
	else "X=" ~ client.park_at_cancel_x %}
	{% set park_y = "" if (client.park_at_cancel_y|default(none) is none)
	else "Y=" ~ client.park_at_cancel_y %}
	{% set custom_park = park_x|length > 0 or park_y|length > 0 %}
	
	
	{% if printer['gcode_macro RESUME'].restore_idle_timeout > 0 %}
	SET_IDLE_TIMEOUT TIMEOUT={printer['gcode_macro RESUME'].restore_idle_timeout}
	{% endif %}
	{% if (custom_park or not printer.pause_resume.is_paused) and allow_park %} _TOOLHEAD_PARK_PAUSE_CANCEL {park_x} {park_y} {% endif %}
	_CLIENT_RETRACT LENGTH={retract}
	TURN_OFF_HEATERS
	M106 S0
	{client.user_cancel_macro|default("")}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	
	SET_PAUSE_NEXT_LAYER ENABLE=0
	SET_PAUSE_AT_LAYER ENABLE=0 LAYER=0
	CANCEL_PRINT_BASE

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set idle_timeout = client.idle_timeout|default(0) %}
	{% set temp = printer[printer.toolhead.extruder].target if printer.toolhead.extruder != '' else 0 %}
	{% set restore = False if printer.toolhead.extruder == ''
	else True  if params.RESTORE|default(1)|int == 1 else False %}
	
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=last_extruder_temp VALUE="{{'restore': restore, 'temp': temp}}"
	
	{% if idle_timeout > 0 %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=restore_idle_timeout VALUE={printer.configfile.settings.idle_timeout.timeout}
	SET_IDLE_TIMEOUT TIMEOUT={idle_timeout}
	{% endif %}
	PAUSE_BASE
	{client.user_pause_macro|default("")}
	_TOOLHEAD_PARK_PAUSE_CANCEL {rawparams}

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set sp_move = client.speed_move|default(velocity) %}
	{% set runout_resume = True if client.runout_sensor|default("") == ""
	else True if not printer[client.runout_sensor].enabled
	else printer[client.runout_sensor].filament_detected %}
	{% set can_extrude = True if printer.toolhead.extruder == ''
	else printer[printer.toolhead.extruder].can_extrude %}
	{% set do_resume = False %}
	{% set prompt_txt = [] %}
	
	
	{% if printer.idle_timeout.state|upper == "IDLE" or idle_state %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	{% if last_extruder_temp.restore %}
	
	RESPOND TYPE=echo MSG='{"Restoring \"%s\" temperature to %3.1f\u00B0C, this may take some time" % (printer.toolhead.extruder, last_extruder_temp.temp) }'
	M109 S{last_extruder_temp.temp}
	{% set do_resume = True %}
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	{% if runout_resume %}
	{% if do_resume %}
	{% if restore_idle_timeout > 0 %} SET_IDLE_TIMEOUT TIMEOUT={restore_idle_timeout} {% endif %}
	{client.user_resume_macro|default("")}
	_CLIENT_EXTRUDE
	RESUME_BASE VELOCITY={params.VELOCITY|default(sp_move)}
	{% endif %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]}'
	{% set _d = prompt_txt.append("\"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]) %}
	{% endif %}
	
	{% if not (runout_resume and do_resume) %}
	RESPOND TYPE=command MSG="action:prompt_begin RESUME aborted !!!"
	{% for element in prompt_txt %}
	RESPOND TYPE=command MSG='{"action:prompt_text %s" % element}'
	{% endfor %}
	RESPOND TYPE=command MSG="action:prompt_footer_button Ok|RESPOND TYPE=command MSG=action:prompt_end|info"
	RESPOND TYPE=command MSG="action:prompt_show"
	{% endif %}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[filament_switch_sensor switch_sensor]
switch_pin = ^PB16
pause_on_runout = True
runout_gcode = 
insert_gcode = 

[filament_motion_sensor encoder_sensor]
switch_pin = PB15
detection_length = 3
extruder = extruder
pause_on_runout = False
runout_gcode = 

[gcode_macro PROBE_DOWN]
gcode = 
	SET_PIN PIN=probe_enable VALUE=1

[gcode_macro PROBE_UP]
gcode = 
	SET_PIN PIN=probe_enable VALUE=0

[output_pin probe_enable]
pin = PB12
value = 0

[probe]
pin = ^!PA7
deactivate_on_each_sample = False
x_offset = -16
y_offset = 45
samples = 2
samples_tolerance = 0.05
samples_tolerance_retries = 3
activate_gcode = 
	PROBE_DOWN
	G4 P500
deactivate_gcode = 
	PROBE_UP
z_offset = 0.570

[adxl345]
spi_bus = spidev1.1
axes_map = x,y,x

[resonance_tester]
accel_chip = adxl345
probe_points = 
	150,150,20

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 9000
max_z_velocity = 7
max_z_accel = 100

[input_shaper]

[stepper_x]
step_pin = PC6
dir_pin = PC5
enable_pin = !PC9
microsteps = 16
rotation_distance = 32
endstop_pin = ^PD4
position_endstop = -15
position_max = 300
position_min = -15
homing_speed = 75

[tmc2130 stepper_x]
cs_pin = PC7
run_current = .75
sense_resistor = 0.120
diag1_pin = !PA4
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[stepper_y]
step_pin = PC12
dir_pin = !PC11
enable_pin = !PC14
microsteps = 16
rotation_distance = 32
endstop_pin = PD6
position_endstop = -10
position_max = 303
position_min = -10
homing_speed = 75

[tmc2130 stepper_y]
cs_pin = PC13
run_current = .75
sense_resistor = 0.120
diag1_pin = !PC15
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[stepper_z]
step_pin = PC17
dir_pin = PC16
enable_pin = !PC19
microsteps = 16
rotation_distance = 2
endstop_pin = probe:z_virtual_endstop
position_max = 265
position_min = -3
homing_speed = 5

[tmc2130 stepper_z]
cs_pin = PC18
run_current = .80
sense_resistor = 0.120
diag1_pin = PC4
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[safe_z_home]
home_xy_position = 166,105
speed = 100
z_hop = 10
z_hop_speed = 100

[extruder]
step_pin = PB10
dir_pin = !PC10
enable_pin = !PB22
microsteps = 16
rotation_distance = 7.81
nozzle_diameter = 0.400
filament_diameter = 1.75
heater_pin = PC24
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB19
min_temp = 0
max_temp = 285
min_extrude_temp = 120
max_extrude_only_distance = 140.0
pressure_advance = .0525
control = pid
pid_kp = 23.681
pid_ki = 1.152
pid_kd = 121.659

[tmc2130 extruder]
cs_pin = PC20
run_current = .75
sense_resistor = 0.120
diag1_pin = !PB23
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[heater_bed]
heater_pin = PC21
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PB20
control = pid
pid_kp = 21
pid_ki = 1.78
pid_kd = 61.93
min_temp = 0
max_temp = 130

[fan]
pin = PC23

[heater_fan nozzle_cooling_fan]
pin = PC25

[display]
lcd_type = st7920
cs_pin = EXP1_4
sclk_pin = EXP1_5
sid_pin = EXP1_3
encoder_pins = ^EXP2_3, ^EXP2_5
click_pin = ^!EXP1_2

[output_pin beeper]
pin = EXP1_1

[board_pins]
aliases = 
	
	EXP1_1=PA14, EXP1_3=PA15, EXP1_5=PA0,  EXP1_7=PA1, EXP1_9=<GND>,
	EXP1_2=PA13, EXP1_4=PA12, EXP1_6=PA16, EXP1_8=PC2, EXP1_10=<5V>,
	
	EXP2_1=PA25, EXP2_3=PB27, EXP2_5=PA3,  EXP2_7=PB25,  EXP2_9=<GND>,
	EXP2_2=PA27, EXP2_4=PA29, EXP2_6=PA26, EXP2_8=<RST>, EXP2_10=<3.3V>

[bed_mesh]
speed = 300
horizontal_move_z = 10
mesh_min = 10, 45
mesh_max = 240, 290
fade_start = 0.6
fade_end = 10.0
probe_count = 15, 15
algorithm = bicubic

[bed_mesh default]
version = 1
points = 
	0.052187, -0.014375, -0.081250, -0.137813, -0.181875
	0.022500, -0.009688, -0.045938, -0.074375, -0.095000
	-0.007500, -0.018438, -0.033750, -0.041875, -0.046875
	-0.055938, -0.047500, -0.044375, -0.030938, -0.010938
	-0.105313, -0.074375, -0.049063, -0.007500, 0.040000
x_count = 5
y_count = 5
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 240.0
min_y = 45.0
max_y = 290.0

[bed_mesh 60degree]
version = 1
points = 
	-0.137188, -0.132500, -0.130000, -0.134063, -0.134375, -0.136875, -0.135313, -0.132500, -0.135000, -0.132500, -0.125000, -0.115938, -0.106250, -0.093125, -0.075313
	-0.124688, -0.121875, -0.123750, -0.111563, -0.129063, -0.126875, -0.125625, -0.123125, -0.120625, -0.113125, -0.105000, -0.098750, -0.087500, -0.073125, -0.063750
	-0.115313, -0.114063, -0.115938, -0.116875, -0.117500, -0.114688, -0.115313, -0.113125, -0.105625, -0.102813, -0.091563, -0.084375, -0.068125, -0.045313, -0.040000
	-0.108750, -0.104375, -0.104375, -0.105313, -0.105938, -0.105938, -0.105938, -0.104688, -0.096563, -0.091563, -0.083125, -0.066875, -0.065313, -0.030000, -0.034688
	-0.103125, -0.097188, -0.098125, -0.098125, -0.099063, -0.098750, -0.100313, -0.095313, -0.090938, -0.085313, -0.075625, -0.065625, -0.051563, -0.038125, -0.015938
	-0.096875, -0.095000, -0.094375, -0.095000, -0.093750, -0.094375, -0.093438, -0.088438, -0.086250, -0.076250, -0.070625, -0.057188, -0.044375, -0.033438, -0.018750
	-0.090625, -0.087813, -0.088125, -0.087813, -0.087500, -0.091875, -0.087188, -0.084688, -0.080625, -0.075000, -0.065000, -0.054375, -0.039688, -0.031563, -0.021250
	-0.091875, -0.089375, -0.087500, -0.089063, -0.086563, -0.089375, -0.088750, -0.085000, -0.083125, -0.076250, -0.069688, -0.060000, -0.045625, -0.037188, -0.020625
	-0.088438, -0.086563, -0.088125, -0.088438, -0.089375, -0.091563, -0.090000, -0.088125, -0.082188, -0.075313, -0.069688, -0.059375, -0.048125, -0.036250, -0.025625
	-0.089688, -0.090313, -0.086875, -0.087500, -0.090938, -0.088438, -0.090625, -0.089375, -0.084375, -0.077813, -0.072188, -0.061250, -0.050313, -0.040625, -0.024688
	-0.095313, -0.094063, -0.090938, -0.091563, -0.089688, -0.092500, -0.090313, -0.089375, -0.083125, -0.075313, -0.068750, -0.058125, -0.047500, -0.036563, -0.019688
	-0.098125, -0.097188, -0.098438, -0.093438, -0.095313, -0.095000, -0.091250, -0.090000, -0.085625, -0.079375, -0.068750, -0.056250, -0.045625, -0.034375, -0.020000
	-0.110313, -0.109063, -0.105625, -0.106563, -0.105313, -0.103750, -0.100938, -0.094688, -0.089063, -0.081875, -0.071250, -0.056875, -0.044688, -0.028125, -0.012813
	-0.116250, -0.111250, -0.107188, -0.106875, -0.103750, -0.101875, -0.097500, -0.092188, -0.083750, -0.076250, -0.065000, -0.052188, -0.038438, -0.022813, -0.005938
	-0.123750, -0.116875, -0.113750, -0.111563, -0.109063, -0.106563, -0.105625, -0.097500, -0.087500, -0.077813, -0.065313, -0.047813, -0.033438, -0.018438, -0.000313
x_count = 15
y_count = 15
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 239.88
min_y = 45.0
max_y = 290.0
=======================
Config error
Traceback (most recent call last):
  File "/home/biqu/klipper/klippy/klippy.py", line 175, in _connect
    self._read_config()
  File "/home/biqu/klipper/klippy/klippy.py", line 141, in _read_config
    self.load_object(config, section_config.get_name(), None)
  File "/home/biqu/klipper/klippy/klippy.py", line 130, in load_object
    self.objects[section] = init_func(config.getsection(section))
  File "/home/biqu/klipper/klippy/extras/adxl345.py", line 302, in load_config
    return ADXL345(config)
  File "/home/biqu/klipper/klippy/extras/adxl345.py", line 199, in __init__
    self.spi = bus.MCU_SPI_from_config(config, 3, default_speed=5000000)
  File "/home/biqu/klipper/klippy/extras/bus.py", line 112, in MCU_SPI_from_config
    cs_pin = config.get(pin_option)
  File "/home/biqu/klipper/klippy/configfile.py", line 57, in get
    return self._get_wrapper(self.fileconfig.get, option, default,
  File "/home/biqu/klipper/klippy/configfile.py", line 32, in _get_wrapper
    raise error("Option '%s' in section '%s' must be specified"
configparser.Error: Option 'cs_pin' in section 'adxl345' must be specified
webhooks client 281473004177536: New connection
webhooks client 281473004177536: Client info {'program': 'Moonraker', 'version': 'v0.8.0-327-g9447494'}
Attempting MCU 'mcu' reset
webhooks client 281473004177536: Disconnected
Restarting printer
Start printer at Wed Apr 24 17:08:34 2024 (1713992914.9 986.5)
===== Config file =====
[mcu]
serial = /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00

[mcu CB1]
serial = /tmp/klipper_host_mcu

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set allow_park = client.park_at_cancel|default(false)|lower == 'true' %}
	{% set retract = client.cancel_retract|default(5.0)|abs %}
	
	{% set park_x = "" if (client.park_at_cancel_x|default(none) is none)
	else "X=" ~ client.park_at_cancel_x %}
	{% set park_y = "" if (client.park_at_cancel_y|default(none) is none)
	else "Y=" ~ client.park_at_cancel_y %}
	{% set custom_park = park_x|length > 0 or park_y|length > 0 %}
	
	
	{% if printer['gcode_macro RESUME'].restore_idle_timeout > 0 %}
	SET_IDLE_TIMEOUT TIMEOUT={printer['gcode_macro RESUME'].restore_idle_timeout}
	{% endif %}
	{% if (custom_park or not printer.pause_resume.is_paused) and allow_park %} _TOOLHEAD_PARK_PAUSE_CANCEL {park_x} {park_y} {% endif %}
	_CLIENT_RETRACT LENGTH={retract}
	TURN_OFF_HEATERS
	M106 S0
	{client.user_cancel_macro|default("")}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	
	SET_PAUSE_NEXT_LAYER ENABLE=0
	SET_PAUSE_AT_LAYER ENABLE=0 LAYER=0
	CANCEL_PRINT_BASE

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set idle_timeout = client.idle_timeout|default(0) %}
	{% set temp = printer[printer.toolhead.extruder].target if printer.toolhead.extruder != '' else 0 %}
	{% set restore = False if printer.toolhead.extruder == ''
	else True  if params.RESTORE|default(1)|int == 1 else False %}
	
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=last_extruder_temp VALUE="{{'restore': restore, 'temp': temp}}"
	
	{% if idle_timeout > 0 %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=restore_idle_timeout VALUE={printer.configfile.settings.idle_timeout.timeout}
	SET_IDLE_TIMEOUT TIMEOUT={idle_timeout}
	{% endif %}
	PAUSE_BASE
	{client.user_pause_macro|default("")}
	_TOOLHEAD_PARK_PAUSE_CANCEL {rawparams}

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set sp_move = client.speed_move|default(velocity) %}
	{% set runout_resume = True if client.runout_sensor|default("") == ""
	else True if not printer[client.runout_sensor].enabled
	else printer[client.runout_sensor].filament_detected %}
	{% set can_extrude = True if printer.toolhead.extruder == ''
	else printer[printer.toolhead.extruder].can_extrude %}
	{% set do_resume = False %}
	{% set prompt_txt = [] %}
	
	
	{% if printer.idle_timeout.state|upper == "IDLE" or idle_state %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	{% if last_extruder_temp.restore %}
	
	RESPOND TYPE=echo MSG='{"Restoring \"%s\" temperature to %3.1f\u00B0C, this may take some time" % (printer.toolhead.extruder, last_extruder_temp.temp) }'
	M109 S{last_extruder_temp.temp}
	{% set do_resume = True %}
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	{% if runout_resume %}
	{% if do_resume %}
	{% if restore_idle_timeout > 0 %} SET_IDLE_TIMEOUT TIMEOUT={restore_idle_timeout} {% endif %}
	{client.user_resume_macro|default("")}
	_CLIENT_EXTRUDE
	RESUME_BASE VELOCITY={params.VELOCITY|default(sp_move)}
	{% endif %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]}'
	{% set _d = prompt_txt.append("\"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]) %}
	{% endif %}
	
	{% if not (runout_resume and do_resume) %}
	RESPOND TYPE=command MSG="action:prompt_begin RESUME aborted !!!"
	{% for element in prompt_txt %}
	RESPOND TYPE=command MSG='{"action:prompt_text %s" % element}'
	{% endfor %}
	RESPOND TYPE=command MSG="action:prompt_footer_button Ok|RESPOND TYPE=command MSG=action:prompt_end|info"
	RESPOND TYPE=command MSG="action:prompt_show"
	{% endif %}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[filament_switch_sensor switch_sensor]
switch_pin = ^PB16
pause_on_runout = True
runout_gcode = 
insert_gcode = 

[filament_motion_sensor encoder_sensor]
switch_pin = PB15
detection_length = 3
extruder = extruder
pause_on_runout = False
runout_gcode = 

[gcode_macro PROBE_DOWN]
gcode = 
	SET_PIN PIN=probe_enable VALUE=1

[gcode_macro PROBE_UP]
gcode = 
	SET_PIN PIN=probe_enable VALUE=0

[output_pin probe_enable]
pin = PB12
value = 0

[probe]
pin = ^!PA7
deactivate_on_each_sample = False
x_offset = -16
y_offset = 45
samples = 2
samples_tolerance = 0.05
samples_tolerance_retries = 3
activate_gcode = 
	PROBE_DOWN
	G4 P500
deactivate_gcode = 
	PROBE_UP
z_offset = 0.570

[adxl345]
cs_pin = CB1:None
spi_bus = spidev1.1
axes_map = x,y,x

[resonance_tester]
accel_chip = adxl345
probe_points = 
	150,150,20

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 9000
max_z_velocity = 7
max_z_accel = 100

[input_shaper]

[stepper_x]
step_pin = PC6
dir_pin = PC5
enable_pin = !PC9
microsteps = 16
rotation_distance = 32
endstop_pin = ^PD4
position_endstop = -15
position_max = 300
position_min = -15
homing_speed = 75

[tmc2130 stepper_x]
cs_pin = PC7
run_current = .75
sense_resistor = 0.120
diag1_pin = !PA4
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[stepper_y]
step_pin = PC12
dir_pin = !PC11
enable_pin = !PC14
microsteps = 16
rotation_distance = 32
endstop_pin = PD6
position_endstop = -10
position_max = 303
position_min = -10
homing_speed = 75

[tmc2130 stepper_y]
cs_pin = PC13
run_current = .75
sense_resistor = 0.120
diag1_pin = !PC15
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[stepper_z]
step_pin = PC17
dir_pin = PC16
enable_pin = !PC19
microsteps = 16
rotation_distance = 2
endstop_pin = probe:z_virtual_endstop
position_max = 265
position_min = -3
homing_speed = 5

[tmc2130 stepper_z]
cs_pin = PC18
run_current = .80
sense_resistor = 0.120
diag1_pin = PC4
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[safe_z_home]
home_xy_position = 166,105
speed = 100
z_hop = 10
z_hop_speed = 100

[extruder]
step_pin = PB10
dir_pin = !PC10
enable_pin = !PB22
microsteps = 16
rotation_distance = 7.81
nozzle_diameter = 0.400
filament_diameter = 1.75
heater_pin = PC24
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB19
min_temp = 0
max_temp = 285
min_extrude_temp = 120
max_extrude_only_distance = 140.0
pressure_advance = .0525
control = pid
pid_kp = 23.681
pid_ki = 1.152
pid_kd = 121.659

[tmc2130 extruder]
cs_pin = PC20
run_current = .75
sense_resistor = 0.120
diag1_pin = !PB23
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[heater_bed]
heater_pin = PC21
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PB20
control = pid
pid_kp = 21
pid_ki = 1.78
pid_kd = 61.93
min_temp = 0
max_temp = 130

[fan]
pin = PC23

[heater_fan nozzle_cooling_fan]
pin = PC25

[display]
lcd_type = st7920
cs_pin = EXP1_4
sclk_pin = EXP1_5
sid_pin = EXP1_3
encoder_pins = ^EXP2_3, ^EXP2_5
click_pin = ^!EXP1_2

[output_pin beeper]
pin = EXP1_1

[board_pins]
aliases = 
	
	EXP1_1=PA14, EXP1_3=PA15, EXP1_5=PA0,  EXP1_7=PA1, EXP1_9=<GND>,
	EXP1_2=PA13, EXP1_4=PA12, EXP1_6=PA16, EXP1_8=PC2, EXP1_10=<5V>,
	
	EXP2_1=PA25, EXP2_3=PB27, EXP2_5=PA3,  EXP2_7=PB25,  EXP2_9=<GND>,
	EXP2_2=PA27, EXP2_4=PA29, EXP2_6=PA26, EXP2_8=<RST>, EXP2_10=<3.3V>

[bed_mesh]
speed = 300
horizontal_move_z = 10
mesh_min = 10, 45
mesh_max = 240, 290
fade_start = 0.6
fade_end = 10.0
probe_count = 15, 15
algorithm = bicubic

[bed_mesh default]
version = 1
points = 
	0.052187, -0.014375, -0.081250, -0.137813, -0.181875
	0.022500, -0.009688, -0.045938, -0.074375, -0.095000
	-0.007500, -0.018438, -0.033750, -0.041875, -0.046875
	-0.055938, -0.047500, -0.044375, -0.030938, -0.010938
	-0.105313, -0.074375, -0.049063, -0.007500, 0.040000
x_count = 5
y_count = 5
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 240.0
min_y = 45.0
max_y = 290.0

[bed_mesh 60degree]
version = 1
points = 
	-0.137188, -0.132500, -0.130000, -0.134063, -0.134375, -0.136875, -0.135313, -0.132500, -0.135000, -0.132500, -0.125000, -0.115938, -0.106250, -0.093125, -0.075313
	-0.124688, -0.121875, -0.123750, -0.111563, -0.129063, -0.126875, -0.125625, -0.123125, -0.120625, -0.113125, -0.105000, -0.098750, -0.087500, -0.073125, -0.063750
	-0.115313, -0.114063, -0.115938, -0.116875, -0.117500, -0.114688, -0.115313, -0.113125, -0.105625, -0.102813, -0.091563, -0.084375, -0.068125, -0.045313, -0.040000
	-0.108750, -0.104375, -0.104375, -0.105313, -0.105938, -0.105938, -0.105938, -0.104688, -0.096563, -0.091563, -0.083125, -0.066875, -0.065313, -0.030000, -0.034688
	-0.103125, -0.097188, -0.098125, -0.098125, -0.099063, -0.098750, -0.100313, -0.095313, -0.090938, -0.085313, -0.075625, -0.065625, -0.051563, -0.038125, -0.015938
	-0.096875, -0.095000, -0.094375, -0.095000, -0.093750, -0.094375, -0.093438, -0.088438, -0.086250, -0.076250, -0.070625, -0.057188, -0.044375, -0.033438, -0.018750
	-0.090625, -0.087813, -0.088125, -0.087813, -0.087500, -0.091875, -0.087188, -0.084688, -0.080625, -0.075000, -0.065000, -0.054375, -0.039688, -0.031563, -0.021250
	-0.091875, -0.089375, -0.087500, -0.089063, -0.086563, -0.089375, -0.088750, -0.085000, -0.083125, -0.076250, -0.069688, -0.060000, -0.045625, -0.037188, -0.020625
	-0.088438, -0.086563, -0.088125, -0.088438, -0.089375, -0.091563, -0.090000, -0.088125, -0.082188, -0.075313, -0.069688, -0.059375, -0.048125, -0.036250, -0.025625
	-0.089688, -0.090313, -0.086875, -0.087500, -0.090938, -0.088438, -0.090625, -0.089375, -0.084375, -0.077813, -0.072188, -0.061250, -0.050313, -0.040625, -0.024688
	-0.095313, -0.094063, -0.090938, -0.091563, -0.089688, -0.092500, -0.090313, -0.089375, -0.083125, -0.075313, -0.068750, -0.058125, -0.047500, -0.036563, -0.019688
	-0.098125, -0.097188, -0.098438, -0.093438, -0.095313, -0.095000, -0.091250, -0.090000, -0.085625, -0.079375, -0.068750, -0.056250, -0.045625, -0.034375, -0.020000
	-0.110313, -0.109063, -0.105625, -0.106563, -0.105313, -0.103750, -0.100938, -0.094688, -0.089063, -0.081875, -0.071250, -0.056875, -0.044688, -0.028125, -0.012813
	-0.116250, -0.111250, -0.107188, -0.106875, -0.103750, -0.101875, -0.097500, -0.092188, -0.083750, -0.076250, -0.065000, -0.052188, -0.038438, -0.022813, -0.005938
	-0.123750, -0.116875, -0.113750, -0.111563, -0.109063, -0.106563, -0.105625, -0.097500, -0.087500, -0.077813, -0.065313, -0.047813, -0.033438, -0.018438, -0.000313
x_count = 15
y_count = 15
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 239.88
min_y = 45.0
max_y = 290.0
=======================
Extruder max_extrude_ratio=0.266081
mcu 'mcu': Starting serial connect
webhooks client 281472986760432: New connection
webhooks client 281472986760432: Client info {'program': 'Moonraker', 'version': 'v0.8.0-327-g9447494'}
Loaded MCU 'mcu' 112 commands (v0.12.0-171-g2f6e94c9 / gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.35.2-2+14+b2) 2.35.2)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_spi0=PA25,PA26,PA27 BUS_PINS_twi0=PA18,PA17 BUS_PINS_twi1=PB13,PB12 BUS_PINS_usart0=PA10,PA11,PA17 BUS_PINS_usart1=PA12,PA13,PA16 BUS_PINS_usart2=PB21,PB20,PB24 CLOCK_FREQ=84000000 MCU=sam3x8e PWM_MAX=255 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
mcu 'CB1': Starting connect
Loaded MCU 'CB1' 111 commands (v0.11.0-122-ge6ef48cd / gcc: (Debian 10.2.1-6) 10.2.1 20210110 binutils: (GNU Binutils for Debian) 2.35.2)
MCU 'CB1' config: ADC_MAX=4095 CLOCK_FREQ=50000000 MCU=linux PCA9685_MAX=4096 PWM_MAX=32768 STATS_SUMSQ_BASE=256
Sending MCU 'mcu' printer configuration...
Configured MCU 'mcu' (1024 moves)
Protocol error
Traceback (most recent call last):
  File "/home/biqu/klipper/klippy/klippy.py", line 180, in _connect
    cb()
  File "/home/biqu/klipper/klippy/mcu.py", line 746, in _connect
    self._send_config(None)
  File "/home/biqu/klipper/klippy/mcu.py", line 677, in _send_config
    cb()
  File "/home/biqu/klipper/klippy/extras/adxl345.py", line 222, in _build_config
    self.query_adxl345_cmd = self.mcu.lookup_command(
  File "/home/biqu/klipper/klippy/mcu.py", line 877, in lookup_command
    return CommandWrapper(self._serial, msgformat, cq)
  File "/home/biqu/klipper/klippy/mcu.py", line 86, in __init__
    self._cmd = msgparser.lookup_command(msgformat)
  File "/home/biqu/klipper/klippy/msgproto.py", line 317, in lookup_command
    self._error("Command format mismatch: %s vs %s",
  File "/home/biqu/klipper/klippy/msgproto.py", line 243, in _error
    raise error(self.warn_prefix + (msg % params))
msgproto.error: mcu 'CB1': Command format mismatch: query_adxl345 oid=%c rest_ticks=%u vs query_adxl345 oid=%c clock=%u rest_ticks=%u
Build file /home/biqu/klipper/klippy/../.config(1560): Tue Apr 23 16:27:10 2024
========= Last MCU build config =========
CONFIG_LOW_LEVEL_OPTIONS=y
# CONFIG_MACH_AVR is not set
CONFIG_MACH_ATSAM=y
# CONFIG_MACH_ATSAMD is not set
# CONFIG_MACH_LPC176X is not set
# CONFIG_MACH_STM32 is not set
# CONFIG_MACH_HC32F460 is not set
# CONFIG_MACH_RP2040 is not set
# CONFIG_MACH_PRU is not set
# CONFIG_MACH_AR100 is not set
# CONFIG_MACH_LINUX is not set
# CONFIG_MACH_SIMU is not set
CONFIG_BOARD_DIRECTORY="atsam"
CONFIG_MCU="sam3x8e"
CONFIG_CLOCK_FREQ=84000000
CONFIG_USBSERIAL=y
CONFIG_ATSAM_SELECT=y
CONFIG_MACH_SAM3X8E=y
# CONFIG_MACH_SAM3X8C is not set
# CONFIG_MACH_SAM4S8C is not set
# CONFIG_MACH_SAM4E8E is not set
# CONFIG_MACH_SAME70Q20B is not set
CONFIG_MACH_SAM3X=y
CONFIG_FLASH_SIZE=0x80000
CONFIG_FLASH_BOOT_ADDRESS=0x0
CONFIG_RAM_START=0x20000000
CONFIG_RAM_SIZE=0x18000
CONFIG_STACK_SIZE=512
CONFIG_FLASH_APPLICATION_ADDRESS=0x80000
CONFIG_ATSAM_USB=y
# CONFIG_ATSAM_SERIAL is not set
CONFIG_USB=y
CONFIG_USB_VENDOR_ID=0x1d50
CONFIG_USB_DEVICE_ID=0x614e
CONFIG_USB_SERIAL_NUMBER_CHIPID=y
CONFIG_USB_SERIAL_NUMBER="12345"

#
# USB ids
#
# end of USB ids

CONFIG_WANT_GPIO_BITBANGING=y
CONFIG_WANT_DISPLAYS=y
CONFIG_WANT_SENSORS=y
CONFIG_WANT_LIS2DW=y
CONFIG_WANT_LDC1612=y
CONFIG_WANT_SOFTWARE_I2C=y
CONFIG_WANT_SOFTWARE_SPI=y
CONFIG_NEED_SENSOR_BULK=y
CONFIG_CANBUS_FREQUENCY=1000000
CONFIG_INITIAL_PINS=""
CONFIG_HAVE_GPIO=y
CONFIG_HAVE_GPIO_ADC=y
CONFIG_HAVE_GPIO_SPI=y
CONFIG_HAVE_GPIO_I2C=y
CONFIG_HAVE_GPIO_HARD_PWM=y
CONFIG_HAVE_STRICT_TIMING=y
CONFIG_HAVE_CHIPID=y
CONFIG_HAVE_STEPPER_BOTH_EDGE=y
CONFIG_HAVE_BOOTLOADER_REQUEST=y
CONFIG_INLINE_STEPPER_HACK=y
=======================
Build file /home/biqu/klipper/klippy/../out/klipper.dict(7778): Tue Apr 23 16:28:06 2024
Last MCU build version: v0.12.0-171-g2f6e94c9
Last MCU build tools: gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.35.2-2+14+b2) 2.35.2
Last MCU build config: ADC_MAX=4095 BUS_PINS_spi0=PA25,PA26,PA27 BUS_PINS_twi0=PA18,PA17 BUS_PINS_twi1=PB13,PB12 BUS_PINS_usart0=PA10,PA11,PA17 BUS_PINS_usart1=PA12,PA13,PA16 BUS_PINS_usart2=PB21,PB20,PB24 CLOCK_FREQ=84000000 MCU=sam3x8e PWM_MAX=255 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Build file /home/biqu/klipper/klippy/../out/klipper.elf(1068496): Tue Apr 23 16:28:23 2024
Attempting MCU 'mcu' reset command
Attempting MCU 'CB1' config_reset command
b'Got EOF when reading from device'
webhooks client 281472986760432: Disconnected
Restarting printer
Start printer at Wed Apr 24 17:14:12 2024 (1713993252.0 1323.5)
===== Config file =====
[mcu]
serial = /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set allow_park = client.park_at_cancel|default(false)|lower == 'true' %}
	{% set retract = client.cancel_retract|default(5.0)|abs %}
	
	{% set park_x = "" if (client.park_at_cancel_x|default(none) is none)
	else "X=" ~ client.park_at_cancel_x %}
	{% set park_y = "" if (client.park_at_cancel_y|default(none) is none)
	else "Y=" ~ client.park_at_cancel_y %}
	{% set custom_park = park_x|length > 0 or park_y|length > 0 %}
	
	
	{% if printer['gcode_macro RESUME'].restore_idle_timeout > 0 %}
	SET_IDLE_TIMEOUT TIMEOUT={printer['gcode_macro RESUME'].restore_idle_timeout}
	{% endif %}
	{% if (custom_park or not printer.pause_resume.is_paused) and allow_park %} _TOOLHEAD_PARK_PAUSE_CANCEL {park_x} {park_y} {% endif %}
	_CLIENT_RETRACT LENGTH={retract}
	TURN_OFF_HEATERS
	M106 S0
	{client.user_cancel_macro|default("")}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	
	SET_PAUSE_NEXT_LAYER ENABLE=0
	SET_PAUSE_AT_LAYER ENABLE=0 LAYER=0
	CANCEL_PRINT_BASE

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set idle_timeout = client.idle_timeout|default(0) %}
	{% set temp = printer[printer.toolhead.extruder].target if printer.toolhead.extruder != '' else 0 %}
	{% set restore = False if printer.toolhead.extruder == ''
	else True  if params.RESTORE|default(1)|int == 1 else False %}
	
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=last_extruder_temp VALUE="{{'restore': restore, 'temp': temp}}"
	
	{% if idle_timeout > 0 %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=restore_idle_timeout VALUE={printer.configfile.settings.idle_timeout.timeout}
	SET_IDLE_TIMEOUT TIMEOUT={idle_timeout}
	{% endif %}
	PAUSE_BASE
	{client.user_pause_macro|default("")}
	_TOOLHEAD_PARK_PAUSE_CANCEL {rawparams}

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set sp_move = client.speed_move|default(velocity) %}
	{% set runout_resume = True if client.runout_sensor|default("") == ""
	else True if not printer[client.runout_sensor].enabled
	else printer[client.runout_sensor].filament_detected %}
	{% set can_extrude = True if printer.toolhead.extruder == ''
	else printer[printer.toolhead.extruder].can_extrude %}
	{% set do_resume = False %}
	{% set prompt_txt = [] %}
	
	
	{% if printer.idle_timeout.state|upper == "IDLE" or idle_state %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	{% if last_extruder_temp.restore %}
	
	RESPOND TYPE=echo MSG='{"Restoring \"%s\" temperature to %3.1f\u00B0C, this may take some time" % (printer.toolhead.extruder, last_extruder_temp.temp) }'
	M109 S{last_extruder_temp.temp}
	{% set do_resume = True %}
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	{% if runout_resume %}
	{% if do_resume %}
	{% if restore_idle_timeout > 0 %} SET_IDLE_TIMEOUT TIMEOUT={restore_idle_timeout} {% endif %}
	{client.user_resume_macro|default("")}
	_CLIENT_EXTRUDE
	RESUME_BASE VELOCITY={params.VELOCITY|default(sp_move)}
	{% endif %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]}'
	{% set _d = prompt_txt.append("\"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]) %}
	{% endif %}
	
	{% if not (runout_resume and do_resume) %}
	RESPOND TYPE=command MSG="action:prompt_begin RESUME aborted !!!"
	{% for element in prompt_txt %}
	RESPOND TYPE=command MSG='{"action:prompt_text %s" % element}'
	{% endfor %}
	RESPOND TYPE=command MSG="action:prompt_footer_button Ok|RESPOND TYPE=command MSG=action:prompt_end|info"
	RESPOND TYPE=command MSG="action:prompt_show"
	{% endif %}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[filament_switch_sensor switch_sensor]
switch_pin = ^PB16
pause_on_runout = True
runout_gcode = 
insert_gcode = 

[filament_motion_sensor encoder_sensor]
switch_pin = PB15
detection_length = 3
extruder = extruder
pause_on_runout = False
runout_gcode = 

[gcode_macro PROBE_DOWN]
gcode = 
	SET_PIN PIN=probe_enable VALUE=1

[gcode_macro PROBE_UP]
gcode = 
	SET_PIN PIN=probe_enable VALUE=0

[output_pin probe_enable]
pin = PB12
value = 0

[probe]
pin = ^!PA7
deactivate_on_each_sample = False
x_offset = -16
y_offset = 45
samples = 2
samples_tolerance = 0.05
samples_tolerance_retries = 3
activate_gcode = 
	PROBE_DOWN
	G4 P500
deactivate_gcode = 
	PROBE_UP
z_offset = 0.570

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 9000
max_z_velocity = 7
max_z_accel = 100

[input_shaper]

[stepper_x]
step_pin = PC6
dir_pin = PC5
enable_pin = !PC9
microsteps = 16
rotation_distance = 32
endstop_pin = ^PD4
position_endstop = -15
position_max = 300
position_min = -15
homing_speed = 75

[tmc2130 stepper_x]
cs_pin = PC7
run_current = .75
sense_resistor = 0.120
diag1_pin = !PA4
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[stepper_y]
step_pin = PC12
dir_pin = !PC11
enable_pin = !PC14
microsteps = 16
rotation_distance = 32
endstop_pin = PD6
position_endstop = -10
position_max = 303
position_min = -10
homing_speed = 75

[tmc2130 stepper_y]
cs_pin = PC13
run_current = .75
sense_resistor = 0.120
diag1_pin = !PC15
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[stepper_z]
step_pin = PC17
dir_pin = PC16
enable_pin = !PC19
microsteps = 16
rotation_distance = 2
endstop_pin = probe:z_virtual_endstop
position_max = 265
position_min = -3
homing_speed = 5

[tmc2130 stepper_z]
cs_pin = PC18
run_current = .80
sense_resistor = 0.120
diag1_pin = PC4
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[safe_z_home]
home_xy_position = 166,105
speed = 100
z_hop = 10
z_hop_speed = 100

[extruder]
step_pin = PB10
dir_pin = !PC10
enable_pin = !PB22
microsteps = 16
rotation_distance = 7.81
nozzle_diameter = 0.400
filament_diameter = 1.75
heater_pin = PC24
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB19
min_temp = 0
max_temp = 285
min_extrude_temp = 120
max_extrude_only_distance = 140.0
pressure_advance = .0525
control = pid
pid_kp = 23.681
pid_ki = 1.152
pid_kd = 121.659

[tmc2130 extruder]
cs_pin = PC20
run_current = .75
sense_resistor = 0.120
diag1_pin = !PB23
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[heater_bed]
heater_pin = PC21
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PB20
control = pid
pid_kp = 21
pid_ki = 1.78
pid_kd = 61.93
min_temp = 0
max_temp = 130

[fan]
pin = PC23

[heater_fan nozzle_cooling_fan]
pin = PC25

[display]
lcd_type = st7920
cs_pin = EXP1_4
sclk_pin = EXP1_5
sid_pin = EXP1_3
encoder_pins = ^EXP2_3, ^EXP2_5
click_pin = ^!EXP1_2

[output_pin beeper]
pin = EXP1_1

[board_pins]
aliases = 
	
	EXP1_1=PA14, EXP1_3=PA15, EXP1_5=PA0,  EXP1_7=PA1, EXP1_9=<GND>,
	EXP1_2=PA13, EXP1_4=PA12, EXP1_6=PA16, EXP1_8=PC2, EXP1_10=<5V>,
	
	EXP2_1=PA25, EXP2_3=PB27, EXP2_5=PA3,  EXP2_7=PB25,  EXP2_9=<GND>,
	EXP2_2=PA27, EXP2_4=PA29, EXP2_6=PA26, EXP2_8=<RST>, EXP2_10=<3.3V>

[bed_mesh]
speed = 300
horizontal_move_z = 10
mesh_min = 10, 45
mesh_max = 240, 290
fade_start = 0.6
fade_end = 10.0
probe_count = 15, 15
algorithm = bicubic

[bed_mesh default]
version = 1
points = 
	0.052187, -0.014375, -0.081250, -0.137813, -0.181875
	0.022500, -0.009688, -0.045938, -0.074375, -0.095000
	-0.007500, -0.018438, -0.033750, -0.041875, -0.046875
	-0.055938, -0.047500, -0.044375, -0.030938, -0.010938
	-0.105313, -0.074375, -0.049063, -0.007500, 0.040000
x_count = 5
y_count = 5
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 240.0
min_y = 45.0
max_y = 290.0

[bed_mesh 60degree]
version = 1
points = 
	-0.137188, -0.132500, -0.130000, -0.134063, -0.134375, -0.136875, -0.135313, -0.132500, -0.135000, -0.132500, -0.125000, -0.115938, -0.106250, -0.093125, -0.075313
	-0.124688, -0.121875, -0.123750, -0.111563, -0.129063, -0.126875, -0.125625, -0.123125, -0.120625, -0.113125, -0.105000, -0.098750, -0.087500, -0.073125, -0.063750
	-0.115313, -0.114063, -0.115938, -0.116875, -0.117500, -0.114688, -0.115313, -0.113125, -0.105625, -0.102813, -0.091563, -0.084375, -0.068125, -0.045313, -0.040000
	-0.108750, -0.104375, -0.104375, -0.105313, -0.105938, -0.105938, -0.105938, -0.104688, -0.096563, -0.091563, -0.083125, -0.066875, -0.065313, -0.030000, -0.034688
	-0.103125, -0.097188, -0.098125, -0.098125, -0.099063, -0.098750, -0.100313, -0.095313, -0.090938, -0.085313, -0.075625, -0.065625, -0.051563, -0.038125, -0.015938
	-0.096875, -0.095000, -0.094375, -0.095000, -0.093750, -0.094375, -0.093438, -0.088438, -0.086250, -0.076250, -0.070625, -0.057188, -0.044375, -0.033438, -0.018750
	-0.090625, -0.087813, -0.088125, -0.087813, -0.087500, -0.091875, -0.087188, -0.084688, -0.080625, -0.075000, -0.065000, -0.054375, -0.039688, -0.031563, -0.021250
	-0.091875, -0.089375, -0.087500, -0.089063, -0.086563, -0.089375, -0.088750, -0.085000, -0.083125, -0.076250, -0.069688, -0.060000, -0.045625, -0.037188, -0.020625
	-0.088438, -0.086563, -0.088125, -0.088438, -0.089375, -0.091563, -0.090000, -0.088125, -0.082188, -0.075313, -0.069688, -0.059375, -0.048125, -0.036250, -0.025625
	-0.089688, -0.090313, -0.086875, -0.087500, -0.090938, -0.088438, -0.090625, -0.089375, -0.084375, -0.077813, -0.072188, -0.061250, -0.050313, -0.040625, -0.024688
	-0.095313, -0.094063, -0.090938, -0.091563, -0.089688, -0.092500, -0.090313, -0.089375, -0.083125, -0.075313, -0.068750, -0.058125, -0.047500, -0.036563, -0.019688
	-0.098125, -0.097188, -0.098438, -0.093438, -0.095313, -0.095000, -0.091250, -0.090000, -0.085625, -0.079375, -0.068750, -0.056250, -0.045625, -0.034375, -0.020000
	-0.110313, -0.109063, -0.105625, -0.106563, -0.105313, -0.103750, -0.100938, -0.094688, -0.089063, -0.081875, -0.071250, -0.056875, -0.044688, -0.028125, -0.012813
	-0.116250, -0.111250, -0.107188, -0.106875, -0.103750, -0.101875, -0.097500, -0.092188, -0.083750, -0.076250, -0.065000, -0.052188, -0.038438, -0.022813, -0.005938
	-0.123750, -0.116875, -0.113750, -0.111563, -0.109063, -0.106563, -0.105625, -0.097500, -0.087500, -0.077813, -0.065313, -0.047813, -0.033438, -0.018438, -0.000313
x_count = 15
y_count = 15
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 239.88
min_y = 45.0
max_y = 290.0
=======================
Extruder max_extrude_ratio=0.266081
mcu 'mcu': Starting serial connect
webhooks client 281473004833808: New connection
webhooks client 281473004833808: Client info {'program': 'Moonraker', 'version': 'v0.8.0-327-g9447494'}
Loaded MCU 'mcu' 112 commands (v0.12.0-171-g2f6e94c9 / gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.35.2-2+14+b2) 2.35.2)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_spi0=PA25,PA26,PA27 BUS_PINS_twi0=PA18,PA17 BUS_PINS_twi1=PB13,PB12 BUS_PINS_usart0=PA10,PA11,PA17 BUS_PINS_usart1=PA12,PA13,PA16 BUS_PINS_usart2=PB21,PB20,PB24 CLOCK_FREQ=84000000 MCU=sam3x8e PWM_MAX=255 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Sending MCU 'mcu' printer configuration...
Configured MCU 'mcu' (1024 moves)
Starting heater checks for heater_bed
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (26.0, 0.0)     | (10.0, 45.0)
  1   | (42.4, 0.0)     | (26.4, 45.0)
  2   | (58.8, 0.0)     | (42.8, 45.0)
  3   | (75.3, 0.0)     | (59.3, 45.0)
  4   | (91.7, 0.0)     | (75.7, 45.0)
  5   | (108.1, 0.0)    | (92.1, 45.0)
  6   | (124.5, 0.0)    | (108.5, 45.0)
  7   | (140.9, 0.0)    | (124.9, 45.0)
  8   | (157.4, 0.0)    | (141.4, 45.0)
  9   | (173.8, 0.0)    | (157.8, 45.0)
  10  | (190.2, 0.0)    | (174.2, 45.0)
  11  | (206.6, 0.0)    | (190.6, 45.0)
  12  | (223.0, 0.0)    | (207.0, 45.0)
  13  | (239.5, 0.0)    | (223.5, 45.0)
  14  | (255.9, 0.0)    | (239.9, 45.0)
  15  | (255.9, 17.5)   | (239.9, 62.5)
  16  | (239.5, 17.5)   | (223.5, 62.5)
  17  | (223.0, 17.5)   | (207.0, 62.5)
  18  | (206.6, 17.5)   | (190.6, 62.5)
  19  | (190.2, 17.5)   | (174.2, 62.5)
  20  | (173.8, 17.5)   | (157.8, 62.5)
  21  | (157.4, 17.5)   | (141.4, 62.5)
  22  | (140.9, 17.5)   | (124.9, 62.5)
  23  | (124.5, 17.5)   | (108.5, 62.5)
  24  | (108.1, 17.5)   | (92.1, 62.5)
  25  | (91.7, 17.5)    | (75.7, 62.5)
  26  | (75.3, 17.5)    | (59.3, 62.5)
  27  | (58.8, 17.5)    | (42.8, 62.5)
  28  | (42.4, 17.5)    | (26.4, 62.5)
  29  | (26.0, 17.5)    | (10.0, 62.5)
  30  | (26.0, 35.0)    | (10.0, 80.0)
  31  | (42.4, 35.0)    | (26.4, 80.0)
  32  | (58.8, 35.0)    | (42.8, 80.0)
  33  | (75.3, 35.0)    | (59.3, 80.0)
  34  | (91.7, 35.0)    | (75.7, 80.0)
  35  | (108.1, 35.0)   | (92.1, 80.0)
  36  | (124.5, 35.0)   | (108.5, 80.0)
  37  | (140.9, 35.0)   | (124.9, 80.0)
  38  | (157.4, 35.0)   | (141.4, 80.0)
  39  | (173.8, 35.0)   | (157.8, 80.0)
  40  | (190.2, 35.0)   | (174.2, 80.0)
  41  | (206.6, 35.0)   | (190.6, 80.0)
  42  | (223.0, 35.0)   | (207.0, 80.0)
  43  | (239.5, 35.0)   | (223.5, 80.0)
  44  | (255.9, 35.0)   | (239.9, 80.0)
  45  | (255.9, 52.5)   | (239.9, 97.5)
  46  | (239.5, 52.5)   | (223.5, 97.5)
  47  | (223.0, 52.5)   | (207.0, 97.5)
  48  | (206.6, 52.5)   | (190.6, 97.5)
  49  | (190.2, 52.5)   | (174.2, 97.5)
  50  | (173.8, 52.5)   | (157.8, 97.5)
  51  | (157.4, 52.5)   | (141.4, 97.5)
  52  | (140.9, 52.5)   | (124.9, 97.5)
  53  | (124.5, 52.5)   | (108.5, 97.5)
  54  | (108.1, 52.5)   | (92.1, 97.5)
  55  | (91.7, 52.5)    | (75.7, 97.5)
  56  | (75.3, 52.5)    | (59.3, 97.5)
  57  | (58.8, 52.5)    | (42.8, 97.5)
  58  | (42.4, 52.5)    | (26.4, 97.5)
  59  | (26.0, 52.5)    | (10.0, 97.5)
  60  | (26.0, 70.0)    | (10.0, 115.0)
  61  | (42.4, 70.0)    | (26.4, 115.0)
  62  | (58.8, 70.0)    | (42.8, 115.0)
  63  | (75.3, 70.0)    | (59.3, 115.0)
  64  | (91.7, 70.0)    | (75.7, 115.0)
  65  | (108.1, 70.0)   | (92.1, 115.0)
  66  | (124.5, 70.0)   | (108.5, 115.0)
  67  | (140.9, 70.0)   | (124.9, 115.0)
  68  | (157.4, 70.0)   | (141.4, 115.0)
  69  | (173.8, 70.0)   | (157.8, 115.0)
  70  | (190.2, 70.0)   | (174.2, 115.0)
  71  | (206.6, 70.0)   | (190.6, 115.0)
  72  | (223.0, 70.0)   | (207.0, 115.0)
  73  | (239.5, 70.0)   | (223.5, 115.0)
  74  | (255.9, 70.0)   | (239.9, 115.0)
  75  | (255.9, 87.5)   | (239.9, 132.5)
  76  | (239.5, 87.5)   | (223.5, 132.5)
  77  | (223.0, 87.5)   | (207.0, 132.5)
  78  | (206.6, 87.5)   | (190.6, 132.5)
  79  | (190.2, 87.5)   | (174.2, 132.5)
  80  | (173.8, 87.5)   | (157.8, 132.5)
  81  | (157.4, 87.5)   | (141.4, 132.5)
  82  | (140.9, 87.5)   | (124.9, 132.5)
  83  | (124.5, 87.5)   | (108.5, 132.5)
  84  | (108.1, 87.5)   | (92.1, 132.5)
  85  | (91.7, 87.5)    | (75.7, 132.5)
  86  | (75.3, 87.5)    | (59.3, 132.5)
  87  | (58.8, 87.5)    | (42.8, 132.5)
  88  | (42.4, 87.5)    | (26.4, 132.5)
  89  | (26.0, 87.5)    | (10.0, 132.5)
  90  | (26.0, 105.0)   | (10.0, 150.0)
  91  | (42.4, 105.0)   | (26.4, 150.0)
  92  | (58.8, 105.0)   | (42.8, 150.0)
  93  | (75.3, 105.0)   | (59.3, 150.0)
  94  | (91.7, 105.0)   | (75.7, 150.0)
  95  | (108.1, 105.0)  | (92.1, 150.0)
  96  | (124.5, 105.0)  | (108.5, 150.0)
  97  | (140.9, 105.0)  | (124.9, 150.0)
  98  | (157.4, 105.0)  | (141.4, 150.0)
  99  | (173.8, 105.0)  | (157.8, 150.0)
  100 | (190.2, 105.0)  | (174.2, 150.0)
  101 | (206.6, 105.0)  | (190.6, 150.0)
  102 | (223.0, 105.0)  | (207.0, 150.0)
  103 | (239.5, 105.0)  | (223.5, 150.0)
  104 | (255.9, 105.0)  | (239.9, 150.0)
  105 | (255.9, 122.5)  | (239.9, 167.5)
  106 | (239.5, 122.5)  | (223.5, 167.5)
  107 | (223.0, 122.5)  | (207.0, 167.5)
  108 | (206.6, 122.5)  | (190.6, 167.5)
  109 | (190.2, 122.5)  | (174.2, 167.5)
  110 | (173.8, 122.5)  | (157.8, 167.5)
  111 | (157.4, 122.5)  | (141.4, 167.5)
  112 | (140.9, 122.5)  | (124.9, 167.5)
  113 | (124.5, 122.5)  | (108.5, 167.5)
  114 | (108.1, 122.5)  | (92.1, 167.5)
  115 | (91.7, 122.5)   | (75.7, 167.5)
  116 | (75.3, 122.5)   | (59.3, 167.5)
  117 | (58.8, 122.5)   | (42.8, 167.5)
  118 | (42.4, 122.5)   | (26.4, 167.5)
  119 | (26.0, 122.5)   | (10.0, 167.5)
  120 | (26.0, 140.0)   | (10.0, 185.0)
  121 | (42.4, 140.0)   | (26.4, 185.0)
  122 | (58.8, 140.0)   | (42.8, 185.0)
  123 | (75.3, 140.0)   | (59.3, 185.0)
  124 | (91.7, 140.0)   | (75.7, 185.0)
  125 | (108.1, 140.0)  | (92.1, 185.0)
  126 | (124.5, 140.0)  | (108.5, 185.0)
  127 | (140.9, 140.0)  | (124.9, 185.0)
  128 | (157.4, 140.0)  | (141.4, 185.0)
  129 | (173.8, 140.0)  | (157.8, 185.0)
  130 | (190.2, 140.0)  | (174.2, 185.0)
  131 | (206.6, 140.0)  | (190.6, 185.0)
  132 | (223.0, 140.0)  | (207.0, 185.0)
  133 | (239.5, 140.0)  | (223.5, 185.0)
  134 | (255.9, 140.0)  | (239.9, 185.0)
  135 | (255.9, 157.5)  | (239.9, 202.5)
  136 | (239.5, 157.5)  | (223.5, 202.5)
  137 | (223.0, 157.5)  | (207.0, 202.5)
  138 | (206.6, 157.5)  | (190.6, 202.5)
  139 | (190.2, 157.5)  | (174.2, 202.5)
  140 | (173.8, 157.5)  | (157.8, 202.5)
  141 | (157.4, 157.5)  | (141.4, 202.5)
  142 | (140.9, 157.5)  | (124.9, 202.5)
  143 | (124.5, 157.5)  | (108.5, 202.5)
  144 | (108.1, 157.5)  | (92.1, 202.5)
  145 | (91.7, 157.5)   | (75.7, 202.5)
  146 | (75.3, 157.5)   | (59.3, 202.5)
  147 | (58.8, 157.5)   | (42.8, 202.5)
  148 | (42.4, 157.5)   | (26.4, 202.5)
  149 | (26.0, 157.5)   | (10.0, 202.5)
  150 | (26.0, 175.0)   | (10.0, 220.0)
  151 | (42.4, 175.0)   | (26.4, 220.0)
  152 | (58.8, 175.0)   | (42.8, 220.0)
  153 | (75.3, 175.0)   | (59.3, 220.0)
  154 | (91.7, 175.0)   | (75.7, 220.0)
  155 | (108.1, 175.0)  | (92.1, 220.0)
  156 | (124.5, 175.0)  | (108.5, 220.0)
  157 | (140.9, 175.0)  | (124.9, 220.0)
  158 | (157.4, 175.0)  | (141.4, 220.0)
  159 | (173.8, 175.0)  | (157.8, 220.0)
  160 | (190.2, 175.0)  | (174.2, 220.0)
  161 | (206.6, 175.0)  | (190.6, 220.0)
  162 | (223.0, 175.0)  | (207.0, 220.0)
  163 | (239.5, 175.0)  | (223.5, 220.0)
  164 | (255.9, 175.0)  | (239.9, 220.0)
  165 | (255.9, 192.5)  | (239.9, 237.5)
  166 | (239.5, 192.5)  | (223.5, 237.5)
  167 | (223.0, 192.5)  | (207.0, 237.5)
  168 | (206.6, 192.5)  | (190.6, 237.5)
  169 | (190.2, 192.5)  | (174.2, 237.5)
  170 | (173.8, 192.5)  | (157.8, 237.5)
  171 | (157.4, 192.5)  | (141.4, 237.5)
  172 | (140.9, 192.5)  | (124.9, 237.5)
  173 | (124.5, 192.5)  | (108.5, 237.5)
  174 | (108.1, 192.5)  | (92.1, 237.5)
  175 | (91.7, 192.5)   | (75.7, 237.5)
  176 | (75.3, 192.5)   | (59.3, 237.5)
  177 | (58.8, 192.5)   | (42.8, 237.5)
  178 | (42.4, 192.5)   | (26.4, 237.5)
  179 | (26.0, 192.5)   | (10.0, 237.5)
  180 | (26.0, 210.0)   | (10.0, 255.0)
  181 | (42.4, 210.0)   | (26.4, 255.0)
  182 | (58.8, 210.0)   | (42.8, 255.0)
  183 | (75.3, 210.0)   | (59.3, 255.0)
  184 | (91.7, 210.0)   | (75.7, 255.0)
  185 | (108.1, 210.0)  | (92.1, 255.0)
  186 | (124.5, 210.0)  | (108.5, 255.0)
  187 | (140.9, 210.0)  | (124.9, 255.0)
  188 | (157.4, 210.0)  | (141.4, 255.0)
  189 | (173.8, 210.0)  | (157.8, 255.0)
  190 | (190.2, 210.0)  | (174.2, 255.0)
  191 | (206.6, 210.0)  | (190.6, 255.0)
  192 | (223.0, 210.0)  | (207.0, 255.0)
  193 | (239.5, 210.0)  | (223.5, 255.0)
  194 | (255.9, 210.0)  | (239.9, 255.0)
  195 | (255.9, 227.5)  | (239.9, 272.5)
  196 | (239.5, 227.5)  | (223.5, 272.5)
  197 | (223.0, 227.5)  | (207.0, 272.5)
  198 | (206.6, 227.5)  | (190.6, 272.5)
  199 | (190.2, 227.5)  | (174.2, 272.5)
  200 | (173.8, 227.5)  | (157.8, 272.5)
  201 | (157.4, 227.5)  | (141.4, 272.5)
  202 | (140.9, 227.5)  | (124.9, 272.5)
  203 | (124.5, 227.5)  | (108.5, 272.5)
  204 | (108.1, 227.5)  | (92.1, 272.5)
  205 | (91.7, 227.5)   | (75.7, 272.5)
  206 | (75.3, 227.5)   | (59.3, 272.5)
  207 | (58.8, 227.5)   | (42.8, 272.5)
  208 | (42.4, 227.5)   | (26.4, 272.5)
  209 | (26.0, 227.5)   | (10.0, 272.5)
  210 | (26.0, 245.0)   | (10.0, 290.0)
  211 | (42.4, 245.0)   | (26.4, 290.0)
  212 | (58.8, 245.0)   | (42.8, 290.0)
  213 | (75.3, 245.0)   | (59.3, 290.0)
  214 | (91.7, 245.0)   | (75.7, 290.0)
  215 | (108.1, 245.0)  | (92.1, 290.0)
  216 | (124.5, 245.0)  | (108.5, 290.0)
  217 | (140.9, 245.0)  | (124.9, 290.0)
  218 | (157.4, 245.0)  | (141.4, 290.0)
  219 | (173.8, 245.0)  | (157.8, 290.0)
  220 | (190.2, 245.0)  | (174.2, 290.0)
  221 | (206.6, 245.0)  | (190.6, 290.0)
  222 | (223.0, 245.0)  | (207.0, 290.0)
  223 | (239.5, 245.0)  | (223.5, 290.0)
  224 | (255.9, 245.0)  | (239.9, 290.0)
Starting heater checks for extruder
Stats 1327.7: gcodein=0  mcu: mcu_awake=0.014 mcu_task_avg=0.000027 mcu_task_stddev=0.000036 bytes_write=5925 bytes_read=6167 bytes_retransmit=9 bytes_invalid=0 send_seq=328 receive_seq=325 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=5 upcoming_bytes=0 freq=83996781  heater_bed: target=0 temp=0.0 pwm=0.000 sysload=1.49 cputime=30.806 memavail=665036 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=0.0 pwm=0.000
webhooks: registering remote method 'shutdown_machine' for connection id: 281473004833808
webhooks: registering remote method 'reboot_machine' for connection id: 281473004833808
webhooks: registering remote method 'pause_job_queue' for connection id: 281473004833808
webhooks: registering remote method 'start_job_queue' for connection id: 281473004833808
Stats 1328.7: gcodein=0  mcu: mcu_awake=0.014 mcu_task_avg=0.000027 mcu_task_stddev=0.000036 bytes_write=5949 bytes_read=6248 bytes_retransmit=9 bytes_invalid=0 send_seq=331 receive_seq=331 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83997026  heater_bed: target=0 temp=19.3 pwm=0.000 sysload=1.49 cputime=30.889 memavail=665076 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.2 pwm=0.000
Stats 1329.7: gcodein=0  mcu: mcu_awake=0.014 mcu_task_avg=0.000027 mcu_task_stddev=0.000036 bytes_write=5988 bytes_read=6364 bytes_retransmit=9 bytes_invalid=0 send_seq=334 receive_seq=334 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998338  heater_bed: target=0 temp=19.3 pwm=0.000 sysload=1.49 cputime=30.947 memavail=665012 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1330.7: gcodein=0  mcu: mcu_awake=0.014 mcu_task_avg=0.000027 mcu_task_stddev=0.000036 bytes_write=5994 bytes_read=6485 bytes_retransmit=9 bytes_invalid=0 send_seq=335 receive_seq=335 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998171  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.49 cputime=30.986 memavail=664884 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1331.7: gcodein=0  mcu: mcu_awake=0.014 mcu_task_avg=0.000027 mcu_task_stddev=0.000036 bytes_write=6000 bytes_read=6606 bytes_retransmit=9 bytes_invalid=0 send_seq=336 receive_seq=336 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998103  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.45 cputime=31.023 memavail=664640 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1332.7: gcodein=0  mcu: mcu_awake=0.061 mcu_task_avg=0.000195 mcu_task_stddev=0.000379 bytes_write=6006 bytes_read=6729 bytes_retransmit=9 bytes_invalid=0 send_seq=337 receive_seq=337 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998029  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.45 cputime=31.059 memavail=665452 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1333.7: gcodein=0  mcu: mcu_awake=0.061 mcu_task_avg=0.000195 mcu_task_stddev=0.000379 bytes_write=6012 bytes_read=6850 bytes_retransmit=9 bytes_invalid=0 send_seq=338 receive_seq=338 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998018  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.45 cputime=31.095 memavail=666400 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1334.7: gcodein=0  mcu: mcu_awake=0.061 mcu_task_avg=0.000195 mcu_task_stddev=0.000379 bytes_write=6018 bytes_read=6971 bytes_retransmit=9 bytes_invalid=0 send_seq=339 receive_seq=339 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998093  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.45 cputime=31.134 memavail=665580 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.2 pwm=0.000
Stats 1335.7: gcodein=0  mcu: mcu_awake=0.061 mcu_task_avg=0.000195 mcu_task_stddev=0.000379 bytes_write=6024 bytes_read=7077 bytes_retransmit=9 bytes_invalid=0 send_seq=340 receive_seq=340 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998119  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.45 cputime=31.170 memavail=666264 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1336.7: gcodein=0  mcu: mcu_awake=0.061 mcu_task_avg=0.000195 mcu_task_stddev=0.000379 bytes_write=6030 bytes_read=7198 bytes_retransmit=9 bytes_invalid=0 send_seq=341 receive_seq=341 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998311  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.50 cputime=31.208 memavail=666080 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1337.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=6036 bytes_read=7333 bytes_retransmit=9 bytes_invalid=0 send_seq=342 receive_seq=342 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998392  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.50 cputime=31.245 memavail=665892 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1338.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=6042 bytes_read=7439 bytes_retransmit=9 bytes_invalid=0 send_seq=343 receive_seq=343 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998412  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.50 cputime=31.281 memavail=666124 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1339.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=6048 bytes_read=7560 bytes_retransmit=9 bytes_invalid=0 send_seq=344 receive_seq=344 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998347  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.50 cputime=31.319 memavail=667168 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1340.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=6054 bytes_read=7681 bytes_retransmit=9 bytes_invalid=0 send_seq=345 receive_seq=345 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998300  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.50 cputime=31.356 memavail=668860 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1341.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=6060 bytes_read=7787 bytes_retransmit=9 bytes_invalid=0 send_seq=346 receive_seq=346 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998276  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.54 cputime=31.392 memavail=670736 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1342.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=6066 bytes_read=7922 bytes_retransmit=9 bytes_invalid=0 send_seq=347 receive_seq=347 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998243  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.54 cputime=31.429 memavail=673908 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.2 pwm=0.000
Stats 1343.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=6072 bytes_read=8043 bytes_retransmit=9 bytes_invalid=0 send_seq=348 receive_seq=348 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998240  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.54 cputime=31.467 memavail=672204 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1344.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=6078 bytes_read=8149 bytes_retransmit=9 bytes_invalid=0 send_seq=349 receive_seq=349 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998226  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.54 cputime=31.503 memavail=672908 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1345.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=6084 bytes_read=8270 bytes_retransmit=9 bytes_invalid=0 send_seq=350 receive_seq=350 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998209  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.54 cputime=31.540 memavail=673236 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1346.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=6090 bytes_read=8391 bytes_retransmit=9 bytes_invalid=0 send_seq=351 receive_seq=351 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998205  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.57 cputime=31.576 memavail=674476 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1347.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=6096 bytes_read=8511 bytes_retransmit=9 bytes_invalid=0 send_seq=352 receive_seq=352 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998198  heater_bed: target=0 temp=19.3 pwm=0.000 sysload=1.57 cputime=31.612 memavail=674356 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1348.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=6102 bytes_read=8632 bytes_retransmit=9 bytes_invalid=0 send_seq=353 receive_seq=353 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998193  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.57 cputime=31.648 memavail=675424 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1349.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=6108 bytes_read=8753 bytes_retransmit=9 bytes_invalid=0 send_seq=354 receive_seq=354 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998191  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.57 cputime=31.684 memavail=676140 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.2 pwm=0.000
Stats 1350.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=6114 bytes_read=8859 bytes_retransmit=9 bytes_invalid=0 send_seq=355 receive_seq=355 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998188  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.57 cputime=31.720 memavail=674040 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1351.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=6120 bytes_read=8980 bytes_retransmit=9 bytes_invalid=0 send_seq=356 receive_seq=356 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998189  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.53 cputime=31.755 memavail=676064 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1352.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=6126 bytes_read=9101 bytes_retransmit=9 bytes_invalid=0 send_seq=357 receive_seq=357 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998193  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.53 cputime=31.791 memavail=674892 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1353.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=6132 bytes_read=9221 bytes_retransmit=9 bytes_invalid=0 send_seq=358 receive_seq=358 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998188  heater_bed: target=0 temp=19.3 pwm=0.000 sysload=1.53 cputime=31.828 memavail=675344 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1354.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=6138 bytes_read=9342 bytes_retransmit=9 bytes_invalid=0 send_seq=359 receive_seq=359 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998187  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.53 cputime=31.863 memavail=673520 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1355.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=6144 bytes_read=9463 bytes_retransmit=9 bytes_invalid=0 send_seq=360 receive_seq=360 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998186  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.53 cputime=31.900 memavail=672224 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1356.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=6150 bytes_read=9569 bytes_retransmit=9 bytes_invalid=0 send_seq=361 receive_seq=361 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998208  heater_bed: target=0 temp=19.3 pwm=0.000 sysload=1.57 cputime=31.935 memavail=671272 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1357.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=6156 bytes_read=9690 bytes_retransmit=9 bytes_invalid=0 send_seq=362 receive_seq=362 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998217  heater_bed: target=0 temp=19.3 pwm=0.000 sysload=1.57 cputime=31.973 memavail=669360 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1358.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=6162 bytes_read=9825 bytes_retransmit=9 bytes_invalid=0 send_seq=363 receive_seq=363 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998214  heater_bed: target=0 temp=19.3 pwm=0.000 sysload=1.57 cputime=32.010 memavail=668972 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1359.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=6168 bytes_read=9931 bytes_retransmit=9 bytes_invalid=0 send_seq=364 receive_seq=364 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998211  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.57 cputime=32.047 memavail=668036 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1360.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=6174 bytes_read=10052 bytes_retransmit=9 bytes_invalid=0 send_seq=365 receive_seq=365 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998207  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.57 cputime=32.084 memavail=679388 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1361.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=6180 bytes_read=10173 bytes_retransmit=9 bytes_invalid=0 send_seq=366 receive_seq=366 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998213  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.52 cputime=32.122 memavail=668532 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1362.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=6186 bytes_read=10279 bytes_retransmit=9 bytes_invalid=0 send_seq=367 receive_seq=367 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998213  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.52 cputime=32.158 memavail=659468 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.2 pwm=0.000
Stats 1363.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=6198 bytes_read=10430 bytes_retransmit=9 bytes_invalid=0 send_seq=369 receive_seq=369 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998212  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.52 cputime=32.198 memavail=649928 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1364.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=6204 bytes_read=10551 bytes_retransmit=9 bytes_invalid=0 send_seq=370 receive_seq=370 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998219  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.52 cputime=32.240 memavail=642228 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1365.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=6210 bytes_read=10657 bytes_retransmit=9 bytes_invalid=0 send_seq=371 receive_seq=371 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998217  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.52 cputime=32.282 memavail=642028 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1366.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=6216 bytes_read=10778 bytes_retransmit=9 bytes_invalid=0 send_seq=372 receive_seq=372 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998225  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.48 cputime=32.321 memavail=640444 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1367.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000007 bytes_write=6222 bytes_read=10899 bytes_retransmit=9 bytes_invalid=0 send_seq=373 receive_seq=373 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998231  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.48 cputime=32.362 memavail=636528 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1368.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=6228 bytes_read=11019 bytes_retransmit=9 bytes_invalid=0 send_seq=374 receive_seq=374 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998237  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.48 cputime=32.402 memavail=671284 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1369.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=6234 bytes_read=11140 bytes_retransmit=9 bytes_invalid=0 send_seq=375 receive_seq=375 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998235  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.48 cputime=32.438 memavail=671284 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1370.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=6240 bytes_read=11261 bytes_retransmit=9 bytes_invalid=0 send_seq=376 receive_seq=376 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998233  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.48 cputime=32.474 memavail=671032 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1371.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=6246 bytes_read=11367 bytes_retransmit=9 bytes_invalid=0 send_seq=377 receive_seq=377 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998230  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.68 cputime=32.510 memavail=669276 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1372.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=6252 bytes_read=11486 bytes_retransmit=9 bytes_invalid=0 send_seq=378 receive_seq=378 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998237  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.68 cputime=32.547 memavail=669280 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.2 pwm=0.000
Stats 1373.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=6258 bytes_read=11613 bytes_retransmit=9 bytes_invalid=0 send_seq=379 receive_seq=379 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998235  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.68 cputime=32.585 memavail=664000 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.2 pwm=0.000
Stats 1374.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=6264 bytes_read=11712 bytes_retransmit=9 bytes_invalid=0 send_seq=380 receive_seq=380 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998241  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.68 cputime=32.627 memavail=659772 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.2 pwm=0.000
Stats 1375.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=6270 bytes_read=11826 bytes_retransmit=9 bytes_invalid=0 send_seq=381 receive_seq=381 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998247  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.68 cputime=32.668 memavail=646304 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1376.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=6276 bytes_read=11947 bytes_retransmit=9 bytes_invalid=0 send_seq=382 receive_seq=382 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998244  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.63 cputime=32.706 memavail=656180 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.2 pwm=0.000
Stats 1377.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=6282 bytes_read=12053 bytes_retransmit=9 bytes_invalid=0 send_seq=383 receive_seq=383 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998245  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.63 cputime=32.748 memavail=666420 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1378.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=6288 bytes_read=12188 bytes_retransmit=9 bytes_invalid=0 send_seq=384 receive_seq=384 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998242  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.63 cputime=32.787 memavail=653680 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1379.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=6294 bytes_read=12309 bytes_retransmit=9 bytes_invalid=0 send_seq=385 receive_seq=385 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998240  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.63 cputime=32.826 memavail=645124 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1380.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=6300 bytes_read=12415 bytes_retransmit=9 bytes_invalid=0 send_seq=386 receive_seq=386 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998237  heater_bed: target=0 temp=19.2 pwm=0.000 sysload=1.63 cputime=32.860 memavail=644800 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Stats 1381.7: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=6306 bytes_read=12536 bytes_retransmit=9 bytes_invalid=0 send_seq=387 receive_seq=387 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998235  heater_bed: target=0 temp=19.3 pwm=0.000 sysload=1.58 cputime=32.896 memavail=637616 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.1 pwm=0.000
Starting Klippy...
Args: ['/home/biqu/klipper/klippy/klippy.py', '/home/biqu/printer_data/config/printer.cfg', '-I', '/home/biqu/printer_data/comms/klippy.serial', '-l', '/home/biqu/printer_data/logs/klippy.log', '-a', '/home/biqu/printer_data/comms/klippy.sock']
Git version: 'v0.12.0-171-g2f6e94c9'
Branch: master
Remote: origin
Tracked URL: https://github.com/Klipper3d/klipper
CPU: 4 core ?
Python: '3.9.2 (default, Feb 28 2021, 17:03:44) \n[GCC 10.2.1 20210110]'
Start printer at Wed Apr 24 17:15:50 2024 (1713993350.4 1421.9)
===== Config file =====
[mcu]
serial = /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set allow_park = client.park_at_cancel|default(false)|lower == 'true' %}
	{% set retract = client.cancel_retract|default(5.0)|abs %}
	
	{% set park_x = "" if (client.park_at_cancel_x|default(none) is none)
	else "X=" ~ client.park_at_cancel_x %}
	{% set park_y = "" if (client.park_at_cancel_y|default(none) is none)
	else "Y=" ~ client.park_at_cancel_y %}
	{% set custom_park = park_x|length > 0 or park_y|length > 0 %}
	
	
	{% if printer['gcode_macro RESUME'].restore_idle_timeout > 0 %}
	SET_IDLE_TIMEOUT TIMEOUT={printer['gcode_macro RESUME'].restore_idle_timeout}
	{% endif %}
	{% if (custom_park or not printer.pause_resume.is_paused) and allow_park %} _TOOLHEAD_PARK_PAUSE_CANCEL {park_x} {park_y} {% endif %}
	_CLIENT_RETRACT LENGTH={retract}
	TURN_OFF_HEATERS
	M106 S0
	{client.user_cancel_macro|default("")}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	
	SET_PAUSE_NEXT_LAYER ENABLE=0
	SET_PAUSE_AT_LAYER ENABLE=0 LAYER=0
	CANCEL_PRINT_BASE

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set idle_timeout = client.idle_timeout|default(0) %}
	{% set temp = printer[printer.toolhead.extruder].target if printer.toolhead.extruder != '' else 0 %}
	{% set restore = False if printer.toolhead.extruder == ''
	else True  if params.RESTORE|default(1)|int == 1 else False %}
	
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=last_extruder_temp VALUE="{{'restore': restore, 'temp': temp}}"
	
	{% if idle_timeout > 0 %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=restore_idle_timeout VALUE={printer.configfile.settings.idle_timeout.timeout}
	SET_IDLE_TIMEOUT TIMEOUT={idle_timeout}
	{% endif %}
	PAUSE_BASE
	{client.user_pause_macro|default("")}
	_TOOLHEAD_PARK_PAUSE_CANCEL {rawparams}

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set sp_move = client.speed_move|default(velocity) %}
	{% set runout_resume = True if client.runout_sensor|default("") == ""
	else True if not printer[client.runout_sensor].enabled
	else printer[client.runout_sensor].filament_detected %}
	{% set can_extrude = True if printer.toolhead.extruder == ''
	else printer[printer.toolhead.extruder].can_extrude %}
	{% set do_resume = False %}
	{% set prompt_txt = [] %}
	
	
	{% if printer.idle_timeout.state|upper == "IDLE" or idle_state %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	{% if last_extruder_temp.restore %}
	
	RESPOND TYPE=echo MSG='{"Restoring \"%s\" temperature to %3.1f\u00B0C, this may take some time" % (printer.toolhead.extruder, last_extruder_temp.temp) }'
	M109 S{last_extruder_temp.temp}
	{% set do_resume = True %}
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	{% if runout_resume %}
	{% if do_resume %}
	{% if restore_idle_timeout > 0 %} SET_IDLE_TIMEOUT TIMEOUT={restore_idle_timeout} {% endif %}
	{client.user_resume_macro|default("")}
	_CLIENT_EXTRUDE
	RESUME_BASE VELOCITY={params.VELOCITY|default(sp_move)}
	{% endif %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]}'
	{% set _d = prompt_txt.append("\"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]) %}
	{% endif %}
	
	{% if not (runout_resume and do_resume) %}
	RESPOND TYPE=command MSG="action:prompt_begin RESUME aborted !!!"
	{% for element in prompt_txt %}
	RESPOND TYPE=command MSG='{"action:prompt_text %s" % element}'
	{% endfor %}
	RESPOND TYPE=command MSG="action:prompt_footer_button Ok|RESPOND TYPE=command MSG=action:prompt_end|info"
	RESPOND TYPE=command MSG="action:prompt_show"
	{% endif %}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[filament_switch_sensor switch_sensor]
switch_pin = ^PB16
pause_on_runout = True
runout_gcode = 
insert_gcode = 

[filament_motion_sensor encoder_sensor]
switch_pin = PB15
detection_length = 3
extruder = extruder
pause_on_runout = False
runout_gcode = 

[gcode_macro PROBE_DOWN]
gcode = 
	SET_PIN PIN=probe_enable VALUE=1

[gcode_macro PROBE_UP]
gcode = 
	SET_PIN PIN=probe_enable VALUE=0

[output_pin probe_enable]
pin = PB12
value = 0

[probe]
pin = ^!PA7
deactivate_on_each_sample = False
x_offset = -16
y_offset = 45
samples = 2
samples_tolerance = 0.05
samples_tolerance_retries = 3
activate_gcode = 
	PROBE_DOWN
	G4 P500
deactivate_gcode = 
	PROBE_UP
z_offset = 0.570

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 9000
max_z_velocity = 7
max_z_accel = 100

[input_shaper]

[stepper_x]
step_pin = PC6
dir_pin = PC5
enable_pin = !PC9
microsteps = 16
rotation_distance = 32
endstop_pin = ^PD4
position_endstop = -15
position_max = 300
position_min = -15
homing_speed = 75

[tmc2130 stepper_x]
cs_pin = PC7
run_current = .75
sense_resistor = 0.120
diag1_pin = !PA4
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[stepper_y]
step_pin = PC12
dir_pin = !PC11
enable_pin = !PC14
microsteps = 16
rotation_distance = 32
endstop_pin = PD6
position_endstop = -10
position_max = 303
position_min = -10
homing_speed = 75

[tmc2130 stepper_y]
cs_pin = PC13
run_current = .75
sense_resistor = 0.120
diag1_pin = !PC15
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[stepper_z]
step_pin = PC17
dir_pin = PC16
enable_pin = !PC19
microsteps = 16
rotation_distance = 2
endstop_pin = probe:z_virtual_endstop
position_max = 265
position_min = -3
homing_speed = 5

[tmc2130 stepper_z]
cs_pin = PC18
run_current = .80
sense_resistor = 0.120
diag1_pin = PC4
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[safe_z_home]
home_xy_position = 166,105
speed = 100
z_hop = 10
z_hop_speed = 100

[extruder]
step_pin = PB10
dir_pin = !PC10
enable_pin = !PB22
microsteps = 16
rotation_distance = 7.81
nozzle_diameter = 0.400
filament_diameter = 1.75
heater_pin = PC24
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB19
min_temp = 0
max_temp = 285
min_extrude_temp = 120
max_extrude_only_distance = 140.0
pressure_advance = .0525
control = pid
pid_kp = 23.681
pid_ki = 1.152
pid_kd = 121.659

[tmc2130 extruder]
cs_pin = PC20
run_current = .75
sense_resistor = 0.120
diag1_pin = !PB23
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[heater_bed]
heater_pin = PC21
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PB20
control = pid
pid_kp = 21
pid_ki = 1.78
pid_kd = 61.93
min_temp = 0
max_temp = 130

[fan]
pin = PC23

[heater_fan nozzle_cooling_fan]
pin = PC25

[display]
lcd_type = st7920
cs_pin = EXP1_4
sclk_pin = EXP1_5
sid_pin = EXP1_3
encoder_pins = ^EXP2_3, ^EXP2_5
click_pin = ^!EXP1_2

[output_pin beeper]
pin = EXP1_1

[board_pins]
aliases = 
	
	EXP1_1=PA14, EXP1_3=PA15, EXP1_5=PA0,  EXP1_7=PA1, EXP1_9=<GND>,
	EXP1_2=PA13, EXP1_4=PA12, EXP1_6=PA16, EXP1_8=PC2, EXP1_10=<5V>,
	
	EXP2_1=PA25, EXP2_3=PB27, EXP2_5=PA3,  EXP2_7=PB25,  EXP2_9=<GND>,
	EXP2_2=PA27, EXP2_4=PA29, EXP2_6=PA26, EXP2_8=<RST>, EXP2_10=<3.3V>

[bed_mesh]
speed = 300
horizontal_move_z = 10
mesh_min = 10, 45
mesh_max = 240, 290
fade_start = 0.6
fade_end = 10.0
probe_count = 15, 15
algorithm = bicubic

[bed_mesh default]
version = 1
points = 
	0.052187, -0.014375, -0.081250, -0.137813, -0.181875
	0.022500, -0.009688, -0.045938, -0.074375, -0.095000
	-0.007500, -0.018438, -0.033750, -0.041875, -0.046875
	-0.055938, -0.047500, -0.044375, -0.030938, -0.010938
	-0.105313, -0.074375, -0.049063, -0.007500, 0.040000
x_count = 5
y_count = 5
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 240.0
min_y = 45.0
max_y = 290.0

[bed_mesh 60degree]
version = 1
points = 
	-0.137188, -0.132500, -0.130000, -0.134063, -0.134375, -0.136875, -0.135313, -0.132500, -0.135000, -0.132500, -0.125000, -0.115938, -0.106250, -0.093125, -0.075313
	-0.124688, -0.121875, -0.123750, -0.111563, -0.129063, -0.126875, -0.125625, -0.123125, -0.120625, -0.113125, -0.105000, -0.098750, -0.087500, -0.073125, -0.063750
	-0.115313, -0.114063, -0.115938, -0.116875, -0.117500, -0.114688, -0.115313, -0.113125, -0.105625, -0.102813, -0.091563, -0.084375, -0.068125, -0.045313, -0.040000
	-0.108750, -0.104375, -0.104375, -0.105313, -0.105938, -0.105938, -0.105938, -0.104688, -0.096563, -0.091563, -0.083125, -0.066875, -0.065313, -0.030000, -0.034688
	-0.103125, -0.097188, -0.098125, -0.098125, -0.099063, -0.098750, -0.100313, -0.095313, -0.090938, -0.085313, -0.075625, -0.065625, -0.051563, -0.038125, -0.015938
	-0.096875, -0.095000, -0.094375, -0.095000, -0.093750, -0.094375, -0.093438, -0.088438, -0.086250, -0.076250, -0.070625, -0.057188, -0.044375, -0.033438, -0.018750
	-0.090625, -0.087813, -0.088125, -0.087813, -0.087500, -0.091875, -0.087188, -0.084688, -0.080625, -0.075000, -0.065000, -0.054375, -0.039688, -0.031563, -0.021250
	-0.091875, -0.089375, -0.087500, -0.089063, -0.086563, -0.089375, -0.088750, -0.085000, -0.083125, -0.076250, -0.069688, -0.060000, -0.045625, -0.037188, -0.020625
	-0.088438, -0.086563, -0.088125, -0.088438, -0.089375, -0.091563, -0.090000, -0.088125, -0.082188, -0.075313, -0.069688, -0.059375, -0.048125, -0.036250, -0.025625
	-0.089688, -0.090313, -0.086875, -0.087500, -0.090938, -0.088438, -0.090625, -0.089375, -0.084375, -0.077813, -0.072188, -0.061250, -0.050313, -0.040625, -0.024688
	-0.095313, -0.094063, -0.090938, -0.091563, -0.089688, -0.092500, -0.090313, -0.089375, -0.083125, -0.075313, -0.068750, -0.058125, -0.047500, -0.036563, -0.019688
	-0.098125, -0.097188, -0.098438, -0.093438, -0.095313, -0.095000, -0.091250, -0.090000, -0.085625, -0.079375, -0.068750, -0.056250, -0.045625, -0.034375, -0.020000
	-0.110313, -0.109063, -0.105625, -0.106563, -0.105313, -0.103750, -0.100938, -0.094688, -0.089063, -0.081875, -0.071250, -0.056875, -0.044688, -0.028125, -0.012813
	-0.116250, -0.111250, -0.107188, -0.106875, -0.103750, -0.101875, -0.097500, -0.092188, -0.083750, -0.076250, -0.065000, -0.052188, -0.038438, -0.022813, -0.005938
	-0.123750, -0.116875, -0.113750, -0.111563, -0.109063, -0.106563, -0.105625, -0.097500, -0.087500, -0.077813, -0.065313, -0.047813, -0.033438, -0.018438, -0.000313
x_count = 15
y_count = 15
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 239.88
min_y = 45.0
max_y = 290.0
=======================
Extruder max_extrude_ratio=0.266081
mcu 'mcu': Starting serial connect
webhooks client 281473018516720: New connection
webhooks client 281473018516720: Client info {'program': 'Moonraker', 'version': 'v0.8.0-327-g9447494'}
mcu 'mcu': got {'oid': 17, 'next_clock': 93145408, 'value': 31617, '#name': 'analog_in_state', '#sent_time': 1425.407257512, '#receive_time': 1425.442268012}
mcu 'mcu': got {'oid': 25, 'next_clock': 99865408, 'value': 31530, '#name': 'analog_in_state', '#sent_time': 1425.511453262, '#receive_time': 1425.522261637}
mcu 'mcu': got {'oid': 17, 'next_clock': 118345408, 'value': 31617, '#name': 'analog_in_state', '#sent_time': 1425.719415304, '#receive_time': 1425.74225672}
Loaded MCU 'mcu' 112 commands (v0.12.0-171-g2f6e94c9 / gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.35.2-2+14+b2) 2.35.2)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_spi0=PA25,PA26,PA27 BUS_PINS_twi0=PA18,PA17 BUS_PINS_twi1=PB13,PB12 BUS_PINS_usart0=PA10,PA11,PA17 BUS_PINS_usart1=PA12,PA13,PA16 BUS_PINS_usart2=PB21,PB20,PB24 CLOCK_FREQ=84000000 MCU=sam3x8e PWM_MAX=255 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Configured MCU 'mcu' (1024 moves)
Starting heater checks for heater_bed
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (26.0, 0.0)     | (10.0, 45.0)
  1   | (42.4, 0.0)     | (26.4, 45.0)
  2   | (58.8, 0.0)     | (42.8, 45.0)
  3   | (75.3, 0.0)     | (59.3, 45.0)
  4   | (91.7, 0.0)     | (75.7, 45.0)
  5   | (108.1, 0.0)    | (92.1, 45.0)
  6   | (124.5, 0.0)    | (108.5, 45.0)
  7   | (140.9, 0.0)    | (124.9, 45.0)
  8   | (157.4, 0.0)    | (141.4, 45.0)
  9   | (173.8, 0.0)    | (157.8, 45.0)
  10  | (190.2, 0.0)    | (174.2, 45.0)
  11  | (206.6, 0.0)    | (190.6, 45.0)
  12  | (223.0, 0.0)    | (207.0, 45.0)
  13  | (239.5, 0.0)    | (223.5, 45.0)
  14  | (255.9, 0.0)    | (239.9, 45.0)
  15  | (255.9, 17.5)   | (239.9, 62.5)
  16  | (239.5, 17.5)   | (223.5, 62.5)
  17  | (223.0, 17.5)   | (207.0, 62.5)
  18  | (206.6, 17.5)   | (190.6, 62.5)
  19  | (190.2, 17.5)   | (174.2, 62.5)
  20  | (173.8, 17.5)   | (157.8, 62.5)
  21  | (157.4, 17.5)   | (141.4, 62.5)
  22  | (140.9, 17.5)   | (124.9, 62.5)
  23  | (124.5, 17.5)   | (108.5, 62.5)
  24  | (108.1, 17.5)   | (92.1, 62.5)
  25  | (91.7, 17.5)    | (75.7, 62.5)
  26  | (75.3, 17.5)    | (59.3, 62.5)
  27  | (58.8, 17.5)    | (42.8, 62.5)
  28  | (42.4, 17.5)    | (26.4, 62.5)
  29  | (26.0, 17.5)    | (10.0, 62.5)
  30  | (26.0, 35.0)    | (10.0, 80.0)
  31  | (42.4, 35.0)    | (26.4, 80.0)
  32  | (58.8, 35.0)    | (42.8, 80.0)
  33  | (75.3, 35.0)    | (59.3, 80.0)
  34  | (91.7, 35.0)    | (75.7, 80.0)
  35  | (108.1, 35.0)   | (92.1, 80.0)
  36  | (124.5, 35.0)   | (108.5, 80.0)
  37  | (140.9, 35.0)   | (124.9, 80.0)
  38  | (157.4, 35.0)   | (141.4, 80.0)
  39  | (173.8, 35.0)   | (157.8, 80.0)
  40  | (190.2, 35.0)   | (174.2, 80.0)
  41  | (206.6, 35.0)   | (190.6, 80.0)
  42  | (223.0, 35.0)   | (207.0, 80.0)
  43  | (239.5, 35.0)   | (223.5, 80.0)
  44  | (255.9, 35.0)   | (239.9, 80.0)
  45  | (255.9, 52.5)   | (239.9, 97.5)
  46  | (239.5, 52.5)   | (223.5, 97.5)
  47  | (223.0, 52.5)   | (207.0, 97.5)
  48  | (206.6, 52.5)   | (190.6, 97.5)
  49  | (190.2, 52.5)   | (174.2, 97.5)
  50  | (173.8, 52.5)   | (157.8, 97.5)
  51  | (157.4, 52.5)   | (141.4, 97.5)
  52  | (140.9, 52.5)   | (124.9, 97.5)
  53  | (124.5, 52.5)   | (108.5, 97.5)
  54  | (108.1, 52.5)   | (92.1, 97.5)
  55  | (91.7, 52.5)    | (75.7, 97.5)
  56  | (75.3, 52.5)    | (59.3, 97.5)
  57  | (58.8, 52.5)    | (42.8, 97.5)
  58  | (42.4, 52.5)    | (26.4, 97.5)
  59  | (26.0, 52.5)    | (10.0, 97.5)
  60  | (26.0, 70.0)    | (10.0, 115.0)
  61  | (42.4, 70.0)    | (26.4, 115.0)
  62  | (58.8, 70.0)    | (42.8, 115.0)
  63  | (75.3, 70.0)    | (59.3, 115.0)
  64  | (91.7, 70.0)    | (75.7, 115.0)
  65  | (108.1, 70.0)   | (92.1, 115.0)
  66  | (124.5, 70.0)   | (108.5, 115.0)
  67  | (140.9, 70.0)   | (124.9, 115.0)
  68  | (157.4, 70.0)   | (141.4, 115.0)
  69  | (173.8, 70.0)   | (157.8, 115.0)
  70  | (190.2, 70.0)   | (174.2, 115.0)
  71  | (206.6, 70.0)   | (190.6, 115.0)
  72  | (223.0, 70.0)   | (207.0, 115.0)
  73  | (239.5, 70.0)   | (223.5, 115.0)
  74  | (255.9, 70.0)   | (239.9, 115.0)
  75  | (255.9, 87.5)   | (239.9, 132.5)
  76  | (239.5, 87.5)   | (223.5, 132.5)
  77  | (223.0, 87.5)   | (207.0, 132.5)
  78  | (206.6, 87.5)   | (190.6, 132.5)
  79  | (190.2, 87.5)   | (174.2, 132.5)
  80  | (173.8, 87.5)   | (157.8, 132.5)
  81  | (157.4, 87.5)   | (141.4, 132.5)
  82  | (140.9, 87.5)   | (124.9, 132.5)
  83  | (124.5, 87.5)   | (108.5, 132.5)
  84  | (108.1, 87.5)   | (92.1, 132.5)
  85  | (91.7, 87.5)    | (75.7, 132.5)
  86  | (75.3, 87.5)    | (59.3, 132.5)
  87  | (58.8, 87.5)    | (42.8, 132.5)
  88  | (42.4, 87.5)    | (26.4, 132.5)
  89  | (26.0, 87.5)    | (10.0, 132.5)
  90  | (26.0, 105.0)   | (10.0, 150.0)
  91  | (42.4, 105.0)   | (26.4, 150.0)
  92  | (58.8, 105.0)   | (42.8, 150.0)
  93  | (75.3, 105.0)   | (59.3, 150.0)
  94  | (91.7, 105.0)   | (75.7, 150.0)
  95  | (108.1, 105.0)  | (92.1, 150.0)
  96  | (124.5, 105.0)  | (108.5, 150.0)
  97  | (140.9, 105.0)  | (124.9, 150.0)
  98  | (157.4, 105.0)  | (141.4, 150.0)
  99  | (173.8, 105.0)  | (157.8, 150.0)
  100 | (190.2, 105.0)  | (174.2, 150.0)
  101 | (206.6, 105.0)  | (190.6, 150.0)
  102 | (223.0, 105.0)  | (207.0, 150.0)
  103 | (239.5, 105.0)  | (223.5, 150.0)
  104 | (255.9, 105.0)  | (239.9, 150.0)
  105 | (255.9, 122.5)  | (239.9, 167.5)
  106 | (239.5, 122.5)  | (223.5, 167.5)
  107 | (223.0, 122.5)  | (207.0, 167.5)
  108 | (206.6, 122.5)  | (190.6, 167.5)
  109 | (190.2, 122.5)  | (174.2, 167.5)
  110 | (173.8, 122.5)  | (157.8, 167.5)
  111 | (157.4, 122.5)  | (141.4, 167.5)
  112 | (140.9, 122.5)  | (124.9, 167.5)
  113 | (124.5, 122.5)  | (108.5, 167.5)
  114 | (108.1, 122.5)  | (92.1, 167.5)
  115 | (91.7, 122.5)   | (75.7, 167.5)
  116 | (75.3, 122.5)   | (59.3, 167.5)
  117 | (58.8, 122.5)   | (42.8, 167.5)
  118 | (42.4, 122.5)   | (26.4, 167.5)
  119 | (26.0, 122.5)   | (10.0, 167.5)
  120 | (26.0, 140.0)   | (10.0, 185.0)
  121 | (42.4, 140.0)   | (26.4, 185.0)
  122 | (58.8, 140.0)   | (42.8, 185.0)
  123 | (75.3, 140.0)   | (59.3, 185.0)
  124 | (91.7, 140.0)   | (75.7, 185.0)
  125 | (108.1, 140.0)  | (92.1, 185.0)
  126 | (124.5, 140.0)  | (108.5, 185.0)
  127 | (140.9, 140.0)  | (124.9, 185.0)
  128 | (157.4, 140.0)  | (141.4, 185.0)
  129 | (173.8, 140.0)  | (157.8, 185.0)
  130 | (190.2, 140.0)  | (174.2, 185.0)
  131 | (206.6, 140.0)  | (190.6, 185.0)
  132 | (223.0, 140.0)  | (207.0, 185.0)
  133 | (239.5, 140.0)  | (223.5, 185.0)
  134 | (255.9, 140.0)  | (239.9, 185.0)
  135 | (255.9, 157.5)  | (239.9, 202.5)
  136 | (239.5, 157.5)  | (223.5, 202.5)
  137 | (223.0, 157.5)  | (207.0, 202.5)
  138 | (206.6, 157.5)  | (190.6, 202.5)
  139 | (190.2, 157.5)  | (174.2, 202.5)
  140 | (173.8, 157.5)  | (157.8, 202.5)
  141 | (157.4, 157.5)  | (141.4, 202.5)
  142 | (140.9, 157.5)  | (124.9, 202.5)
  143 | (124.5, 157.5)  | (108.5, 202.5)
  144 | (108.1, 157.5)  | (92.1, 202.5)
  145 | (91.7, 157.5)   | (75.7, 202.5)
  146 | (75.3, 157.5)   | (59.3, 202.5)
  147 | (58.8, 157.5)   | (42.8, 202.5)
  148 | (42.4, 157.5)   | (26.4, 202.5)
  149 | (26.0, 157.5)   | (10.0, 202.5)
  150 | (26.0, 175.0)   | (10.0, 220.0)
  151 | (42.4, 175.0)   | (26.4, 220.0)
  152 | (58.8, 175.0)   | (42.8, 220.0)
  153 | (75.3, 175.0)   | (59.3, 220.0)
  154 | (91.7, 175.0)   | (75.7, 220.0)
  155 | (108.1, 175.0)  | (92.1, 220.0)
  156 | (124.5, 175.0)  | (108.5, 220.0)
  157 | (140.9, 175.0)  | (124.9, 220.0)
  158 | (157.4, 175.0)  | (141.4, 220.0)
  159 | (173.8, 175.0)  | (157.8, 220.0)
  160 | (190.2, 175.0)  | (174.2, 220.0)
  161 | (206.6, 175.0)  | (190.6, 220.0)
  162 | (223.0, 175.0)  | (207.0, 220.0)
  163 | (239.5, 175.0)  | (223.5, 220.0)
  164 | (255.9, 175.0)  | (239.9, 220.0)
  165 | (255.9, 192.5)  | (239.9, 237.5)
  166 | (239.5, 192.5)  | (223.5, 237.5)
  167 | (223.0, 192.5)  | (207.0, 237.5)
  168 | (206.6, 192.5)  | (190.6, 237.5)
  169 | (190.2, 192.5)  | (174.2, 237.5)
  170 | (173.8, 192.5)  | (157.8, 237.5)
  171 | (157.4, 192.5)  | (141.4, 237.5)
  172 | (140.9, 192.5)  | (124.9, 237.5)
  173 | (124.5, 192.5)  | (108.5, 237.5)
  174 | (108.1, 192.5)  | (92.1, 237.5)
  175 | (91.7, 192.5)   | (75.7, 237.5)
  176 | (75.3, 192.5)   | (59.3, 237.5)
  177 | (58.8, 192.5)   | (42.8, 237.5)
  178 | (42.4, 192.5)   | (26.4, 237.5)
  179 | (26.0, 192.5)   | (10.0, 237.5)
  180 | (26.0, 210.0)   | (10.0, 255.0)
  181 | (42.4, 210.0)   | (26.4, 255.0)
  182 | (58.8, 210.0)   | (42.8, 255.0)
  183 | (75.3, 210.0)   | (59.3, 255.0)
  184 | (91.7, 210.0)   | (75.7, 255.0)
  185 | (108.1, 210.0)  | (92.1, 255.0)
  186 | (124.5, 210.0)  | (108.5, 255.0)
  187 | (140.9, 210.0)  | (124.9, 255.0)
  188 | (157.4, 210.0)  | (141.4, 255.0)
  189 | (173.8, 210.0)  | (157.8, 255.0)
  190 | (190.2, 210.0)  | (174.2, 255.0)
  191 | (206.6, 210.0)  | (190.6, 255.0)
  192 | (223.0, 210.0)  | (207.0, 255.0)
  193 | (239.5, 210.0)  | (223.5, 255.0)
  194 | (255.9, 210.0)  | (239.9, 255.0)
  195 | (255.9, 227.5)  | (239.9, 272.5)
  196 | (239.5, 227.5)  | (223.5, 272.5)
  197 | (223.0, 227.5)  | (207.0, 272.5)
  198 | (206.6, 227.5)  | (190.6, 272.5)
  199 | (190.2, 227.5)  | (174.2, 272.5)
  200 | (173.8, 227.5)  | (157.8, 272.5)
  201 | (157.4, 227.5)  | (141.4, 272.5)
  202 | (140.9, 227.5)  | (124.9, 272.5)
  203 | (124.5, 227.5)  | (108.5, 272.5)
  204 | (108.1, 227.5)  | (92.1, 272.5)
  205 | (91.7, 227.5)   | (75.7, 272.5)
  206 | (75.3, 227.5)   | (59.3, 272.5)
  207 | (58.8, 227.5)   | (42.8, 272.5)
  208 | (42.4, 227.5)   | (26.4, 272.5)
  209 | (26.0, 227.5)   | (10.0, 272.5)
  210 | (26.0, 245.0)   | (10.0, 290.0)
  211 | (42.4, 245.0)   | (26.4, 290.0)
  212 | (58.8, 245.0)   | (42.8, 290.0)
  213 | (75.3, 245.0)   | (59.3, 290.0)
  214 | (91.7, 245.0)   | (75.7, 290.0)
  215 | (108.1, 245.0)  | (92.1, 290.0)
  216 | (124.5, 245.0)  | (108.5, 290.0)
  217 | (140.9, 245.0)  | (124.9, 290.0)
  218 | (157.4, 245.0)  | (141.4, 290.0)
  219 | (173.8, 245.0)  | (157.8, 290.0)
  220 | (190.2, 245.0)  | (174.2, 290.0)
  221 | (206.6, 245.0)  | (190.6, 290.0)
  222 | (223.0, 245.0)  | (207.0, 290.0)
  223 | (239.5, 245.0)  | (223.5, 290.0)
  224 | (255.9, 245.0)  | (239.9, 290.0)
Starting heater checks for extruder
webhooks: registering remote method 'shutdown_machine' for connection id: 281473018516720
webhooks: registering remote method 'reboot_machine' for connection id: 281473018516720
webhooks: registering remote method 'pause_job_queue' for connection id: 281473018516720
webhooks: registering remote method 'start_job_queue' for connection id: 281473018516720
Starting Klippy...
Args: ['/home/biqu/klipper/klippy/klippy.py', '/home/biqu/printer_data/config/printer.cfg', '-I', '/home/biqu/printer_data/comms/klippy.serial', '-l', '/home/biqu/printer_data/logs/klippy.log', '-a', '/home/biqu/printer_data/comms/klippy.sock']
Git version: 'v0.12.0-171-g2f6e94c9'
Branch: master
Remote: origin
Tracked URL: https://github.com/Klipper3d/klipper
CPU: 4 core ?
Python: '3.9.2 (default, Feb 28 2021, 17:03:44) \n[GCC 10.2.1 20210110]'
Start printer at Wed Apr 24 17:22:20 2024 (1713993740.4 1812.0)
===== Config file =====
[mcu]
serial = /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set allow_park = client.park_at_cancel|default(false)|lower == 'true' %}
	{% set retract = client.cancel_retract|default(5.0)|abs %}
	
	{% set park_x = "" if (client.park_at_cancel_x|default(none) is none)
	else "X=" ~ client.park_at_cancel_x %}
	{% set park_y = "" if (client.park_at_cancel_y|default(none) is none)
	else "Y=" ~ client.park_at_cancel_y %}
	{% set custom_park = park_x|length > 0 or park_y|length > 0 %}
	
	
	{% if printer['gcode_macro RESUME'].restore_idle_timeout > 0 %}
	SET_IDLE_TIMEOUT TIMEOUT={printer['gcode_macro RESUME'].restore_idle_timeout}
	{% endif %}
	{% if (custom_park or not printer.pause_resume.is_paused) and allow_park %} _TOOLHEAD_PARK_PAUSE_CANCEL {park_x} {park_y} {% endif %}
	_CLIENT_RETRACT LENGTH={retract}
	TURN_OFF_HEATERS
	M106 S0
	{client.user_cancel_macro|default("")}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	
	SET_PAUSE_NEXT_LAYER ENABLE=0
	SET_PAUSE_AT_LAYER ENABLE=0 LAYER=0
	CANCEL_PRINT_BASE

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set idle_timeout = client.idle_timeout|default(0) %}
	{% set temp = printer[printer.toolhead.extruder].target if printer.toolhead.extruder != '' else 0 %}
	{% set restore = False if printer.toolhead.extruder == ''
	else True  if params.RESTORE|default(1)|int == 1 else False %}
	
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=last_extruder_temp VALUE="{{'restore': restore, 'temp': temp}}"
	
	{% if idle_timeout > 0 %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=restore_idle_timeout VALUE={printer.configfile.settings.idle_timeout.timeout}
	SET_IDLE_TIMEOUT TIMEOUT={idle_timeout}
	{% endif %}
	PAUSE_BASE
	{client.user_pause_macro|default("")}
	_TOOLHEAD_PARK_PAUSE_CANCEL {rawparams}

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set sp_move = client.speed_move|default(velocity) %}
	{% set runout_resume = True if client.runout_sensor|default("") == ""
	else True if not printer[client.runout_sensor].enabled
	else printer[client.runout_sensor].filament_detected %}
	{% set can_extrude = True if printer.toolhead.extruder == ''
	else printer[printer.toolhead.extruder].can_extrude %}
	{% set do_resume = False %}
	{% set prompt_txt = [] %}
	
	
	{% if printer.idle_timeout.state|upper == "IDLE" or idle_state %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	{% if last_extruder_temp.restore %}
	
	RESPOND TYPE=echo MSG='{"Restoring \"%s\" temperature to %3.1f\u00B0C, this may take some time" % (printer.toolhead.extruder, last_extruder_temp.temp) }'
	M109 S{last_extruder_temp.temp}
	{% set do_resume = True %}
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	{% if runout_resume %}
	{% if do_resume %}
	{% if restore_idle_timeout > 0 %} SET_IDLE_TIMEOUT TIMEOUT={restore_idle_timeout} {% endif %}
	{client.user_resume_macro|default("")}
	_CLIENT_EXTRUDE
	RESUME_BASE VELOCITY={params.VELOCITY|default(sp_move)}
	{% endif %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]}'
	{% set _d = prompt_txt.append("\"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]) %}
	{% endif %}
	
	{% if not (runout_resume and do_resume) %}
	RESPOND TYPE=command MSG="action:prompt_begin RESUME aborted !!!"
	{% for element in prompt_txt %}
	RESPOND TYPE=command MSG='{"action:prompt_text %s" % element}'
	{% endfor %}
	RESPOND TYPE=command MSG="action:prompt_footer_button Ok|RESPOND TYPE=command MSG=action:prompt_end|info"
	RESPOND TYPE=command MSG="action:prompt_show"
	{% endif %}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[filament_switch_sensor switch_sensor]
switch_pin = ^PB16
pause_on_runout = True
runout_gcode = 
insert_gcode = 

[filament_motion_sensor encoder_sensor]
switch_pin = PB15
detection_length = 3
extruder = extruder
pause_on_runout = False
runout_gcode = 

[gcode_macro PROBE_DOWN]
gcode = 
	SET_PIN PIN=probe_enable VALUE=1

[gcode_macro PROBE_UP]
gcode = 
	SET_PIN PIN=probe_enable VALUE=0

[output_pin probe_enable]
pin = PB12
value = 0

[probe]
pin = ^!PA7
deactivate_on_each_sample = False
x_offset = -16
y_offset = 45
samples = 2
samples_tolerance = 0.05
samples_tolerance_retries = 3
activate_gcode = 
	PROBE_DOWN
	G4 P500
deactivate_gcode = 
	PROBE_UP
z_offset = 0.570

[mcu CB1]
serial = /tmp/klipper_host_mcu

[adxl345]
cs_pin = CB1:None
spi_bus = spidev1.1
axes_map = x,y,z

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 9000
max_z_velocity = 7
max_z_accel = 100

[input_shaper]

[stepper_x]
step_pin = PC6
dir_pin = PC5
enable_pin = !PC9
microsteps = 16
rotation_distance = 32
endstop_pin = ^PD4
position_endstop = -15
position_max = 300
position_min = -15
homing_speed = 75

[tmc2130 stepper_x]
cs_pin = PC7
run_current = .75
sense_resistor = 0.120
diag1_pin = !PA4
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[stepper_y]
step_pin = PC12
dir_pin = !PC11
enable_pin = !PC14
microsteps = 16
rotation_distance = 32
endstop_pin = PD6
position_endstop = -10
position_max = 303
position_min = -10
homing_speed = 75

[tmc2130 stepper_y]
cs_pin = PC13
run_current = .75
sense_resistor = 0.120
diag1_pin = !PC15
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[stepper_z]
step_pin = PC17
dir_pin = PC16
enable_pin = !PC19
microsteps = 16
rotation_distance = 2
endstop_pin = probe:z_virtual_endstop
position_max = 265
position_min = -3
homing_speed = 5

[tmc2130 stepper_z]
cs_pin = PC18
run_current = .80
sense_resistor = 0.120
diag1_pin = PC4
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[safe_z_home]
home_xy_position = 166,105
speed = 100
z_hop = 10
z_hop_speed = 100

[extruder]
step_pin = PB10
dir_pin = !PC10
enable_pin = !PB22
microsteps = 16
rotation_distance = 7.81
nozzle_diameter = 0.400
filament_diameter = 1.75
heater_pin = PC24
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB19
min_temp = 0
max_temp = 285
min_extrude_temp = 120
max_extrude_only_distance = 140.0
pressure_advance = .0525
control = pid
pid_kp = 23.681
pid_ki = 1.152
pid_kd = 121.659

[tmc2130 extruder]
cs_pin = PC20
run_current = .75
sense_resistor = 0.120
diag1_pin = !PB23
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[heater_bed]
heater_pin = PC21
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PB20
control = pid
pid_kp = 21
pid_ki = 1.78
pid_kd = 61.93
min_temp = 0
max_temp = 130

[fan]
pin = PC23

[heater_fan nozzle_cooling_fan]
pin = PC25

[display]
lcd_type = st7920
cs_pin = EXP1_4
sclk_pin = EXP1_5
sid_pin = EXP1_3
encoder_pins = ^EXP2_3, ^EXP2_5
click_pin = ^!EXP1_2

[output_pin beeper]
pin = EXP1_1

[board_pins]
aliases = 
	
	EXP1_1=PA14, EXP1_3=PA15, EXP1_5=PA0,  EXP1_7=PA1, EXP1_9=<GND>,
	EXP1_2=PA13, EXP1_4=PA12, EXP1_6=PA16, EXP1_8=PC2, EXP1_10=<5V>,
	
	EXP2_1=PA25, EXP2_3=PB27, EXP2_5=PA3,  EXP2_7=PB25,  EXP2_9=<GND>,
	EXP2_2=PA27, EXP2_4=PA29, EXP2_6=PA26, EXP2_8=<RST>, EXP2_10=<3.3V>

[bed_mesh]
speed = 300
horizontal_move_z = 10
mesh_min = 10, 45
mesh_max = 240, 290
fade_start = 0.6
fade_end = 10.0
probe_count = 15, 15
algorithm = bicubic

[bed_mesh default]
version = 1
points = 
	0.052187, -0.014375, -0.081250, -0.137813, -0.181875
	0.022500, -0.009688, -0.045938, -0.074375, -0.095000
	-0.007500, -0.018438, -0.033750, -0.041875, -0.046875
	-0.055938, -0.047500, -0.044375, -0.030938, -0.010938
	-0.105313, -0.074375, -0.049063, -0.007500, 0.040000
x_count = 5
y_count = 5
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 240.0
min_y = 45.0
max_y = 290.0

[bed_mesh 60degree]
version = 1
points = 
	-0.137188, -0.132500, -0.130000, -0.134063, -0.134375, -0.136875, -0.135313, -0.132500, -0.135000, -0.132500, -0.125000, -0.115938, -0.106250, -0.093125, -0.075313
	-0.124688, -0.121875, -0.123750, -0.111563, -0.129063, -0.126875, -0.125625, -0.123125, -0.120625, -0.113125, -0.105000, -0.098750, -0.087500, -0.073125, -0.063750
	-0.115313, -0.114063, -0.115938, -0.116875, -0.117500, -0.114688, -0.115313, -0.113125, -0.105625, -0.102813, -0.091563, -0.084375, -0.068125, -0.045313, -0.040000
	-0.108750, -0.104375, -0.104375, -0.105313, -0.105938, -0.105938, -0.105938, -0.104688, -0.096563, -0.091563, -0.083125, -0.066875, -0.065313, -0.030000, -0.034688
	-0.103125, -0.097188, -0.098125, -0.098125, -0.099063, -0.098750, -0.100313, -0.095313, -0.090938, -0.085313, -0.075625, -0.065625, -0.051563, -0.038125, -0.015938
	-0.096875, -0.095000, -0.094375, -0.095000, -0.093750, -0.094375, -0.093438, -0.088438, -0.086250, -0.076250, -0.070625, -0.057188, -0.044375, -0.033438, -0.018750
	-0.090625, -0.087813, -0.088125, -0.087813, -0.087500, -0.091875, -0.087188, -0.084688, -0.080625, -0.075000, -0.065000, -0.054375, -0.039688, -0.031563, -0.021250
	-0.091875, -0.089375, -0.087500, -0.089063, -0.086563, -0.089375, -0.088750, -0.085000, -0.083125, -0.076250, -0.069688, -0.060000, -0.045625, -0.037188, -0.020625
	-0.088438, -0.086563, -0.088125, -0.088438, -0.089375, -0.091563, -0.090000, -0.088125, -0.082188, -0.075313, -0.069688, -0.059375, -0.048125, -0.036250, -0.025625
	-0.089688, -0.090313, -0.086875, -0.087500, -0.090938, -0.088438, -0.090625, -0.089375, -0.084375, -0.077813, -0.072188, -0.061250, -0.050313, -0.040625, -0.024688
	-0.095313, -0.094063, -0.090938, -0.091563, -0.089688, -0.092500, -0.090313, -0.089375, -0.083125, -0.075313, -0.068750, -0.058125, -0.047500, -0.036563, -0.019688
	-0.098125, -0.097188, -0.098438, -0.093438, -0.095313, -0.095000, -0.091250, -0.090000, -0.085625, -0.079375, -0.068750, -0.056250, -0.045625, -0.034375, -0.020000
	-0.110313, -0.109063, -0.105625, -0.106563, -0.105313, -0.103750, -0.100938, -0.094688, -0.089063, -0.081875, -0.071250, -0.056875, -0.044688, -0.028125, -0.012813
	-0.116250, -0.111250, -0.107188, -0.106875, -0.103750, -0.101875, -0.097500, -0.092188, -0.083750, -0.076250, -0.065000, -0.052188, -0.038438, -0.022813, -0.005938
	-0.123750, -0.116875, -0.113750, -0.111563, -0.109063, -0.106563, -0.105625, -0.097500, -0.087500, -0.077813, -0.065313, -0.047813, -0.033438, -0.018438, -0.000313
x_count = 15
y_count = 15
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 239.88
min_y = 45.0
max_y = 290.0
=======================
Extruder max_extrude_ratio=0.266081
mcu 'mcu': Starting serial connect
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
webhooks client 281473647554224: New connection
webhooks client 281473647554224: Client info {'program': 'Moonraker', 'version': 'v0.8.0-327-g9447494'}
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
MCU error during connect
Traceback (most recent call last):
  File "/home/biqu/klipper/klippy/mcu.py", line 791, in _mcu_identify
    self._serial.connect_uart(self._serialport, self._baud, rts)
  File "/home/biqu/klipper/klippy/serialhdl.py", line 182, in connect_uart
    self._error("Unable to connect")
  File "/home/biqu/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'mcu': Unable to connect

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/biqu/klipper/klippy/klippy.py", line 176, in _connect
    self.send_event("klippy:mcu_identify")
  File "/home/biqu/klipper/klippy/klippy.py", line 263, in send_event
    return [cb(*params) for cb in self.event_handlers.get(event, [])]
  File "/home/biqu/klipper/klippy/klippy.py", line 263, in <listcomp>
    return [cb(*params) for cb in self.event_handlers.get(event, [])]
  File "/home/biqu/klipper/klippy/mcu.py", line 796, in _mcu_identify
    raise error(str(e))
mcu.error: mcu 'mcu': Unable to connect
Build file /home/biqu/klipper/klippy/../.config(1515): Wed Apr 24 17:18:38 2024
========= Last MCU build config =========
# CONFIG_LOW_LEVEL_OPTIONS is not set
# CONFIG_MACH_AVR is not set
CONFIG_MACH_ATSAM=y
# CONFIG_MACH_ATSAMD is not set
# CONFIG_MACH_LPC176X is not set
# CONFIG_MACH_STM32 is not set
# CONFIG_MACH_HC32F460 is not set
# CONFIG_MACH_RP2040 is not set
# CONFIG_MACH_PRU is not set
# CONFIG_MACH_AR100 is not set
# CONFIG_MACH_LINUX is not set
# CONFIG_MACH_SIMU is not set
CONFIG_BOARD_DIRECTORY="atsam"
CONFIG_MCU="sam3x8e"
CONFIG_CLOCK_FREQ=84000000
CONFIG_USBSERIAL=y
CONFIG_ATSAM_SELECT=y
CONFIG_MACH_SAM3X8E=y
# CONFIG_MACH_SAM3X8C is not set
# CONFIG_MACH_SAM4S8C is not set
# CONFIG_MACH_SAM4E8E is not set
# CONFIG_MACH_SAME70Q20B is not set
CONFIG_MACH_SAM3X=y
CONFIG_FLASH_SIZE=0x80000
CONFIG_FLASH_BOOT_ADDRESS=0x0
CONFIG_RAM_START=0x20000000
CONFIG_RAM_SIZE=0x18000
CONFIG_STACK_SIZE=512
CONFIG_FLASH_APPLICATION_ADDRESS=0x80000
CONFIG_ATSAM_USB=y
# CONFIG_ATSAM_SERIAL is not set
CONFIG_USB=y
CONFIG_USB_VENDOR_ID=0x1d50
CONFIG_USB_DEVICE_ID=0x614e
CONFIG_USB_SERIAL_NUMBER_CHIPID=y
CONFIG_USB_SERIAL_NUMBER="12345"
CONFIG_WANT_GPIO_BITBANGING=y
CONFIG_WANT_DISPLAYS=y
CONFIG_WANT_SENSORS=y
CONFIG_WANT_LIS2DW=y
CONFIG_WANT_LDC1612=y
CONFIG_WANT_SOFTWARE_I2C=y
CONFIG_WANT_SOFTWARE_SPI=y
CONFIG_NEED_SENSOR_BULK=y
CONFIG_CANBUS_FREQUENCY=1000000
CONFIG_HAVE_GPIO=y
CONFIG_HAVE_GPIO_ADC=y
CONFIG_HAVE_GPIO_SPI=y
CONFIG_HAVE_GPIO_I2C=y
CONFIG_HAVE_GPIO_HARD_PWM=y
CONFIG_HAVE_STRICT_TIMING=y
CONFIG_HAVE_CHIPID=y
CONFIG_HAVE_STEPPER_BOTH_EDGE=y
CONFIG_HAVE_BOOTLOADER_REQUEST=y
CONFIG_INLINE_STEPPER_HACK=y
=======================
Build file /home/biqu/klipper/klippy/../out/klipper.dict(7778): Wed Apr 24 17:19:22 2024
Last MCU build version: v0.12.0-171-g2f6e94c9
Last MCU build tools: gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.35.2-2+14+b2) 2.35.2
Last MCU build config: ADC_MAX=4095 BUS_PINS_spi0=PA25,PA26,PA27 BUS_PINS_twi0=PA18,PA17 BUS_PINS_twi1=PB13,PB12 BUS_PINS_usart0=PA10,PA11,PA17 BUS_PINS_usart1=PA12,PA13,PA16 BUS_PINS_usart2=PB21,PB20,PB24 CLOCK_FREQ=84000000 MCU=sam3x8e PWM_MAX=255 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Build file /home/biqu/klipper/klippy/../out/klipper.elf(1068496): Wed Apr 24 17:19:39 2024
Attempting MCU 'mcu' reset
Unhandled exception during post run
Traceback (most recent call last):
  File "/home/biqu/klippy-env/lib/python3.9/site-packages/serial/serialposix.py", line 265, in open
    self.fd = os.open(self.portstr, os.O_RDWR | os.O_NOCTTY | os.O_NONBLOCK)
FileNotFoundError: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/biqu/klipper/klippy/klippy.py", line 234, in run
    self.send_event("klippy:firmware_restart")
  File "/home/biqu/klipper/klippy/klippy.py", line 263, in send_event
    return [cb(*params) for cb in self.event_handlers.get(event, [])]
  File "/home/biqu/klipper/klippy/klippy.py", line 263, in <listcomp>
    return [cb(*params) for cb in self.event_handlers.get(event, [])]
  File "/home/biqu/klipper/klippy/mcu.py", line 953, in _firmware_restart
    self._restart_arduino()
  File "/home/biqu/klipper/klippy/mcu.py", line 913, in _restart_arduino
    serialhdl.arduino_reset(self._serialport, self._reactor)
  File "/home/biqu/klipper/klippy/serialhdl.py", line 379, in arduino_reset
    ser = serial.Serial(serialport, 2400, timeout=0, exclusive=True)
  File "/home/biqu/klippy-env/lib/python3.9/site-packages/serial/serialutil.py", line 240, in __init__
    self.open()
  File "/home/biqu/klippy-env/lib/python3.9/site-packages/serial/serialposix.py", line 268, in open
    raise SerialException(msg.errno, "could not open port {}: {}".format(self._port, msg))
serial.serialutil.SerialException: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
Restarting printer
Start printer at Wed Apr 24 17:47:56 2024 (1713995276.9 3348.4)
===== Config file =====
[mcu]
serial = /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set allow_park = client.park_at_cancel|default(false)|lower == 'true' %}
	{% set retract = client.cancel_retract|default(5.0)|abs %}
	
	{% set park_x = "" if (client.park_at_cancel_x|default(none) is none)
	else "X=" ~ client.park_at_cancel_x %}
	{% set park_y = "" if (client.park_at_cancel_y|default(none) is none)
	else "Y=" ~ client.park_at_cancel_y %}
	{% set custom_park = park_x|length > 0 or park_y|length > 0 %}
	
	
	{% if printer['gcode_macro RESUME'].restore_idle_timeout > 0 %}
	SET_IDLE_TIMEOUT TIMEOUT={printer['gcode_macro RESUME'].restore_idle_timeout}
	{% endif %}
	{% if (custom_park or not printer.pause_resume.is_paused) and allow_park %} _TOOLHEAD_PARK_PAUSE_CANCEL {park_x} {park_y} {% endif %}
	_CLIENT_RETRACT LENGTH={retract}
	TURN_OFF_HEATERS
	M106 S0
	{client.user_cancel_macro|default("")}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	
	SET_PAUSE_NEXT_LAYER ENABLE=0
	SET_PAUSE_AT_LAYER ENABLE=0 LAYER=0
	CANCEL_PRINT_BASE

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set idle_timeout = client.idle_timeout|default(0) %}
	{% set temp = printer[printer.toolhead.extruder].target if printer.toolhead.extruder != '' else 0 %}
	{% set restore = False if printer.toolhead.extruder == ''
	else True  if params.RESTORE|default(1)|int == 1 else False %}
	
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=last_extruder_temp VALUE="{{'restore': restore, 'temp': temp}}"
	
	{% if idle_timeout > 0 %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=restore_idle_timeout VALUE={printer.configfile.settings.idle_timeout.timeout}
	SET_IDLE_TIMEOUT TIMEOUT={idle_timeout}
	{% endif %}
	PAUSE_BASE
	{client.user_pause_macro|default("")}
	_TOOLHEAD_PARK_PAUSE_CANCEL {rawparams}

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set sp_move = client.speed_move|default(velocity) %}
	{% set runout_resume = True if client.runout_sensor|default("") == ""
	else True if not printer[client.runout_sensor].enabled
	else printer[client.runout_sensor].filament_detected %}
	{% set can_extrude = True if printer.toolhead.extruder == ''
	else printer[printer.toolhead.extruder].can_extrude %}
	{% set do_resume = False %}
	{% set prompt_txt = [] %}
	
	
	{% if printer.idle_timeout.state|upper == "IDLE" or idle_state %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	{% if last_extruder_temp.restore %}
	
	RESPOND TYPE=echo MSG='{"Restoring \"%s\" temperature to %3.1f\u00B0C, this may take some time" % (printer.toolhead.extruder, last_extruder_temp.temp) }'
	M109 S{last_extruder_temp.temp}
	{% set do_resume = True %}
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	{% if runout_resume %}
	{% if do_resume %}
	{% if restore_idle_timeout > 0 %} SET_IDLE_TIMEOUT TIMEOUT={restore_idle_timeout} {% endif %}
	{client.user_resume_macro|default("")}
	_CLIENT_EXTRUDE
	RESUME_BASE VELOCITY={params.VELOCITY|default(sp_move)}
	{% endif %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]}'
	{% set _d = prompt_txt.append("\"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]) %}
	{% endif %}
	
	{% if not (runout_resume and do_resume) %}
	RESPOND TYPE=command MSG="action:prompt_begin RESUME aborted !!!"
	{% for element in prompt_txt %}
	RESPOND TYPE=command MSG='{"action:prompt_text %s" % element}'
	{% endfor %}
	RESPOND TYPE=command MSG="action:prompt_footer_button Ok|RESPOND TYPE=command MSG=action:prompt_end|info"
	RESPOND TYPE=command MSG="action:prompt_show"
	{% endif %}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[filament_switch_sensor switch_sensor]
switch_pin = ^PB16
pause_on_runout = True
runout_gcode = 
insert_gcode = 

[filament_motion_sensor encoder_sensor]
switch_pin = PB15
detection_length = 3
extruder = extruder
pause_on_runout = False
runout_gcode = 

[gcode_macro PROBE_DOWN]
gcode = 
	SET_PIN PIN=probe_enable VALUE=1

[gcode_macro PROBE_UP]
gcode = 
	SET_PIN PIN=probe_enable VALUE=0

[output_pin probe_enable]
pin = PB12
value = 0

[probe]
pin = ^!PA7
deactivate_on_each_sample = False
x_offset = -16
y_offset = 45
samples = 2
samples_tolerance = 0.05
samples_tolerance_retries = 3
activate_gcode = 
	PROBE_DOWN
	G4 P500
deactivate_gcode = 
	PROBE_UP
z_offset = 0.570

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 9000
max_z_velocity = 7
max_z_accel = 100

[input_shaper]

[stepper_x]
step_pin = PC6
dir_pin = PC5
enable_pin = !PC9
microsteps = 16
rotation_distance = 32
endstop_pin = ^PD4
position_endstop = -15
position_max = 300
position_min = -15
homing_speed = 75

[tmc2130 stepper_x]
cs_pin = PC7
run_current = .75
sense_resistor = 0.120
diag1_pin = !PA4
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[stepper_y]
step_pin = PC12
dir_pin = !PC11
enable_pin = !PC14
microsteps = 16
rotation_distance = 32
endstop_pin = PD6
position_endstop = -10
position_max = 303
position_min = -10
homing_speed = 75

[tmc2130 stepper_y]
cs_pin = PC13
run_current = .75
sense_resistor = 0.120
diag1_pin = !PC15
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[stepper_z]
step_pin = PC17
dir_pin = PC16
enable_pin = !PC19
microsteps = 16
rotation_distance = 2
endstop_pin = probe:z_virtual_endstop
position_max = 265
position_min = -3
homing_speed = 5

[tmc2130 stepper_z]
cs_pin = PC18
run_current = .80
sense_resistor = 0.120
diag1_pin = PC4
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[safe_z_home]
home_xy_position = 166,105
speed = 100
z_hop = 10
z_hop_speed = 100

[extruder]
step_pin = PB10
dir_pin = !PC10
enable_pin = !PB22
microsteps = 16
rotation_distance = 7.81
nozzle_diameter = 0.400
filament_diameter = 1.75
heater_pin = PC24
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB19
min_temp = 0
max_temp = 285
min_extrude_temp = 120
max_extrude_only_distance = 140.0
pressure_advance = .0525
control = pid
pid_kp = 23.681
pid_ki = 1.152
pid_kd = 121.659

[tmc2130 extruder]
cs_pin = PC20
run_current = .75
sense_resistor = 0.120
diag1_pin = !PB23
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[heater_bed]
heater_pin = PC21
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PB20
control = pid
pid_kp = 21
pid_ki = 1.78
pid_kd = 61.93
min_temp = 0
max_temp = 130

[fan]
pin = PC23

[heater_fan nozzle_cooling_fan]
pin = PC25

[display]
lcd_type = st7920
cs_pin = EXP1_4
sclk_pin = EXP1_5
sid_pin = EXP1_3
encoder_pins = ^EXP2_3, ^EXP2_5
click_pin = ^!EXP1_2

[output_pin beeper]
pin = EXP1_1

[board_pins]
aliases = 
	
	EXP1_1=PA14, EXP1_3=PA15, EXP1_5=PA0,  EXP1_7=PA1, EXP1_9=<GND>,
	EXP1_2=PA13, EXP1_4=PA12, EXP1_6=PA16, EXP1_8=PC2, EXP1_10=<5V>,
	
	EXP2_1=PA25, EXP2_3=PB27, EXP2_5=PA3,  EXP2_7=PB25,  EXP2_9=<GND>,
	EXP2_2=PA27, EXP2_4=PA29, EXP2_6=PA26, EXP2_8=<RST>, EXP2_10=<3.3V>

[bed_mesh]
speed = 300
horizontal_move_z = 10
mesh_min = 10, 45
mesh_max = 240, 290
fade_start = 0.6
fade_end = 10.0
probe_count = 15, 15
algorithm = bicubic

[bed_mesh default]
version = 1
points = 
	0.052187, -0.014375, -0.081250, -0.137813, -0.181875
	0.022500, -0.009688, -0.045938, -0.074375, -0.095000
	-0.007500, -0.018438, -0.033750, -0.041875, -0.046875
	-0.055938, -0.047500, -0.044375, -0.030938, -0.010938
	-0.105313, -0.074375, -0.049063, -0.007500, 0.040000
x_count = 5
y_count = 5
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 240.0
min_y = 45.0
max_y = 290.0

[bed_mesh 60degree]
version = 1
points = 
	-0.137188, -0.132500, -0.130000, -0.134063, -0.134375, -0.136875, -0.135313, -0.132500, -0.135000, -0.132500, -0.125000, -0.115938, -0.106250, -0.093125, -0.075313
	-0.124688, -0.121875, -0.123750, -0.111563, -0.129063, -0.126875, -0.125625, -0.123125, -0.120625, -0.113125, -0.105000, -0.098750, -0.087500, -0.073125, -0.063750
	-0.115313, -0.114063, -0.115938, -0.116875, -0.117500, -0.114688, -0.115313, -0.113125, -0.105625, -0.102813, -0.091563, -0.084375, -0.068125, -0.045313, -0.040000
	-0.108750, -0.104375, -0.104375, -0.105313, -0.105938, -0.105938, -0.105938, -0.104688, -0.096563, -0.091563, -0.083125, -0.066875, -0.065313, -0.030000, -0.034688
	-0.103125, -0.097188, -0.098125, -0.098125, -0.099063, -0.098750, -0.100313, -0.095313, -0.090938, -0.085313, -0.075625, -0.065625, -0.051563, -0.038125, -0.015938
	-0.096875, -0.095000, -0.094375, -0.095000, -0.093750, -0.094375, -0.093438, -0.088438, -0.086250, -0.076250, -0.070625, -0.057188, -0.044375, -0.033438, -0.018750
	-0.090625, -0.087813, -0.088125, -0.087813, -0.087500, -0.091875, -0.087188, -0.084688, -0.080625, -0.075000, -0.065000, -0.054375, -0.039688, -0.031563, -0.021250
	-0.091875, -0.089375, -0.087500, -0.089063, -0.086563, -0.089375, -0.088750, -0.085000, -0.083125, -0.076250, -0.069688, -0.060000, -0.045625, -0.037188, -0.020625
	-0.088438, -0.086563, -0.088125, -0.088438, -0.089375, -0.091563, -0.090000, -0.088125, -0.082188, -0.075313, -0.069688, -0.059375, -0.048125, -0.036250, -0.025625
	-0.089688, -0.090313, -0.086875, -0.087500, -0.090938, -0.088438, -0.090625, -0.089375, -0.084375, -0.077813, -0.072188, -0.061250, -0.050313, -0.040625, -0.024688
	-0.095313, -0.094063, -0.090938, -0.091563, -0.089688, -0.092500, -0.090313, -0.089375, -0.083125, -0.075313, -0.068750, -0.058125, -0.047500, -0.036563, -0.019688
	-0.098125, -0.097188, -0.098438, -0.093438, -0.095313, -0.095000, -0.091250, -0.090000, -0.085625, -0.079375, -0.068750, -0.056250, -0.045625, -0.034375, -0.020000
	-0.110313, -0.109063, -0.105625, -0.106563, -0.105313, -0.103750, -0.100938, -0.094688, -0.089063, -0.081875, -0.071250, -0.056875, -0.044688, -0.028125, -0.012813
	-0.116250, -0.111250, -0.107188, -0.106875, -0.103750, -0.101875, -0.097500, -0.092188, -0.083750, -0.076250, -0.065000, -0.052188, -0.038438, -0.022813, -0.005938
	-0.123750, -0.116875, -0.113750, -0.111563, -0.109063, -0.106563, -0.105625, -0.097500, -0.087500, -0.077813, -0.065313, -0.047813, -0.033438, -0.018438, -0.000313
x_count = 15
y_count = 15
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 239.88
min_y = 45.0
max_y = 290.0
=======================
Extruder max_extrude_ratio=0.266081
mcu 'mcu': Starting serial connect
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
webhooks client 281473646677296: New connection
webhooks client 281473646677296: Client info {'program': 'Moonraker', 'version': 'v0.8.0-327-g9447494'}
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
mcu 'mcu': Unable to open serial port: [Errno 2] could not open port /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00: [Errno 2] No such file or directory: '/dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00'
MCU error during connect
Traceback (most recent call last):
  File "/home/biqu/klipper/klippy/mcu.py", line 791, in _mcu_identify
    self._serial.connect_uart(self._serialport, self._baud, rts)
  File "/home/biqu/klipper/klippy/serialhdl.py", line 182, in connect_uart
    self._error("Unable to connect")
  File "/home/biqu/klipper/klippy/serialhdl.py", line 61, in _error
    raise error(self.warn_prefix + (msg % params))
serialhdl.error: mcu 'mcu': Unable to connect

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/biqu/klipper/klippy/klippy.py", line 176, in _connect
    self.send_event("klippy:mcu_identify")
  File "/home/biqu/klipper/klippy/klippy.py", line 263, in send_event
    return [cb(*params) for cb in self.event_handlers.get(event, [])]
  File "/home/biqu/klipper/klippy/klippy.py", line 263, in <listcomp>
    return [cb(*params) for cb in self.event_handlers.get(event, [])]
  File "/home/biqu/klipper/klippy/mcu.py", line 796, in _mcu_identify
    raise error(str(e))
mcu.error: mcu 'mcu': Unable to connect
Build file /home/biqu/klipper/klippy/../.config(1515): Wed Apr 24 17:18:38 2024
========= Last MCU build config =========
# CONFIG_LOW_LEVEL_OPTIONS is not set
# CONFIG_MACH_AVR is not set
CONFIG_MACH_ATSAM=y
# CONFIG_MACH_ATSAMD is not set
# CONFIG_MACH_LPC176X is not set
# CONFIG_MACH_STM32 is not set
# CONFIG_MACH_HC32F460 is not set
# CONFIG_MACH_RP2040 is not set
# CONFIG_MACH_PRU is not set
# CONFIG_MACH_AR100 is not set
# CONFIG_MACH_LINUX is not set
# CONFIG_MACH_SIMU is not set
CONFIG_BOARD_DIRECTORY="atsam"
CONFIG_MCU="sam3x8e"
CONFIG_CLOCK_FREQ=84000000
CONFIG_USBSERIAL=y
CONFIG_ATSAM_SELECT=y
CONFIG_MACH_SAM3X8E=y
# CONFIG_MACH_SAM3X8C is not set
# CONFIG_MACH_SAM4S8C is not set
# CONFIG_MACH_SAM4E8E is not set
# CONFIG_MACH_SAME70Q20B is not set
CONFIG_MACH_SAM3X=y
CONFIG_FLASH_SIZE=0x80000
CONFIG_FLASH_BOOT_ADDRESS=0x0
CONFIG_RAM_START=0x20000000
CONFIG_RAM_SIZE=0x18000
CONFIG_STACK_SIZE=512
CONFIG_FLASH_APPLICATION_ADDRESS=0x80000
CONFIG_ATSAM_USB=y
# CONFIG_ATSAM_SERIAL is not set
CONFIG_USB=y
CONFIG_USB_VENDOR_ID=0x1d50
CONFIG_USB_DEVICE_ID=0x614e
CONFIG_USB_SERIAL_NUMBER_CHIPID=y
CONFIG_USB_SERIAL_NUMBER="12345"
CONFIG_WANT_GPIO_BITBANGING=y
CONFIG_WANT_DISPLAYS=y
CONFIG_WANT_SENSORS=y
CONFIG_WANT_LIS2DW=y
CONFIG_WANT_LDC1612=y
CONFIG_WANT_SOFTWARE_I2C=y
CONFIG_WANT_SOFTWARE_SPI=y
CONFIG_NEED_SENSOR_BULK=y
CONFIG_CANBUS_FREQUENCY=1000000
CONFIG_HAVE_GPIO=y
CONFIG_HAVE_GPIO_ADC=y
CONFIG_HAVE_GPIO_SPI=y
CONFIG_HAVE_GPIO_I2C=y
CONFIG_HAVE_GPIO_HARD_PWM=y
CONFIG_HAVE_STRICT_TIMING=y
CONFIG_HAVE_CHIPID=y
CONFIG_HAVE_STEPPER_BOTH_EDGE=y
CONFIG_HAVE_BOOTLOADER_REQUEST=y
CONFIG_INLINE_STEPPER_HACK=y
=======================
Build file /home/biqu/klipper/klippy/../out/klipper.dict(7778): Wed Apr 24 17:19:22 2024
Last MCU build version: v0.12.0-171-g2f6e94c9
Last MCU build tools: gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.35.2-2+14+b2) 2.35.2
Last MCU build config: ADC_MAX=4095 BUS_PINS_spi0=PA25,PA26,PA27 BUS_PINS_twi0=PA18,PA17 BUS_PINS_twi1=PB13,PB12 BUS_PINS_usart0=PA10,PA11,PA17 BUS_PINS_usart1=PA12,PA13,PA16 BUS_PINS_usart2=PB21,PB20,PB24 CLOCK_FREQ=84000000 MCU=sam3x8e PWM_MAX=255 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Build file /home/biqu/klipper/klippy/../out/klipper.elf(1068496): Wed Apr 24 17:19:39 2024
Starting Klippy...
Args: ['/home/biqu/klipper/klippy/klippy.py', '/home/biqu/printer_data/config/printer.cfg', '-I', '/home/biqu/printer_data/comms/klippy.serial', '-l', '/home/biqu/printer_data/logs/klippy.log', '-a', '/home/biqu/printer_data/comms/klippy.sock']
Git version: 'v0.12.0-171-g2f6e94c9'
Branch: master
Remote: origin
Tracked URL: https://github.com/Klipper3d/klipper
CPU: 4 core ?
Python: '3.9.2 (default, Feb 28 2021, 17:03:44) \n[GCC 10.2.1 20210110]'
Start printer at Wed Apr 24 17:17:14 2024 (1713993434.1 19.6)
===== Config file =====
[mcu]
serial = /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set allow_park = client.park_at_cancel|default(false)|lower == 'true' %}
	{% set retract = client.cancel_retract|default(5.0)|abs %}
	
	{% set park_x = "" if (client.park_at_cancel_x|default(none) is none)
	else "X=" ~ client.park_at_cancel_x %}
	{% set park_y = "" if (client.park_at_cancel_y|default(none) is none)
	else "Y=" ~ client.park_at_cancel_y %}
	{% set custom_park = park_x|length > 0 or park_y|length > 0 %}
	
	
	{% if printer['gcode_macro RESUME'].restore_idle_timeout > 0 %}
	SET_IDLE_TIMEOUT TIMEOUT={printer['gcode_macro RESUME'].restore_idle_timeout}
	{% endif %}
	{% if (custom_park or not printer.pause_resume.is_paused) and allow_park %} _TOOLHEAD_PARK_PAUSE_CANCEL {park_x} {park_y} {% endif %}
	_CLIENT_RETRACT LENGTH={retract}
	TURN_OFF_HEATERS
	M106 S0
	{client.user_cancel_macro|default("")}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	
	SET_PAUSE_NEXT_LAYER ENABLE=0
	SET_PAUSE_AT_LAYER ENABLE=0 LAYER=0
	CANCEL_PRINT_BASE

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set idle_timeout = client.idle_timeout|default(0) %}
	{% set temp = printer[printer.toolhead.extruder].target if printer.toolhead.extruder != '' else 0 %}
	{% set restore = False if printer.toolhead.extruder == ''
	else True  if params.RESTORE|default(1)|int == 1 else False %}
	
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=last_extruder_temp VALUE="{{'restore': restore, 'temp': temp}}"
	
	{% if idle_timeout > 0 %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=restore_idle_timeout VALUE={printer.configfile.settings.idle_timeout.timeout}
	SET_IDLE_TIMEOUT TIMEOUT={idle_timeout}
	{% endif %}
	PAUSE_BASE
	{client.user_pause_macro|default("")}
	_TOOLHEAD_PARK_PAUSE_CANCEL {rawparams}

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set sp_move = client.speed_move|default(velocity) %}
	{% set runout_resume = True if client.runout_sensor|default("") == ""
	else True if not printer[client.runout_sensor].enabled
	else printer[client.runout_sensor].filament_detected %}
	{% set can_extrude = True if printer.toolhead.extruder == ''
	else printer[printer.toolhead.extruder].can_extrude %}
	{% set do_resume = False %}
	{% set prompt_txt = [] %}
	
	
	{% if printer.idle_timeout.state|upper == "IDLE" or idle_state %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	{% if last_extruder_temp.restore %}
	
	RESPOND TYPE=echo MSG='{"Restoring \"%s\" temperature to %3.1f\u00B0C, this may take some time" % (printer.toolhead.extruder, last_extruder_temp.temp) }'
	M109 S{last_extruder_temp.temp}
	{% set do_resume = True %}
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	{% if runout_resume %}
	{% if do_resume %}
	{% if restore_idle_timeout > 0 %} SET_IDLE_TIMEOUT TIMEOUT={restore_idle_timeout} {% endif %}
	{client.user_resume_macro|default("")}
	_CLIENT_EXTRUDE
	RESUME_BASE VELOCITY={params.VELOCITY|default(sp_move)}
	{% endif %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]}'
	{% set _d = prompt_txt.append("\"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]) %}
	{% endif %}
	
	{% if not (runout_resume and do_resume) %}
	RESPOND TYPE=command MSG="action:prompt_begin RESUME aborted !!!"
	{% for element in prompt_txt %}
	RESPOND TYPE=command MSG='{"action:prompt_text %s" % element}'
	{% endfor %}
	RESPOND TYPE=command MSG="action:prompt_footer_button Ok|RESPOND TYPE=command MSG=action:prompt_end|info"
	RESPOND TYPE=command MSG="action:prompt_show"
	{% endif %}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[filament_switch_sensor switch_sensor]
switch_pin = ^PB16
pause_on_runout = True
runout_gcode = 
insert_gcode = 

[filament_motion_sensor encoder_sensor]
switch_pin = PB15
detection_length = 3
extruder = extruder
pause_on_runout = False
runout_gcode = 

[gcode_macro PROBE_DOWN]
gcode = 
	SET_PIN PIN=probe_enable VALUE=1

[gcode_macro PROBE_UP]
gcode = 
	SET_PIN PIN=probe_enable VALUE=0

[output_pin probe_enable]
pin = PB12
value = 0

[probe]
pin = ^!PA7
deactivate_on_each_sample = False
x_offset = -16
y_offset = 45
samples = 2
samples_tolerance = 0.05
samples_tolerance_retries = 3
activate_gcode = 
	PROBE_DOWN
	G4 P500
deactivate_gcode = 
	PROBE_UP
z_offset = 0.570

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 9000
max_z_velocity = 7
max_z_accel = 100

[input_shaper]

[stepper_x]
step_pin = PC6
dir_pin = PC5
enable_pin = !PC9
microsteps = 16
rotation_distance = 32
endstop_pin = ^PD4
position_endstop = -15
position_max = 300
position_min = -15
homing_speed = 75

[tmc2130 stepper_x]
cs_pin = PC7
run_current = .75
sense_resistor = 0.120
diag1_pin = !PA4
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[stepper_y]
step_pin = PC12
dir_pin = !PC11
enable_pin = !PC14
microsteps = 16
rotation_distance = 32
endstop_pin = PD6
position_endstop = -10
position_max = 303
position_min = -10
homing_speed = 75

[tmc2130 stepper_y]
cs_pin = PC13
run_current = .75
sense_resistor = 0.120
diag1_pin = !PC15
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[stepper_z]
step_pin = PC17
dir_pin = PC16
enable_pin = !PC19
microsteps = 16
rotation_distance = 2
endstop_pin = probe:z_virtual_endstop
position_max = 265
position_min = -3
homing_speed = 5

[tmc2130 stepper_z]
cs_pin = PC18
run_current = .80
sense_resistor = 0.120
diag1_pin = PC4
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[safe_z_home]
home_xy_position = 166,105
speed = 100
z_hop = 10
z_hop_speed = 100

[extruder]
step_pin = PB10
dir_pin = !PC10
enable_pin = !PB22
microsteps = 16
rotation_distance = 7.81
nozzle_diameter = 0.400
filament_diameter = 1.75
heater_pin = PC24
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB19
min_temp = 0
max_temp = 285
min_extrude_temp = 120
max_extrude_only_distance = 140.0
pressure_advance = .0525
control = pid
pid_kp = 23.681
pid_ki = 1.152
pid_kd = 121.659

[tmc2130 extruder]
cs_pin = PC20
run_current = .75
sense_resistor = 0.120
diag1_pin = !PB23
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[heater_bed]
heater_pin = PC21
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PB20
control = pid
pid_kp = 21
pid_ki = 1.78
pid_kd = 61.93
min_temp = 0
max_temp = 130

[fan]
pin = PC23

[heater_fan nozzle_cooling_fan]
pin = PC25

[display]
lcd_type = st7920
cs_pin = EXP1_4
sclk_pin = EXP1_5
sid_pin = EXP1_3
encoder_pins = ^EXP2_3, ^EXP2_5
click_pin = ^!EXP1_2

[output_pin beeper]
pin = EXP1_1

[board_pins]
aliases = 
	
	EXP1_1=PA14, EXP1_3=PA15, EXP1_5=PA0,  EXP1_7=PA1, EXP1_9=<GND>,
	EXP1_2=PA13, EXP1_4=PA12, EXP1_6=PA16, EXP1_8=PC2, EXP1_10=<5V>,
	
	EXP2_1=PA25, EXP2_3=PB27, EXP2_5=PA3,  EXP2_7=PB25,  EXP2_9=<GND>,
	EXP2_2=PA27, EXP2_4=PA29, EXP2_6=PA26, EXP2_8=<RST>, EXP2_10=<3.3V>

[bed_mesh]
speed = 300
horizontal_move_z = 10
mesh_min = 10, 45
mesh_max = 240, 290
fade_start = 0.6
fade_end = 10.0
probe_count = 15, 15
algorithm = bicubic

[bed_mesh default]
version = 1
points = 
	0.052187, -0.014375, -0.081250, -0.137813, -0.181875
	0.022500, -0.009688, -0.045938, -0.074375, -0.095000
	-0.007500, -0.018438, -0.033750, -0.041875, -0.046875
	-0.055938, -0.047500, -0.044375, -0.030938, -0.010938
	-0.105313, -0.074375, -0.049063, -0.007500, 0.040000
x_count = 5
y_count = 5
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 240.0
min_y = 45.0
max_y = 290.0

[bed_mesh 60degree]
version = 1
points = 
	-0.137188, -0.132500, -0.130000, -0.134063, -0.134375, -0.136875, -0.135313, -0.132500, -0.135000, -0.132500, -0.125000, -0.115938, -0.106250, -0.093125, -0.075313
	-0.124688, -0.121875, -0.123750, -0.111563, -0.129063, -0.126875, -0.125625, -0.123125, -0.120625, -0.113125, -0.105000, -0.098750, -0.087500, -0.073125, -0.063750
	-0.115313, -0.114063, -0.115938, -0.116875, -0.117500, -0.114688, -0.115313, -0.113125, -0.105625, -0.102813, -0.091563, -0.084375, -0.068125, -0.045313, -0.040000
	-0.108750, -0.104375, -0.104375, -0.105313, -0.105938, -0.105938, -0.105938, -0.104688, -0.096563, -0.091563, -0.083125, -0.066875, -0.065313, -0.030000, -0.034688
	-0.103125, -0.097188, -0.098125, -0.098125, -0.099063, -0.098750, -0.100313, -0.095313, -0.090938, -0.085313, -0.075625, -0.065625, -0.051563, -0.038125, -0.015938
	-0.096875, -0.095000, -0.094375, -0.095000, -0.093750, -0.094375, -0.093438, -0.088438, -0.086250, -0.076250, -0.070625, -0.057188, -0.044375, -0.033438, -0.018750
	-0.090625, -0.087813, -0.088125, -0.087813, -0.087500, -0.091875, -0.087188, -0.084688, -0.080625, -0.075000, -0.065000, -0.054375, -0.039688, -0.031563, -0.021250
	-0.091875, -0.089375, -0.087500, -0.089063, -0.086563, -0.089375, -0.088750, -0.085000, -0.083125, -0.076250, -0.069688, -0.060000, -0.045625, -0.037188, -0.020625
	-0.088438, -0.086563, -0.088125, -0.088438, -0.089375, -0.091563, -0.090000, -0.088125, -0.082188, -0.075313, -0.069688, -0.059375, -0.048125, -0.036250, -0.025625
	-0.089688, -0.090313, -0.086875, -0.087500, -0.090938, -0.088438, -0.090625, -0.089375, -0.084375, -0.077813, -0.072188, -0.061250, -0.050313, -0.040625, -0.024688
	-0.095313, -0.094063, -0.090938, -0.091563, -0.089688, -0.092500, -0.090313, -0.089375, -0.083125, -0.075313, -0.068750, -0.058125, -0.047500, -0.036563, -0.019688
	-0.098125, -0.097188, -0.098438, -0.093438, -0.095313, -0.095000, -0.091250, -0.090000, -0.085625, -0.079375, -0.068750, -0.056250, -0.045625, -0.034375, -0.020000
	-0.110313, -0.109063, -0.105625, -0.106563, -0.105313, -0.103750, -0.100938, -0.094688, -0.089063, -0.081875, -0.071250, -0.056875, -0.044688, -0.028125, -0.012813
	-0.116250, -0.111250, -0.107188, -0.106875, -0.103750, -0.101875, -0.097500, -0.092188, -0.083750, -0.076250, -0.065000, -0.052188, -0.038438, -0.022813, -0.005938
	-0.123750, -0.116875, -0.113750, -0.111563, -0.109063, -0.106563, -0.105625, -0.097500, -0.087500, -0.077813, -0.065313, -0.047813, -0.033438, -0.018438, -0.000313
x_count = 15
y_count = 15
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 239.88
min_y = 45.0
max_y = 290.0
=======================
Extruder max_extrude_ratio=0.266081
mcu 'mcu': Starting serial connect
Loaded MCU 'mcu' 112 commands (v0.12.0-171-g2f6e94c9 / gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.35.2-2+14+b2) 2.35.2)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_spi0=PA25,PA26,PA27 BUS_PINS_twi0=PA18,PA17 BUS_PINS_twi1=PB13,PB12 BUS_PINS_usart0=PA10,PA11,PA17 BUS_PINS_usart1=PA12,PA13,PA16 BUS_PINS_usart2=PB21,PB20,PB24 CLOCK_FREQ=84000000 MCU=sam3x8e PWM_MAX=255 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Sending MCU 'mcu' printer configuration...
Configured MCU 'mcu' (1024 moves)
Starting heater checks for heater_bed
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (26.0, 0.0)     | (10.0, 45.0)
  1   | (42.4, 0.0)     | (26.4, 45.0)
  2   | (58.8, 0.0)     | (42.8, 45.0)
  3   | (75.3, 0.0)     | (59.3, 45.0)
  4   | (91.7, 0.0)     | (75.7, 45.0)
  5   | (108.1, 0.0)    | (92.1, 45.0)
  6   | (124.5, 0.0)    | (108.5, 45.0)
  7   | (140.9, 0.0)    | (124.9, 45.0)
  8   | (157.4, 0.0)    | (141.4, 45.0)
  9   | (173.8, 0.0)    | (157.8, 45.0)
  10  | (190.2, 0.0)    | (174.2, 45.0)
  11  | (206.6, 0.0)    | (190.6, 45.0)
  12  | (223.0, 0.0)    | (207.0, 45.0)
  13  | (239.5, 0.0)    | (223.5, 45.0)
  14  | (255.9, 0.0)    | (239.9, 45.0)
  15  | (255.9, 17.5)   | (239.9, 62.5)
  16  | (239.5, 17.5)   | (223.5, 62.5)
  17  | (223.0, 17.5)   | (207.0, 62.5)
  18  | (206.6, 17.5)   | (190.6, 62.5)
  19  | (190.2, 17.5)   | (174.2, 62.5)
  20  | (173.8, 17.5)   | (157.8, 62.5)
  21  | (157.4, 17.5)   | (141.4, 62.5)
  22  | (140.9, 17.5)   | (124.9, 62.5)
  23  | (124.5, 17.5)   | (108.5, 62.5)
  24  | (108.1, 17.5)   | (92.1, 62.5)
  25  | (91.7, 17.5)    | (75.7, 62.5)
  26  | (75.3, 17.5)    | (59.3, 62.5)
  27  | (58.8, 17.5)    | (42.8, 62.5)
  28  | (42.4, 17.5)    | (26.4, 62.5)
  29  | (26.0, 17.5)    | (10.0, 62.5)
  30  | (26.0, 35.0)    | (10.0, 80.0)
  31  | (42.4, 35.0)    | (26.4, 80.0)
  32  | (58.8, 35.0)    | (42.8, 80.0)
  33  | (75.3, 35.0)    | (59.3, 80.0)
  34  | (91.7, 35.0)    | (75.7, 80.0)
  35  | (108.1, 35.0)   | (92.1, 80.0)
  36  | (124.5, 35.0)   | (108.5, 80.0)
  37  | (140.9, 35.0)   | (124.9, 80.0)
  38  | (157.4, 35.0)   | (141.4, 80.0)
  39  | (173.8, 35.0)   | (157.8, 80.0)
  40  | (190.2, 35.0)   | (174.2, 80.0)
  41  | (206.6, 35.0)   | (190.6, 80.0)
  42  | (223.0, 35.0)   | (207.0, 80.0)
  43  | (239.5, 35.0)   | (223.5, 80.0)
  44  | (255.9, 35.0)   | (239.9, 80.0)
  45  | (255.9, 52.5)   | (239.9, 97.5)
  46  | (239.5, 52.5)   | (223.5, 97.5)
  47  | (223.0, 52.5)   | (207.0, 97.5)
  48  | (206.6, 52.5)   | (190.6, 97.5)
  49  | (190.2, 52.5)   | (174.2, 97.5)
  50  | (173.8, 52.5)   | (157.8, 97.5)
  51  | (157.4, 52.5)   | (141.4, 97.5)
  52  | (140.9, 52.5)   | (124.9, 97.5)
  53  | (124.5, 52.5)   | (108.5, 97.5)
  54  | (108.1, 52.5)   | (92.1, 97.5)
  55  | (91.7, 52.5)    | (75.7, 97.5)
  56  | (75.3, 52.5)    | (59.3, 97.5)
  57  | (58.8, 52.5)    | (42.8, 97.5)
  58  | (42.4, 52.5)    | (26.4, 97.5)
  59  | (26.0, 52.5)    | (10.0, 97.5)
  60  | (26.0, 70.0)    | (10.0, 115.0)
  61  | (42.4, 70.0)    | (26.4, 115.0)
  62  | (58.8, 70.0)    | (42.8, 115.0)
  63  | (75.3, 70.0)    | (59.3, 115.0)
  64  | (91.7, 70.0)    | (75.7, 115.0)
  65  | (108.1, 70.0)   | (92.1, 115.0)
  66  | (124.5, 70.0)   | (108.5, 115.0)
  67  | (140.9, 70.0)   | (124.9, 115.0)
  68  | (157.4, 70.0)   | (141.4, 115.0)
  69  | (173.8, 70.0)   | (157.8, 115.0)
  70  | (190.2, 70.0)   | (174.2, 115.0)
  71  | (206.6, 70.0)   | (190.6, 115.0)
  72  | (223.0, 70.0)   | (207.0, 115.0)
  73  | (239.5, 70.0)   | (223.5, 115.0)
  74  | (255.9, 70.0)   | (239.9, 115.0)
  75  | (255.9, 87.5)   | (239.9, 132.5)
  76  | (239.5, 87.5)   | (223.5, 132.5)
  77  | (223.0, 87.5)   | (207.0, 132.5)
  78  | (206.6, 87.5)   | (190.6, 132.5)
  79  | (190.2, 87.5)   | (174.2, 132.5)
  80  | (173.8, 87.5)   | (157.8, 132.5)
  81  | (157.4, 87.5)   | (141.4, 132.5)
  82  | (140.9, 87.5)   | (124.9, 132.5)
  83  | (124.5, 87.5)   | (108.5, 132.5)
  84  | (108.1, 87.5)   | (92.1, 132.5)
  85  | (91.7, 87.5)    | (75.7, 132.5)
  86  | (75.3, 87.5)    | (59.3, 132.5)
  87  | (58.8, 87.5)    | (42.8, 132.5)
  88  | (42.4, 87.5)    | (26.4, 132.5)
  89  | (26.0, 87.5)    | (10.0, 132.5)
  90  | (26.0, 105.0)   | (10.0, 150.0)
  91  | (42.4, 105.0)   | (26.4, 150.0)
  92  | (58.8, 105.0)   | (42.8, 150.0)
  93  | (75.3, 105.0)   | (59.3, 150.0)
  94  | (91.7, 105.0)   | (75.7, 150.0)
  95  | (108.1, 105.0)  | (92.1, 150.0)
  96  | (124.5, 105.0)  | (108.5, 150.0)
  97  | (140.9, 105.0)  | (124.9, 150.0)
  98  | (157.4, 105.0)  | (141.4, 150.0)
  99  | (173.8, 105.0)  | (157.8, 150.0)
  100 | (190.2, 105.0)  | (174.2, 150.0)
  101 | (206.6, 105.0)  | (190.6, 150.0)
  102 | (223.0, 105.0)  | (207.0, 150.0)
  103 | (239.5, 105.0)  | (223.5, 150.0)
  104 | (255.9, 105.0)  | (239.9, 150.0)
  105 | (255.9, 122.5)  | (239.9, 167.5)
  106 | (239.5, 122.5)  | (223.5, 167.5)
  107 | (223.0, 122.5)  | (207.0, 167.5)
  108 | (206.6, 122.5)  | (190.6, 167.5)
  109 | (190.2, 122.5)  | (174.2, 167.5)
  110 | (173.8, 122.5)  | (157.8, 167.5)
  111 | (157.4, 122.5)  | (141.4, 167.5)
  112 | (140.9, 122.5)  | (124.9, 167.5)
  113 | (124.5, 122.5)  | (108.5, 167.5)
  114 | (108.1, 122.5)  | (92.1, 167.5)
  115 | (91.7, 122.5)   | (75.7, 167.5)
  116 | (75.3, 122.5)   | (59.3, 167.5)
  117 | (58.8, 122.5)   | (42.8, 167.5)
  118 | (42.4, 122.5)   | (26.4, 167.5)
  119 | (26.0, 122.5)   | (10.0, 167.5)
  120 | (26.0, 140.0)   | (10.0, 185.0)
  121 | (42.4, 140.0)   | (26.4, 185.0)
  122 | (58.8, 140.0)   | (42.8, 185.0)
  123 | (75.3, 140.0)   | (59.3, 185.0)
  124 | (91.7, 140.0)   | (75.7, 185.0)
  125 | (108.1, 140.0)  | (92.1, 185.0)
  126 | (124.5, 140.0)  | (108.5, 185.0)
  127 | (140.9, 140.0)  | (124.9, 185.0)
  128 | (157.4, 140.0)  | (141.4, 185.0)
  129 | (173.8, 140.0)  | (157.8, 185.0)
  130 | (190.2, 140.0)  | (174.2, 185.0)
  131 | (206.6, 140.0)  | (190.6, 185.0)
  132 | (223.0, 140.0)  | (207.0, 185.0)
  133 | (239.5, 140.0)  | (223.5, 185.0)
  134 | (255.9, 140.0)  | (239.9, 185.0)
  135 | (255.9, 157.5)  | (239.9, 202.5)
  136 | (239.5, 157.5)  | (223.5, 202.5)
  137 | (223.0, 157.5)  | (207.0, 202.5)
  138 | (206.6, 157.5)  | (190.6, 202.5)
  139 | (190.2, 157.5)  | (174.2, 202.5)
  140 | (173.8, 157.5)  | (157.8, 202.5)
  141 | (157.4, 157.5)  | (141.4, 202.5)
  142 | (140.9, 157.5)  | (124.9, 202.5)
  143 | (124.5, 157.5)  | (108.5, 202.5)
  144 | (108.1, 157.5)  | (92.1, 202.5)
  145 | (91.7, 157.5)   | (75.7, 202.5)
  146 | (75.3, 157.5)   | (59.3, 202.5)
  147 | (58.8, 157.5)   | (42.8, 202.5)
  148 | (42.4, 157.5)   | (26.4, 202.5)
  149 | (26.0, 157.5)   | (10.0, 202.5)
  150 | (26.0, 175.0)   | (10.0, 220.0)
  151 | (42.4, 175.0)   | (26.4, 220.0)
  152 | (58.8, 175.0)   | (42.8, 220.0)
  153 | (75.3, 175.0)   | (59.3, 220.0)
  154 | (91.7, 175.0)   | (75.7, 220.0)
  155 | (108.1, 175.0)  | (92.1, 220.0)
  156 | (124.5, 175.0)  | (108.5, 220.0)
  157 | (140.9, 175.0)  | (124.9, 220.0)
  158 | (157.4, 175.0)  | (141.4, 220.0)
  159 | (173.8, 175.0)  | (157.8, 220.0)
  160 | (190.2, 175.0)  | (174.2, 220.0)
  161 | (206.6, 175.0)  | (190.6, 220.0)
  162 | (223.0, 175.0)  | (207.0, 220.0)
  163 | (239.5, 175.0)  | (223.5, 220.0)
  164 | (255.9, 175.0)  | (239.9, 220.0)
  165 | (255.9, 192.5)  | (239.9, 237.5)
  166 | (239.5, 192.5)  | (223.5, 237.5)
  167 | (223.0, 192.5)  | (207.0, 237.5)
  168 | (206.6, 192.5)  | (190.6, 237.5)
  169 | (190.2, 192.5)  | (174.2, 237.5)
  170 | (173.8, 192.5)  | (157.8, 237.5)
  171 | (157.4, 192.5)  | (141.4, 237.5)
  172 | (140.9, 192.5)  | (124.9, 237.5)
  173 | (124.5, 192.5)  | (108.5, 237.5)
  174 | (108.1, 192.5)  | (92.1, 237.5)
  175 | (91.7, 192.5)   | (75.7, 237.5)
  176 | (75.3, 192.5)   | (59.3, 237.5)
  177 | (58.8, 192.5)   | (42.8, 237.5)
  178 | (42.4, 192.5)   | (26.4, 237.5)
  179 | (26.0, 192.5)   | (10.0, 237.5)
  180 | (26.0, 210.0)   | (10.0, 255.0)
  181 | (42.4, 210.0)   | (26.4, 255.0)
  182 | (58.8, 210.0)   | (42.8, 255.0)
  183 | (75.3, 210.0)   | (59.3, 255.0)
  184 | (91.7, 210.0)   | (75.7, 255.0)
  185 | (108.1, 210.0)  | (92.1, 255.0)
  186 | (124.5, 210.0)  | (108.5, 255.0)
  187 | (140.9, 210.0)  | (124.9, 255.0)
  188 | (157.4, 210.0)  | (141.4, 255.0)
  189 | (173.8, 210.0)  | (157.8, 255.0)
  190 | (190.2, 210.0)  | (174.2, 255.0)
  191 | (206.6, 210.0)  | (190.6, 255.0)
  192 | (223.0, 210.0)  | (207.0, 255.0)
  193 | (239.5, 210.0)  | (223.5, 255.0)
  194 | (255.9, 210.0)  | (239.9, 255.0)
  195 | (255.9, 227.5)  | (239.9, 272.5)
  196 | (239.5, 227.5)  | (223.5, 272.5)
  197 | (223.0, 227.5)  | (207.0, 272.5)
  198 | (206.6, 227.5)  | (190.6, 272.5)
  199 | (190.2, 227.5)  | (174.2, 272.5)
  200 | (173.8, 227.5)  | (157.8, 272.5)
  201 | (157.4, 227.5)  | (141.4, 272.5)
  202 | (140.9, 227.5)  | (124.9, 272.5)
  203 | (124.5, 227.5)  | (108.5, 272.5)
  204 | (108.1, 227.5)  | (92.1, 272.5)
  205 | (91.7, 227.5)   | (75.7, 272.5)
  206 | (75.3, 227.5)   | (59.3, 272.5)
  207 | (58.8, 227.5)   | (42.8, 272.5)
  208 | (42.4, 227.5)   | (26.4, 272.5)
  209 | (26.0, 227.5)   | (10.0, 272.5)
  210 | (26.0, 245.0)   | (10.0, 290.0)
  211 | (42.4, 245.0)   | (26.4, 290.0)
  212 | (58.8, 245.0)   | (42.8, 290.0)
  213 | (75.3, 245.0)   | (59.3, 290.0)
  214 | (91.7, 245.0)   | (75.7, 290.0)
  215 | (108.1, 245.0)  | (92.1, 290.0)
  216 | (124.5, 245.0)  | (108.5, 290.0)
  217 | (140.9, 245.0)  | (124.9, 290.0)
  218 | (157.4, 245.0)  | (141.4, 290.0)
  219 | (173.8, 245.0)  | (157.8, 290.0)
  220 | (190.2, 245.0)  | (174.2, 290.0)
  221 | (206.6, 245.0)  | (190.6, 290.0)
  222 | (223.0, 245.0)  | (207.0, 290.0)
  223 | (239.5, 245.0)  | (223.5, 290.0)
  224 | (255.9, 245.0)  | (239.9, 290.0)
Starting heater checks for extruder
Stats 27.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=5960 bytes_read=6232 bytes_retransmit=9 bytes_invalid=0 send_seq=341 receive_seq=341 retransmit_seq=2 srtt=0.002 rttvar=0.001 rto=0.025 ready_bytes=35 upcoming_bytes=0 freq=83999335  heater_bed: target=0 temp=0.0 pwm=0.000 sysload=2.90 cputime=7.058 memavail=720012 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=0.0 pwm=0.000
Stats 28.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=6024 bytes_read=6303 bytes_retransmit=9 bytes_invalid=0 send_seq=345 receive_seq=345 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=16 upcoming_bytes=0 freq=83998732  heater_bed: target=0 temp=19.6 pwm=0.000 sysload=2.90 cputime=7.090 memavail=713132 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.4 pwm=0.000
webhooks client 281473672105024: New connection
webhooks client 281473672105024: Client info {'program': 'Moonraker', 'version': 'v0.8.0-327-g9447494'}
Stats 29.6: gcodein=0  mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=6051 bytes_read=6429 bytes_retransmit=9 bytes_invalid=0 send_seq=347 receive_seq=347 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998586  heater_bed: target=0 temp=19.5 pwm=0.000 sysload=2.90 cputime=7.128 memavail=705296 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.4 pwm=0.000
webhooks: registering remote method 'shutdown_machine' for connection id: 281473672105024
webhooks: registering remote method 'reboot_machine' for connection id: 281473672105024
webhooks: registering remote method 'pause_job_queue' for connection id: 281473672105024
webhooks: registering remote method 'start_job_queue' for connection id: 281473672105024
Stats 30.6: gcodein=0  mcu: mcu_awake=0.075 mcu_task_avg=0.000096 mcu_task_stddev=0.000254 bytes_write=6057 bytes_read=6567 bytes_retransmit=9 bytes_invalid=0 send_seq=348 receive_seq=348 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998452  heater_bed: target=0 temp=19.5 pwm=0.000 sysload=3.15 cputime=7.227 memavail=707668 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.4 pwm=0.000
Stats 31.6: gcodein=0  mcu: mcu_awake=0.075 mcu_task_avg=0.000096 mcu_task_stddev=0.000254 bytes_write=6063 bytes_read=6673 bytes_retransmit=9 bytes_invalid=0 send_seq=349 receive_seq=349 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998365  heater_bed: target=0 temp=19.5 pwm=0.000 sysload=3.15 cputime=7.293 memavail=712424 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.3 pwm=0.000
Stats 32.6: gcodein=0  mcu: mcu_awake=0.075 mcu_task_avg=0.000096 mcu_task_stddev=0.000254 bytes_write=6069 bytes_read=6794 bytes_retransmit=9 bytes_invalid=0 send_seq=350 receive_seq=350 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998400  heater_bed: target=0 temp=19.5 pwm=0.000 sysload=3.15 cputime=7.360 memavail=710376 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.4 pwm=0.000
Stats 33.6: gcodein=0  mcu: mcu_awake=0.075 mcu_task_avg=0.000096 mcu_task_stddev=0.000254 bytes_write=6075 bytes_read=6915 bytes_retransmit=9 bytes_invalid=0 send_seq=351 receive_seq=351 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998453  heater_bed: target=0 temp=19.5 pwm=0.000 sysload=3.15 cputime=7.402 memavail=706876 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.3 pwm=0.000
Stats 34.6: gcodein=0  mcu: mcu_awake=0.075 mcu_task_avg=0.000096 mcu_task_stddev=0.000254 bytes_write=6081 bytes_read=7021 bytes_retransmit=9 bytes_invalid=0 send_seq=352 receive_seq=352 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998316  heater_bed: target=0 temp=19.5 pwm=0.000 sysload=3.15 cputime=7.435 memavail=703388 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.4 pwm=0.000
Stats 35.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=6087 bytes_read=7156 bytes_retransmit=9 bytes_invalid=0 send_seq=353 receive_seq=353 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998293  heater_bed: target=0 temp=19.5 pwm=0.000 sysload=3.14 cputime=7.473 memavail=692812 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.3 pwm=0.000
Stats 36.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=6093 bytes_read=7277 bytes_retransmit=9 bytes_invalid=0 send_seq=354 receive_seq=354 retransmit_seq=2 srtt=0.001 rttvar=0.001 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998222  heater_bed: target=0 temp=19.5 pwm=0.000 sysload=3.14 cputime=7.506 memavail=692620 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.4 pwm=0.000
Stats 37.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=6099 bytes_read=7383 bytes_retransmit=9 bytes_invalid=0 send_seq=355 receive_seq=355 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998192  heater_bed: target=0 temp=19.5 pwm=0.000 sysload=3.14 cputime=7.538 memavail=692372 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.4 pwm=0.000
Stats 38.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=6105 bytes_read=7504 bytes_retransmit=9 bytes_invalid=0 send_seq=356 receive_seq=356 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998176  heater_bed: target=0 temp=19.5 pwm=0.000 sysload=3.14 cputime=7.576 memavail=692200 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.3 pwm=0.000
Stats 39.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=6117 bytes_read=7641 bytes_retransmit=9 bytes_invalid=0 send_seq=358 receive_seq=358 retransmit_seq=2 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998162  heater_bed: target=0 temp=19.5 pwm=0.000 sysload=3.14 cputime=7.609 memavail=691972 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.4 pwm=0.000
Stats 40.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000015 mcu_task_stddev=0.000014 bytes_write=6144 bytes_read=7771 bytes_retransmit=9 bytes_invalid=0 send_seq=361 receive_seq=361 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998160  heater_bed: target=0 temp=19.5 pwm=0.000 sysload=2.89 cputime=7.644 memavail=692000 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.4 pwm=0.000
Stats 41.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000015 mcu_task_stddev=0.000014 bytes_write=6171 bytes_read=7902 bytes_retransmit=9 bytes_invalid=0 send_seq=364 receive_seq=364 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998181  heater_bed: target=0 temp=19.5 pwm=0.000 sysload=2.89 cputime=7.679 memavail=692704 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.3 pwm=0.000
Stats 42.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000015 mcu_task_stddev=0.000014 bytes_write=6177 bytes_read=8023 bytes_retransmit=9 bytes_invalid=0 send_seq=365 receive_seq=365 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998203  heater_bed: target=0 temp=19.4 pwm=0.000 sysload=2.89 cputime=7.716 memavail=693512 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.3 pwm=0.000
Stats 43.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000015 mcu_task_stddev=0.000014 bytes_write=6204 bytes_read=8139 bytes_retransmit=9 bytes_invalid=0 send_seq=368 receive_seq=368 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998308  heater_bed: target=0 temp=19.5 pwm=0.000 sysload=2.89 cputime=7.750 memavail=693520 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.4 pwm=0.000
Stats 44.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000015 mcu_task_stddev=0.000014 bytes_write=6210 bytes_read=8260 bytes_retransmit=9 bytes_invalid=0 send_seq=369 receive_seq=369 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998282  heater_bed: target=0 temp=19.5 pwm=0.000 sysload=2.89 cputime=7.784 memavail=693244 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.3 pwm=0.000
Stats 45.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000022 bytes_write=6237 bytes_read=8403 bytes_retransmit=9 bytes_invalid=0 send_seq=372 receive_seq=372 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998264  heater_bed: target=0 temp=19.5 pwm=0.000 sysload=2.73 cputime=7.818 memavail=694000 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.4 pwm=0.000
Stats 46.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000022 bytes_write=6243 bytes_read=8502 bytes_retransmit=9 bytes_invalid=0 send_seq=373 receive_seq=373 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998252  heater_bed: target=0 temp=19.5 pwm=0.000 sysload=2.73 cputime=7.850 memavail=693780 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.3 pwm=0.000
Stats 47.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000022 bytes_write=6270 bytes_read=8625 bytes_retransmit=9 bytes_invalid=0 send_seq=376 receive_seq=376 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998241  heater_bed: target=0 temp=19.5 pwm=0.000 sysload=2.73 cputime=7.887 memavail=693328 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.3 pwm=0.000
Stats 48.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000022 bytes_write=6276 bytes_read=8740 bytes_retransmit=9 bytes_invalid=0 send_seq=377 receive_seq=377 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998233  heater_bed: target=0 temp=19.5 pwm=0.000 sysload=2.73 cputime=7.920 memavail=693304 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.4 pwm=0.000
Stats 49.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000022 bytes_write=6324 bytes_read=8866 bytes_retransmit=9 bytes_invalid=0 send_seq=382 receive_seq=382 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998226  heater_bed: target=0 temp=19.5 pwm=0.000 sysload=2.73 cputime=7.953 memavail=692864 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.3 pwm=0.000
Stats 50.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000022 bytes_write=6330 bytes_read=9002 bytes_retransmit=9 bytes_invalid=0 send_seq=383 receive_seq=383 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998247  heater_bed: target=0 temp=19.5 pwm=0.000 sysload=2.60 cputime=7.986 memavail=692896 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.4 pwm=0.000
Stats 51.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000022 bytes_write=6357 bytes_read=9133 bytes_retransmit=9 bytes_invalid=0 send_seq=386 receive_seq=386 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998239  heater_bed: target=0 temp=19.5 pwm=0.000 sysload=2.60 cputime=8.019 memavail=692900 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.3 pwm=0.000
Stats 52.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000022 bytes_write=6363 bytes_read=9239 bytes_retransmit=9 bytes_invalid=0 send_seq=387 receive_seq=387 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998233  heater_bed: target=0 temp=19.5 pwm=0.000 sysload=2.60 cputime=8.055 memavail=693192 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.4 pwm=0.000
Stats 53.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000022 bytes_write=6369 bytes_read=9360 bytes_retransmit=9 bytes_invalid=0 send_seq=388 receive_seq=388 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998245  heater_bed: target=0 temp=19.5 pwm=0.000 sysload=2.60 cputime=8.088 memavail=692948 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.4 pwm=0.000
Stats 54.6: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000017 mcu_task_stddev=0.000022 bytes_write=6417 bytes_read=9501 bytes_retransmit=9 bytes_invalid=0 send_seq=393 receive_seq=393 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998238  heater_bed: target=0 temp=19.5 pwm=0.000 sysload=2.60 cputime=8.122 memavail=692932 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.4 pwm=0.000
Stats 1975.5: gcodein=0  mcu: mcu_awake=0.002 mcu_task_avg=0.000013 mcu_task_stddev=0.000006 bytes_write=18544 bytes_read=237384 bytes_retransmit=9 bytes_invalid=0 send_seq=2382 receive_seq=2382 retransmit_seq=2 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=83998231  heater_bed: target=0 temp=19.4 pwm=0.000 sysload=0.13 cputime=69.944 memavail=685620 print_time=1980.290 buffer_time=0.000 print_stall=0 extruder: target=0 temp=21.2 pwm=0.000
Attempting MCU 'mcu' reset command
webhooks client 281473672105024: Disconnected
Restarting printer
Start printer at Wed Apr 24 18:35:43 2024 (1713998143.6 1976.7)
===== Config file =====
[mcu]
serial = /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00

[mcu rpi]
serial = /tmp/klipper_host_mcu

[adxl345]
spi_bus = spidev1.1
cs_pin = rpi:None

[resonance_tester]
accel_chip = adxl345
probe_points = 
	150,150,20

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set allow_park = client.park_at_cancel|default(false)|lower == 'true' %}
	{% set retract = client.cancel_retract|default(5.0)|abs %}
	
	{% set park_x = "" if (client.park_at_cancel_x|default(none) is none)
	else "X=" ~ client.park_at_cancel_x %}
	{% set park_y = "" if (client.park_at_cancel_y|default(none) is none)
	else "Y=" ~ client.park_at_cancel_y %}
	{% set custom_park = park_x|length > 0 or park_y|length > 0 %}
	
	
	{% if printer['gcode_macro RESUME'].restore_idle_timeout > 0 %}
	SET_IDLE_TIMEOUT TIMEOUT={printer['gcode_macro RESUME'].restore_idle_timeout}
	{% endif %}
	{% if (custom_park or not printer.pause_resume.is_paused) and allow_park %} _TOOLHEAD_PARK_PAUSE_CANCEL {park_x} {park_y} {% endif %}
	_CLIENT_RETRACT LENGTH={retract}
	TURN_OFF_HEATERS
	M106 S0
	{client.user_cancel_macro|default("")}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	
	SET_PAUSE_NEXT_LAYER ENABLE=0
	SET_PAUSE_AT_LAYER ENABLE=0 LAYER=0
	CANCEL_PRINT_BASE

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set idle_timeout = client.idle_timeout|default(0) %}
	{% set temp = printer[printer.toolhead.extruder].target if printer.toolhead.extruder != '' else 0 %}
	{% set restore = False if printer.toolhead.extruder == ''
	else True  if params.RESTORE|default(1)|int == 1 else False %}
	
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=last_extruder_temp VALUE="{{'restore': restore, 'temp': temp}}"
	
	{% if idle_timeout > 0 %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=restore_idle_timeout VALUE={printer.configfile.settings.idle_timeout.timeout}
	SET_IDLE_TIMEOUT TIMEOUT={idle_timeout}
	{% endif %}
	PAUSE_BASE
	{client.user_pause_macro|default("")}
	_TOOLHEAD_PARK_PAUSE_CANCEL {rawparams}

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set sp_move = client.speed_move|default(velocity) %}
	{% set runout_resume = True if client.runout_sensor|default("") == ""
	else True if not printer[client.runout_sensor].enabled
	else printer[client.runout_sensor].filament_detected %}
	{% set can_extrude = True if printer.toolhead.extruder == ''
	else printer[printer.toolhead.extruder].can_extrude %}
	{% set do_resume = False %}
	{% set prompt_txt = [] %}
	
	
	{% if printer.idle_timeout.state|upper == "IDLE" or idle_state %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	{% if last_extruder_temp.restore %}
	
	RESPOND TYPE=echo MSG='{"Restoring \"%s\" temperature to %3.1f\u00B0C, this may take some time" % (printer.toolhead.extruder, last_extruder_temp.temp) }'
	M109 S{last_extruder_temp.temp}
	{% set do_resume = True %}
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	{% if runout_resume %}
	{% if do_resume %}
	{% if restore_idle_timeout > 0 %} SET_IDLE_TIMEOUT TIMEOUT={restore_idle_timeout} {% endif %}
	{client.user_resume_macro|default("")}
	_CLIENT_EXTRUDE
	RESUME_BASE VELOCITY={params.VELOCITY|default(sp_move)}
	{% endif %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]}'
	{% set _d = prompt_txt.append("\"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]) %}
	{% endif %}
	
	{% if not (runout_resume and do_resume) %}
	RESPOND TYPE=command MSG="action:prompt_begin RESUME aborted !!!"
	{% for element in prompt_txt %}
	RESPOND TYPE=command MSG='{"action:prompt_text %s" % element}'
	{% endfor %}
	RESPOND TYPE=command MSG="action:prompt_footer_button Ok|RESPOND TYPE=command MSG=action:prompt_end|info"
	RESPOND TYPE=command MSG="action:prompt_show"
	{% endif %}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[filament_switch_sensor switch_sensor]
switch_pin = ^PB16
pause_on_runout = True
runout_gcode = 
insert_gcode = 

[filament_motion_sensor encoder_sensor]
switch_pin = PB15
detection_length = 3
extruder = extruder
pause_on_runout = False
runout_gcode = 

[gcode_macro PROBE_DOWN]
gcode = 
	SET_PIN PIN=probe_enable VALUE=1

[gcode_macro PROBE_UP]
gcode = 
	SET_PIN PIN=probe_enable VALUE=0

[output_pin probe_enable]
pin = PB12
value = 0

[probe]
pin = ^!PA7
deactivate_on_each_sample = False
x_offset = -16
y_offset = 45
samples = 2
samples_tolerance = 0.05
samples_tolerance_retries = 3
activate_gcode = 
	PROBE_DOWN
	G4 P500
deactivate_gcode = 
	PROBE_UP
z_offset = 0.570

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 9000
max_z_velocity = 7
max_z_accel = 100

[input_shaper]

[stepper_x]
step_pin = PC6
dir_pin = PC5
enable_pin = !PC9
microsteps = 16
rotation_distance = 32
endstop_pin = ^PD4
position_endstop = -15
position_max = 300
position_min = -15
homing_speed = 75

[tmc2130 stepper_x]
cs_pin = PC7
run_current = .75
sense_resistor = 0.120
diag1_pin = !PA4
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[stepper_y]
step_pin = PC12
dir_pin = !PC11
enable_pin = !PC14
microsteps = 16
rotation_distance = 32
endstop_pin = PD6
position_endstop = -10
position_max = 303
position_min = -10
homing_speed = 75

[tmc2130 stepper_y]
cs_pin = PC13
run_current = .75
sense_resistor = 0.120
diag1_pin = !PC15
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[stepper_z]
step_pin = PC17
dir_pin = PC16
enable_pin = !PC19
microsteps = 16
rotation_distance = 2
endstop_pin = probe:z_virtual_endstop
position_max = 265
position_min = -3
homing_speed = 5

[tmc2130 stepper_z]
cs_pin = PC18
run_current = .80
sense_resistor = 0.120
diag1_pin = PC4
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[safe_z_home]
home_xy_position = 166,105
speed = 100
z_hop = 10
z_hop_speed = 100

[extruder]
step_pin = PB10
dir_pin = !PC10
enable_pin = !PB22
microsteps = 16
rotation_distance = 7.81
nozzle_diameter = 0.400
filament_diameter = 1.75
heater_pin = PC24
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB19
min_temp = 0
max_temp = 285
min_extrude_temp = 120
max_extrude_only_distance = 140.0
pressure_advance = .0525
control = pid
pid_kp = 23.681
pid_ki = 1.152
pid_kd = 121.659

[tmc2130 extruder]
cs_pin = PC20
run_current = .75
sense_resistor = 0.120
diag1_pin = !PB23
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[heater_bed]
heater_pin = PC21
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PB20
control = pid
pid_kp = 21
pid_ki = 1.78
pid_kd = 61.93
min_temp = 0
max_temp = 130

[fan]
pin = PC23

[heater_fan nozzle_cooling_fan]
pin = PC25

[display]
lcd_type = st7920
cs_pin = EXP1_4
sclk_pin = EXP1_5
sid_pin = EXP1_3
encoder_pins = ^EXP2_3, ^EXP2_5
click_pin = ^!EXP1_2

[output_pin beeper]
pin = EXP1_1

[board_pins]
aliases = 
	
	EXP1_1=PA14, EXP1_3=PA15, EXP1_5=PA0,  EXP1_7=PA1, EXP1_9=<GND>,
	EXP1_2=PA13, EXP1_4=PA12, EXP1_6=PA16, EXP1_8=PC2, EXP1_10=<5V>,
	
	EXP2_1=PA25, EXP2_3=PB27, EXP2_5=PA3,  EXP2_7=PB25,  EXP2_9=<GND>,
	EXP2_2=PA27, EXP2_4=PA29, EXP2_6=PA26, EXP2_8=<RST>, EXP2_10=<3.3V>

[bed_mesh]
speed = 300
horizontal_move_z = 10
mesh_min = 10, 45
mesh_max = 240, 290
fade_start = 0.6
fade_end = 10.0
probe_count = 15, 15
algorithm = bicubic

[bed_mesh default]
version = 1
points = 
	0.052187, -0.014375, -0.081250, -0.137813, -0.181875
	0.022500, -0.009688, -0.045938, -0.074375, -0.095000
	-0.007500, -0.018438, -0.033750, -0.041875, -0.046875
	-0.055938, -0.047500, -0.044375, -0.030938, -0.010938
	-0.105313, -0.074375, -0.049063, -0.007500, 0.040000
x_count = 5
y_count = 5
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 240.0
min_y = 45.0
max_y = 290.0

[bed_mesh 60degree]
version = 1
points = 
	-0.137188, -0.132500, -0.130000, -0.134063, -0.134375, -0.136875, -0.135313, -0.132500, -0.135000, -0.132500, -0.125000, -0.115938, -0.106250, -0.093125, -0.075313
	-0.124688, -0.121875, -0.123750, -0.111563, -0.129063, -0.126875, -0.125625, -0.123125, -0.120625, -0.113125, -0.105000, -0.098750, -0.087500, -0.073125, -0.063750
	-0.115313, -0.114063, -0.115938, -0.116875, -0.117500, -0.114688, -0.115313, -0.113125, -0.105625, -0.102813, -0.091563, -0.084375, -0.068125, -0.045313, -0.040000
	-0.108750, -0.104375, -0.104375, -0.105313, -0.105938, -0.105938, -0.105938, -0.104688, -0.096563, -0.091563, -0.083125, -0.066875, -0.065313, -0.030000, -0.034688
	-0.103125, -0.097188, -0.098125, -0.098125, -0.099063, -0.098750, -0.100313, -0.095313, -0.090938, -0.085313, -0.075625, -0.065625, -0.051563, -0.038125, -0.015938
	-0.096875, -0.095000, -0.094375, -0.095000, -0.093750, -0.094375, -0.093438, -0.088438, -0.086250, -0.076250, -0.070625, -0.057188, -0.044375, -0.033438, -0.018750
	-0.090625, -0.087813, -0.088125, -0.087813, -0.087500, -0.091875, -0.087188, -0.084688, -0.080625, -0.075000, -0.065000, -0.054375, -0.039688, -0.031563, -0.021250
	-0.091875, -0.089375, -0.087500, -0.089063, -0.086563, -0.089375, -0.088750, -0.085000, -0.083125, -0.076250, -0.069688, -0.060000, -0.045625, -0.037188, -0.020625
	-0.088438, -0.086563, -0.088125, -0.088438, -0.089375, -0.091563, -0.090000, -0.088125, -0.082188, -0.075313, -0.069688, -0.059375, -0.048125, -0.036250, -0.025625
	-0.089688, -0.090313, -0.086875, -0.087500, -0.090938, -0.088438, -0.090625, -0.089375, -0.084375, -0.077813, -0.072188, -0.061250, -0.050313, -0.040625, -0.024688
	-0.095313, -0.094063, -0.090938, -0.091563, -0.089688, -0.092500, -0.090313, -0.089375, -0.083125, -0.075313, -0.068750, -0.058125, -0.047500, -0.036563, -0.019688
	-0.098125, -0.097188, -0.098438, -0.093438, -0.095313, -0.095000, -0.091250, -0.090000, -0.085625, -0.079375, -0.068750, -0.056250, -0.045625, -0.034375, -0.020000
	-0.110313, -0.109063, -0.105625, -0.106563, -0.105313, -0.103750, -0.100938, -0.094688, -0.089063, -0.081875, -0.071250, -0.056875, -0.044688, -0.028125, -0.012813
	-0.116250, -0.111250, -0.107188, -0.106875, -0.103750, -0.101875, -0.097500, -0.092188, -0.083750, -0.076250, -0.065000, -0.052188, -0.038438, -0.022813, -0.005938
	-0.123750, -0.116875, -0.113750, -0.111563, -0.109063, -0.106563, -0.105625, -0.097500, -0.087500, -0.077813, -0.065313, -0.047813, -0.033438, -0.018438, -0.000313
x_count = 15
y_count = 15
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 239.88
min_y = 45.0
max_y = 290.0
=======================
Extruder max_extrude_ratio=0.266081
mcu 'mcu': Starting serial connect
webhooks client 281473651759808: New connection
webhooks client 281473651759808: Client info {'program': 'Moonraker', 'version': 'v0.8.0-327-g9447494'}
Loaded MCU 'mcu' 112 commands (v0.12.0-171-g2f6e94c9 / gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.35.2-2+14+b2) 2.35.2)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_spi0=PA25,PA26,PA27 BUS_PINS_twi0=PA18,PA17 BUS_PINS_twi1=PB13,PB12 BUS_PINS_usart0=PA10,PA11,PA17 BUS_PINS_usart1=PA12,PA13,PA16 BUS_PINS_usart2=PB21,PB20,PB24 CLOCK_FREQ=84000000 MCU=sam3x8e PWM_MAX=255 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
mcu 'rpi': Starting connect
mcu 'rpi': got {'count': 130, 'sum': 189670, 'sumsq': 1598141, '#name': 'stats', '#sent_time': 1980.365893568, '#receive_time': 1980.40589636}
Loaded MCU 'rpi' 111 commands (v0.11.0-122-ge6ef48cd / gcc: (Debian 10.2.1-6) 10.2.1 20210110 binutils: (GNU Binutils for Debian) 2.35.2)
MCU 'rpi' config: ADC_MAX=4095 CLOCK_FREQ=50000000 MCU=linux PCA9685_MAX=4096 PWM_MAX=32768 STATS_SUMSQ_BASE=256
Sending MCU 'mcu' printer configuration...
Configured MCU 'mcu' (1024 moves)
Protocol error
Traceback (most recent call last):
  File "/home/biqu/klipper/klippy/klippy.py", line 180, in _connect
    cb()
  File "/home/biqu/klipper/klippy/mcu.py", line 746, in _connect
    self._send_config(None)
  File "/home/biqu/klipper/klippy/mcu.py", line 677, in _send_config
    cb()
  File "/home/biqu/klipper/klippy/extras/adxl345.py", line 222, in _build_config
    self.query_adxl345_cmd = self.mcu.lookup_command(
  File "/home/biqu/klipper/klippy/mcu.py", line 877, in lookup_command
    return CommandWrapper(self._serial, msgformat, cq)
  File "/home/biqu/klipper/klippy/mcu.py", line 86, in __init__
    self._cmd = msgparser.lookup_command(msgformat)
  File "/home/biqu/klipper/klippy/msgproto.py", line 317, in lookup_command
    self._error("Command format mismatch: %s vs %s",
  File "/home/biqu/klipper/klippy/msgproto.py", line 243, in _error
    raise error(self.warn_prefix + (msg % params))
msgproto.error: mcu 'rpi': Command format mismatch: query_adxl345 oid=%c rest_ticks=%u vs query_adxl345 oid=%c clock=%u rest_ticks=%u
Build file /home/biqu/klipper/klippy/../.config(1515): Wed Apr 24 17:18:38 2024
========= Last MCU build config =========
# CONFIG_LOW_LEVEL_OPTIONS is not set
# CONFIG_MACH_AVR is not set
CONFIG_MACH_ATSAM=y
# CONFIG_MACH_ATSAMD is not set
# CONFIG_MACH_LPC176X is not set
# CONFIG_MACH_STM32 is not set
# CONFIG_MACH_HC32F460 is not set
# CONFIG_MACH_RP2040 is not set
# CONFIG_MACH_PRU is not set
# CONFIG_MACH_AR100 is not set
# CONFIG_MACH_LINUX is not set
# CONFIG_MACH_SIMU is not set
CONFIG_BOARD_DIRECTORY="atsam"
CONFIG_MCU="sam3x8e"
CONFIG_CLOCK_FREQ=84000000
CONFIG_USBSERIAL=y
CONFIG_ATSAM_SELECT=y
CONFIG_MACH_SAM3X8E=y
# CONFIG_MACH_SAM3X8C is not set
# CONFIG_MACH_SAM4S8C is not set
# CONFIG_MACH_SAM4E8E is not set
# CONFIG_MACH_SAME70Q20B is not set
CONFIG_MACH_SAM3X=y
CONFIG_FLASH_SIZE=0x80000
CONFIG_FLASH_BOOT_ADDRESS=0x0
CONFIG_RAM_START=0x20000000
CONFIG_RAM_SIZE=0x18000
CONFIG_STACK_SIZE=512
CONFIG_FLASH_APPLICATION_ADDRESS=0x80000
CONFIG_ATSAM_USB=y
# CONFIG_ATSAM_SERIAL is not set
CONFIG_USB=y
CONFIG_USB_VENDOR_ID=0x1d50
CONFIG_USB_DEVICE_ID=0x614e
CONFIG_USB_SERIAL_NUMBER_CHIPID=y
CONFIG_USB_SERIAL_NUMBER="12345"
CONFIG_WANT_GPIO_BITBANGING=y
CONFIG_WANT_DISPLAYS=y
CONFIG_WANT_SENSORS=y
CONFIG_WANT_LIS2DW=y
CONFIG_WANT_LDC1612=y
CONFIG_WANT_SOFTWARE_I2C=y
CONFIG_WANT_SOFTWARE_SPI=y
CONFIG_NEED_SENSOR_BULK=y
CONFIG_CANBUS_FREQUENCY=1000000
CONFIG_HAVE_GPIO=y
CONFIG_HAVE_GPIO_ADC=y
CONFIG_HAVE_GPIO_SPI=y
CONFIG_HAVE_GPIO_I2C=y
CONFIG_HAVE_GPIO_HARD_PWM=y
CONFIG_HAVE_STRICT_TIMING=y
CONFIG_HAVE_CHIPID=y
CONFIG_HAVE_STEPPER_BOTH_EDGE=y
CONFIG_HAVE_BOOTLOADER_REQUEST=y
CONFIG_INLINE_STEPPER_HACK=y
=======================
Build file /home/biqu/klipper/klippy/../out/klipper.dict(7778): Wed Apr 24 17:19:22 2024
Last MCU build version: v0.12.0-171-g2f6e94c9
Last MCU build tools: gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.35.2-2+14+b2) 2.35.2
Last MCU build config: ADC_MAX=4095 BUS_PINS_spi0=PA25,PA26,PA27 BUS_PINS_twi0=PA18,PA17 BUS_PINS_twi1=PB13,PB12 BUS_PINS_usart0=PA10,PA11,PA17 BUS_PINS_usart1=PA12,PA13,PA16 BUS_PINS_usart2=PB21,PB20,PB24 CLOCK_FREQ=84000000 MCU=sam3x8e PWM_MAX=255 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
Build file /home/biqu/klipper/klippy/../out/klipper.elf(1068496): Wed Apr 24 17:19:39 2024
Starting Klippy...
Args: ['/home/biqu/klipper/klippy/klippy.py', '/home/biqu/printer_data/config/printer.cfg', '-I', '/home/biqu/printer_data/comms/klippy.serial', '-l', '/home/biqu/printer_data/logs/klippy.log', '-a', '/home/biqu/printer_data/comms/klippy.sock']
Git version: 'v0.12.0-171-g2f6e94c9'
Branch: master
Remote: origin
Tracked URL: https://github.com/Klipper3d/klipper
CPU: 4 core ?
Python: '3.9.2 (default, Feb 28 2021, 17:03:44) \n[GCC 10.2.1 20210110]'
Start printer at Wed Apr 24 18:41:59 2024 (1713998519.7 37.2)
===== Config file =====
[mcu]
serial = /dev/serial/by-id/usb-Klipper_sam3x8e_20312051505350373138303236303139-if00

[mcu rpi]

[adxl345]
spi_bus = spidev1.1
cs_pin = rpi:None

[resonance_tester]
accel_chip = adxl345
probe_points = 
	150,150,20

[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set allow_park = client.park_at_cancel|default(false)|lower == 'true' %}
	{% set retract = client.cancel_retract|default(5.0)|abs %}
	
	{% set park_x = "" if (client.park_at_cancel_x|default(none) is none)
	else "X=" ~ client.park_at_cancel_x %}
	{% set park_y = "" if (client.park_at_cancel_y|default(none) is none)
	else "Y=" ~ client.park_at_cancel_y %}
	{% set custom_park = park_x|length > 0 or park_y|length > 0 %}
	
	
	{% if printer['gcode_macro RESUME'].restore_idle_timeout > 0 %}
	SET_IDLE_TIMEOUT TIMEOUT={printer['gcode_macro RESUME'].restore_idle_timeout}
	{% endif %}
	{% if (custom_park or not printer.pause_resume.is_paused) and allow_park %} _TOOLHEAD_PARK_PAUSE_CANCEL {park_x} {park_y} {% endif %}
	_CLIENT_RETRACT LENGTH={retract}
	TURN_OFF_HEATERS
	M106 S0
	{client.user_cancel_macro|default("")}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	
	SET_PAUSE_NEXT_LAYER ENABLE=0
	SET_PAUSE_AT_LAYER ENABLE=0 LAYER=0
	CANCEL_PRINT_BASE

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set idle_timeout = client.idle_timeout|default(0) %}
	{% set temp = printer[printer.toolhead.extruder].target if printer.toolhead.extruder != '' else 0 %}
	{% set restore = False if printer.toolhead.extruder == ''
	else True  if params.RESTORE|default(1)|int == 1 else False %}
	
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=last_extruder_temp VALUE="{{'restore': restore, 'temp': temp}}"
	
	{% if idle_timeout > 0 %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=restore_idle_timeout VALUE={printer.configfile.settings.idle_timeout.timeout}
	SET_IDLE_TIMEOUT TIMEOUT={idle_timeout}
	{% endif %}
	PAUSE_BASE
	{client.user_pause_macro|default("")}
	_TOOLHEAD_PARK_PAUSE_CANCEL {rawparams}

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set sp_move = client.speed_move|default(velocity) %}
	{% set runout_resume = True if client.runout_sensor|default("") == ""
	else True if not printer[client.runout_sensor].enabled
	else printer[client.runout_sensor].filament_detected %}
	{% set can_extrude = True if printer.toolhead.extruder == ''
	else printer[printer.toolhead.extruder].can_extrude %}
	{% set do_resume = False %}
	{% set prompt_txt = [] %}
	
	
	{% if printer.idle_timeout.state|upper == "IDLE" or idle_state %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	{% if last_extruder_temp.restore %}
	
	RESPOND TYPE=echo MSG='{"Restoring \"%s\" temperature to %3.1f\u00B0C, this may take some time" % (printer.toolhead.extruder, last_extruder_temp.temp) }'
	M109 S{last_extruder_temp.temp}
	{% set do_resume = True %}
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	{% if runout_resume %}
	{% if do_resume %}
	{% if restore_idle_timeout > 0 %} SET_IDLE_TIMEOUT TIMEOUT={restore_idle_timeout} {% endif %}
	{client.user_resume_macro|default("")}
	_CLIENT_EXTRUDE
	RESUME_BASE VELOCITY={params.VELOCITY|default(sp_move)}
	{% endif %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]}'
	{% set _d = prompt_txt.append("\"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]) %}
	{% endif %}
	
	{% if not (runout_resume and do_resume) %}
	RESPOND TYPE=command MSG="action:prompt_begin RESUME aborted !!!"
	{% for element in prompt_txt %}
	RESPOND TYPE=command MSG='{"action:prompt_text %s" % element}'
	{% endfor %}
	RESPOND TYPE=command MSG="action:prompt_footer_button Ok|RESPOND TYPE=command MSG=action:prompt_end|info"
	RESPOND TYPE=command MSG="action:prompt_show"
	{% endif %}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[filament_switch_sensor switch_sensor]
switch_pin = ^PB16
pause_on_runout = True
runout_gcode = 
insert_gcode = 

[filament_motion_sensor encoder_sensor]
switch_pin = PB15
detection_length = 3
extruder = extruder
pause_on_runout = False
runout_gcode = 

[gcode_macro PROBE_DOWN]
gcode = 
	SET_PIN PIN=probe_enable VALUE=1

[gcode_macro PROBE_UP]
gcode = 
	SET_PIN PIN=probe_enable VALUE=0

[output_pin probe_enable]
pin = PB12
value = 0

[probe]
pin = ^!PA7
deactivate_on_each_sample = False
x_offset = -16
y_offset = 45
samples = 2
samples_tolerance = 0.05
samples_tolerance_retries = 3
activate_gcode = 
	PROBE_DOWN
	G4 P500
deactivate_gcode = 
	PROBE_UP
z_offset = 0.570

[printer]
kinematics = cartesian
max_velocity = 300
max_accel = 9000
max_z_velocity = 7
max_z_accel = 100

[input_shaper]

[stepper_x]
step_pin = PC6
dir_pin = PC5
enable_pin = !PC9
microsteps = 16
rotation_distance = 32
endstop_pin = ^PD4
position_endstop = -15
position_max = 300
position_min = -15
homing_speed = 75

[tmc2130 stepper_x]
cs_pin = PC7
run_current = .75
sense_resistor = 0.120
diag1_pin = !PA4
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[stepper_y]
step_pin = PC12
dir_pin = !PC11
enable_pin = !PC14
microsteps = 16
rotation_distance = 32
endstop_pin = PD6
position_endstop = -10
position_max = 303
position_min = -10
homing_speed = 75

[tmc2130 stepper_y]
cs_pin = PC13
run_current = .75
sense_resistor = 0.120
diag1_pin = !PC15
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[stepper_z]
step_pin = PC17
dir_pin = PC16
enable_pin = !PC19
microsteps = 16
rotation_distance = 2
endstop_pin = probe:z_virtual_endstop
position_max = 265
position_min = -3
homing_speed = 5

[tmc2130 stepper_z]
cs_pin = PC18
run_current = .80
sense_resistor = 0.120
diag1_pin = PC4
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[safe_z_home]
home_xy_position = 166,105
speed = 100
z_hop = 10
z_hop_speed = 100

[extruder]
step_pin = PB10
dir_pin = !PC10
enable_pin = !PB22
microsteps = 16
rotation_distance = 7.81
nozzle_diameter = 0.400
filament_diameter = 1.75
heater_pin = PC24
sensor_type = ATC Semitec 104GT-2
sensor_pin = PB19
min_temp = 0
max_temp = 285
min_extrude_temp = 120
max_extrude_only_distance = 140.0
pressure_advance = .0525
control = pid
pid_kp = 23.681
pid_ki = 1.152
pid_kd = 121.659

[tmc2130 extruder]
cs_pin = PC20
run_current = .75
sense_resistor = 0.120
diag1_pin = !PB23
spi_software_sclk_pin = PD2
spi_software_mosi_pin = PD3
spi_software_miso_pin = PD1

[heater_bed]
heater_pin = PC21
sensor_type = EPCOS 100K B57560G104F
sensor_pin = PB20
control = pid
pid_kp = 21
pid_ki = 1.78
pid_kd = 61.93
min_temp = 0
max_temp = 130

[fan]
pin = PC23

[heater_fan nozzle_cooling_fan]
pin = PC25

[display]
lcd_type = st7920
cs_pin = EXP1_4
sclk_pin = EXP1_5
sid_pin = EXP1_3
encoder_pins = ^EXP2_3, ^EXP2_5
click_pin = ^!EXP1_2

[output_pin beeper]
pin = EXP1_1

[board_pins]
aliases = 
	
	EXP1_1=PA14, EXP1_3=PA15, EXP1_5=PA0,  EXP1_7=PA1, EXP1_9=<GND>,
	EXP1_2=PA13, EXP1_4=PA12, EXP1_6=PA16, EXP1_8=PC2, EXP1_10=<5V>,
	
	EXP2_1=PA25, EXP2_3=PB27, EXP2_5=PA3,  EXP2_7=PB25,  EXP2_9=<GND>,
	EXP2_2=PA27, EXP2_4=PA29, EXP2_6=PA26, EXP2_8=<RST>, EXP2_10=<3.3V>

[bed_mesh]
speed = 300
horizontal_move_z = 10
mesh_min = 10, 45
mesh_max = 240, 290
fade_start = 0.6
fade_end = 10.0
probe_count = 15, 15
algorithm = bicubic

[bed_mesh default]
version = 1
points = 
	0.052187, -0.014375, -0.081250, -0.137813, -0.181875
	0.022500, -0.009688, -0.045938, -0.074375, -0.095000
	-0.007500, -0.018438, -0.033750, -0.041875, -0.046875
	-0.055938, -0.047500, -0.044375, -0.030938, -0.010938
	-0.105313, -0.074375, -0.049063, -0.007500, 0.040000
x_count = 5
y_count = 5
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 240.0
min_y = 45.0
max_y = 290.0

[bed_mesh 60degree]
version = 1
points = 
	-0.137188, -0.132500, -0.130000, -0.134063, -0.134375, -0.136875, -0.135313, -0.132500, -0.135000, -0.132500, -0.125000, -0.115938, -0.106250, -0.093125, -0.075313
	-0.124688, -0.121875, -0.123750, -0.111563, -0.129063, -0.126875, -0.125625, -0.123125, -0.120625, -0.113125, -0.105000, -0.098750, -0.087500, -0.073125, -0.063750
	-0.115313, -0.114063, -0.115938, -0.116875, -0.117500, -0.114688, -0.115313, -0.113125, -0.105625, -0.102813, -0.091563, -0.084375, -0.068125, -0.045313, -0.040000
	-0.108750, -0.104375, -0.104375, -0.105313, -0.105938, -0.105938, -0.105938, -0.104688, -0.096563, -0.091563, -0.083125, -0.066875, -0.065313, -0.030000, -0.034688
	-0.103125, -0.097188, -0.098125, -0.098125, -0.099063, -0.098750, -0.100313, -0.095313, -0.090938, -0.085313, -0.075625, -0.065625, -0.051563, -0.038125, -0.015938
	-0.096875, -0.095000, -0.094375, -0.095000, -0.093750, -0.094375, -0.093438, -0.088438, -0.086250, -0.076250, -0.070625, -0.057188, -0.044375, -0.033438, -0.018750
	-0.090625, -0.087813, -0.088125, -0.087813, -0.087500, -0.091875, -0.087188, -0.084688, -0.080625, -0.075000, -0.065000, -0.054375, -0.039688, -0.031563, -0.021250
	-0.091875, -0.089375, -0.087500, -0.089063, -0.086563, -0.089375, -0.088750, -0.085000, -0.083125, -0.076250, -0.069688, -0.060000, -0.045625, -0.037188, -0.020625
	-0.088438, -0.086563, -0.088125, -0.088438, -0.089375, -0.091563, -0.090000, -0.088125, -0.082188, -0.075313, -0.069688, -0.059375, -0.048125, -0.036250, -0.025625
	-0.089688, -0.090313, -0.086875, -0.087500, -0.090938, -0.088438, -0.090625, -0.089375, -0.084375, -0.077813, -0.072188, -0.061250, -0.050313, -0.040625, -0.024688
	-0.095313, -0.094063, -0.090938, -0.091563, -0.089688, -0.092500, -0.090313, -0.089375, -0.083125, -0.075313, -0.068750, -0.058125, -0.047500, -0.036563, -0.019688
	-0.098125, -0.097188, -0.098438, -0.093438, -0.095313, -0.095000, -0.091250, -0.090000, -0.085625, -0.079375, -0.068750, -0.056250, -0.045625, -0.034375, -0.020000
	-0.110313, -0.109063, -0.105625, -0.106563, -0.105313, -0.103750, -0.100938, -0.094688, -0.089063, -0.081875, -0.071250, -0.056875, -0.044688, -0.028125, -0.012813
	-0.116250, -0.111250, -0.107188, -0.106875, -0.103750, -0.101875, -0.097500, -0.092188, -0.083750, -0.076250, -0.065000, -0.052188, -0.038438, -0.022813, -0.005938
	-0.123750, -0.116875, -0.113750, -0.111563, -0.109063, -0.106563, -0.105625, -0.097500, -0.087500, -0.077813, -0.065313, -0.047813, -0.033438, -0.018438, -0.000313
x_count = 15
y_count = 15
mesh_x_pps = 2
mesh_y_pps = 2
algo = bicubic
tension = 0.2
min_x = 10.0
max_x = 239.88
min_y = 45.0
max_y = 290.0
=======================
Config error
Traceback (most recent call last):
  File "/home/biqu/klipper/klippy/klippy.py", line 175, in _connect
    self._read_config()
  File "/home/biqu/klipper/klippy/klippy.py", line 139, in _read_config
    m.add_printer_objects(config)
  File "/home/biqu/klipper/klippy/mcu.py", line 1044, in add_printer_objects
    printer.add_object(s.section, MCU(
  File "/home/biqu/klipper/klippy/mcu.py", line 567, in __init__
    self._serialport = config.get('serial')
  File "/home/biqu/klipper/klippy/configfile.py", line 57, in get
    return self._get_wrapper(self.fileconfig.get, option, default,
  File "/home/biqu/klipper/klippy/configfile.py", line 32, in _get_wrapper
    raise error("Option '%s' in section '%s' must be specified"
configparser.Error: Option 'serial' in section 'mcu rpi' must be specified
webhooks client 281473498264336: New connection
webhooks client 281473498264336: Client info {'program': 'Moonraker', 'version': 'v0.8.0-327-g9447494'}
